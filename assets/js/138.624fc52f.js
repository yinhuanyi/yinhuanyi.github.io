(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{1824:function(s,e,a){s.exports=a.p+"assets/img/2020-03-2911.30.57.a846aff9.png"},1825:function(s,e,a){s.exports=a.p+"assets/img/2020-03-2911.31.53.c6f9e091.png"},1826:function(s,e,a){s.exports=a.p+"assets/img/2020-03-2911.33.43.b6b0b5c3.png"},1827:function(s,e,a){s.exports=a.p+"assets/img/2020-03-303.13.03.507339df.png"},2716:function(s,e,a){"use strict";a.r(e);var n=a(9),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"一-安装docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-安装docker"}},[s._v("#")]),s._v(" 一：安装docker")]),s._v(" "),n("h3",{attrs:{id:"一-概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-概念"}},[s._v("#")]),s._v(" (一)：概念")]),s._v(" "),n("ul",[n("li",[s._v("docker有两个版本")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1：docker ce\n2：docker ee\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("安装")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("curl -sSL https://get.docker.com/ | sh\n\n这里安装完毕后，系统会提示，如果用户使用普通用户运行docker，那么需要将普通用户添加到docker组，sudo usermod -aG docker your-user\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("docker 镜像加速："),n("code",[s._v("编辑/etc/docker/daemon.json")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com",\n    "http://hub-mirror.c.163.com",\n    "https://docker.mirrors.ustc.edu.cn"\n  ]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"二-docker-platform"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-docker-platform"}},[s._v("#")]),s._v(" 二：Docker Platform")]),s._v(" "),n("h3",{attrs:{id:"一-docker平台介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-docker平台介绍"}},[s._v("#")]),s._v(" (一)：docker平台介绍")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1824),alt:"Alt text"}})]),s._v(" "),n("h3",{attrs:{id:"二-docker-engine介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-docker-engine介绍"}},[s._v("#")]),s._v(" (二)：docker Engine介绍")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1825),alt:"Alt text"}})]),s._v(" "),n("h3",{attrs:{id:"三-docker-arckitecture介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-docker-arckitecture介绍"}},[s._v("#")]),s._v(" (三)：docker Arckitecture介绍")]),s._v(" "),n("p",[n("img",{attrs:{src:a(1826),alt:"Alt text"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\tdocker client可以与 docker host在同一台机器上(安装docker engine的主机是docker host)，也可以不是同一台机器\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"三-docker-hub的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-docker-hub的使用"}},[s._v("#")]),s._v(" (三)：Docker Hub的使用")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Docker Hub 存放着 Docker 及其组件的所有资源。Docker Hub 可以帮助你与同事之间协作，并获得功能完整的 Docker。为此，它提供的服务有：\n\t1:Docker镜像\n\t2:用户认证\n\t3:自动镜像构建和工作流程工具，如构建触发器和 web hooks\n\t4:整合了 GitHub 和 BitBucket\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("img",{attrs:{src:a(1827),alt:"Alt text"}})]),s._v(" "),n("ul",[n("li",[s._v("拉取Docker Hub镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker pull yhyblog/ubuntu:14.10\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("推送本地镜像到Docker Hub仓库中")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker push yhyblog/ubuntu:tagname\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"四-获取-centos系统-镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-获取-centos系统-镜像"}},[s._v("#")]),s._v(" (四)：获取 centos系统 镜像")]),s._v(" "),n("ul",[n("li",[s._v("获取镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1：查看\ndocker search centos\n\n2：获取\ndocker pull centos\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ul",[n("li",[s._v("查看本地镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker images\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("删除本地镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 4b90b5603d01是镜像ID号\ndocker rmi 4b90b5603d01\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"五-运行镜像成为container容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五-运行镜像成为container容器"}},[s._v("#")]),s._v(" (五)：运行镜像成为container容器")]),s._v(" "),n("ul",[n("li",[s._v("基本格式")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("启动一个centos容器")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 从image启动一个container，-m 指明最大的内存使用率，--cpuset-cpus 指明只能使用哪些CPU, 直接进入到容器\ndocker run -it -m 64MB --cpuset-cpus 0 centos:latest /bin/bash\n\n\n# -d表示容器后台运行，-p指定端口，-v指定将本地的/data/映射到容器的/web/目录\ndocker run -d --name openedx --net bridge -p 8000:80 -v /data/:/web busybox:latest httpd -f -h /web\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"三-dockerfile"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-dockerfile"}},[s._v("#")]),s._v(" 三：Dockerfile")]),s._v(" "),n("h3",{attrs:{id:"一-dockerfile基础"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-dockerfile基础"}},[s._v("#")]),s._v(" (一)：Dockerfile基础")]),s._v(" "),n("ul",[n("li",[s._v("概念")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\tDockfile是一种被Docker程序解释的脚本，Dockerfile由一条一条的指令组成，每条指令对应启动的container中的一条命令。Docker程序将这些Dockerfile指令翻译真正的Linux命令。Dockerfile有自己书写格式和支持的命令，Docker程序解决这些命令间的依赖关系，类似于Makefile。Docker程序将读取Dockerfile，根据指令生成用户自定义的image。相比image这种黑盒子，Dockerfile这种显而易见的脚本更容易被使用者接受，它明确的表明image是怎么产生的。有了Dockerfile，当我们需要定制自己额外的需求时，只需要基于原有的image在Dockerfile上添加或者修改指令，重新生成image即可，省去了敲命令的麻烦\n\n\tDockerfile的指令是忽略大小写的，建议使用大写，使用 # 作为注释，每一行只支持一条指令，每条指令可以携带多个参数\n\n\t构建指令用于构建image，其指定的操作不会在运行image的容器上执行；\n\t设置指令用于设置image的属性，其指定的操作将在运行image的容器中执行\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ul",[n("li",[s._v("Dockerfile中基本模板")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('1: FROM\n指定基于官方的哪个镜像创建Dockerfile\n\n2：MAINTAINER\n指定镜像的提供者\n\n2：LABEL\n指定镜像的meta信息\nLABEL maintainer="Robby"\n\n3：RUN\nRUN yum install -y httpd\n# /bin/bash -c 后面需要接字符串\nRUN ["/bin/bash","-c","yum install -y httpd"]  \n\n4：CMD \nCMD命令在dockerfile中只能够有一条，如果用户在运行容器的时候，指定了容器运行的命令，那么CMD命令就会被覆盖掉。因此，其余在容器中执行的命令都用RUN即可\nCMD ["httpd", "-f", "-h", "/web/html"]\n\n5：ENTRYPOIT\nENTRYPOIT与CMD类似，不同的是，不会被用户运行容器的时候，指定了容器运行的命令而被覆盖，因此以后用ENTRYPOIT吧\n\n6：EXPOSE\n指定需要暴露的端口，这里的EXPOSE指定的端口，不能被docker容器之外访问到，只能是其他容器link到\nEXPOSE 22 80 3000\n\n7：ENV\n给容器传递环境变量，给容器内部传递环境变量，在容器的shell中可以被引用\nENV PORT 3000\n\n8：COPY <src### <dest>\n将宿主机的文件拷贝到容器中，<src>为宿主机的路径为Dockerfile的相对路径，而<dest>为容器中的路径，如果<dest>不存在，会自动创建\n\n9：VOLUME\nVOLUME 指令创建的挂载点，这里是指定容器内部的挂载点\nVOLUME ["/data1","/data2"]\n\n10：USER \n运行映像时，Dockerfile中跟随它的RUN，CMD和ENTRYPOINT指令运行的用户，默认是root\nUSER apache\n\n11：WORKDIR\n指定工作目录，中容器中运行的命令都是基于这个目录的，一般我们公司这里指定的是前端源码目录\nWORKDIR /app\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br")])]),n("h3",{attrs:{id:"二-基于dockerfile构建镜像推送到docker-hub"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-基于dockerfile构建镜像推送到docker-hub"}},[s._v("#")]),s._v(" (二)：基于Dockerfile构建镜像推送到docker hub")]),s._v(" "),n("ul",[n("li",[s._v("编写一个dockerfile文件")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# FROM指明基于什么镜像进行创建Dockerfile，image可以是官方远程仓库中的，也可以位于本地仓库\nFROM busybox:latest\n\n# MAINTAINER指定镜像的提供者\nMAINTAINER Robby\n\n# COPY dockerfile所在目录的所有文件拷贝到镜像的/web目录\nCOPY . /web\n\n# EXPOSE指明暴露出来的端口\nEXPOSE 80\n\n# CMD指明运行的命令，但是这里一般是写ENTRYPOINT指令\nCMD ["httpd", "-f", "-h", "/web"]\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("ul",[n("li",[s._v("基于dockerfile构建镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker build -t httpd:`date +%s` -f httpd.dockerfile  .  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("给进行打tag(1585655362是生成的时间戳)")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker tag httpd:1585655362 yhyblog/httpd:1585655362\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("登录到docker hub")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker login\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("推送镜像到docker hub")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker push yhyblog/httpd:1585655362\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("拉取镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker pull yhyblog/httpd:1585655362\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("运行镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run -d --rm  --name httpd -p 8000:80 yhyblog/httpd:1585655362\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("进入镜像")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 9bddbd1ceea7是container id\ndocker exec -it 9bddbd1ceea7 /bin/sh\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("删除后台的僵死容器")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker rm  $(docker ps -qa)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"四-dockerfile中的-expose-与-docker-run-p参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-dockerfile中的-expose-与-docker-run-p参数"}},[s._v("#")]),s._v(" 四：Dockerfile中的 EXPOSE 与 docker run -p参数")]),s._v(" "),n("ul",[n("li",[s._v("分别讨论4种情况")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1：既没有在Dockerfile里Expose，也没有run -p\n2：只在Dockerfile里Expose了这个端口\n3：同时在Dockerfile里Expose，又docker run -p\n4：只有docker run －p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("结果对比")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("针对情况1：\n\t启动在这个container里的服务既不能被host主机和外网访问，也不能被link的container访问，只能在此容器内部使用\n\n针对情况2：\n\t启动在这个container里的服务不能被docker外部世界（宿主机host和其他主机）访问，但是可以通过container link，被其他link的container访问到\n\n针对情况3：\n\t启动的这个cotnainer既可以被docker外部世界访问，也可以被link的container访问\n\n针对情况4：\n\t其实docker做了特殊的隐式转换，等价于情况3，既可以被外部世界访问，也可以被link的container访问到（真对这种情况，原因是docker认为，既然你都要把port open到外部世界了，等价于其他的container肯定也能访问，所以docker做了自动的Expose)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);