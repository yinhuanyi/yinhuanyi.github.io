(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1e3:function(s,a,n){s.exports=n.p+"assets/img/2018-08-098.26.11.e162de74.png"},2399:function(s,a,n){"use strict";n.r(a);var e=n(9),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h3",{attrs:{id:"一-模块导入的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-模块导入的问题"}},[s._v("#")]),s._v(" （一）"),e("strong",[e("code",[s._v("模块导入的问题")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(973),alt:"Alt text"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\t在同级别的项目目录下，只有包才能被导入，目录是不能够被导入的。\n\t包与目录的区别在于：包多个__init__.py文件\n\t\n例如：\n\t在test.py文件中，可以导入apps的文件，因为apps里面有__init__.py文件，apps就是一个包，不能导入templates里面的文件，因为templates是目录，没有__init__.py文件\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"二-在django项目中-新建app的方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-在django项目中-新建app的方式"}},[s._v("#")]),s._v(" （二）"),e("strong",[e("code",[s._v("在Django项目中，新建app的方式")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1：命令行创建方式：\n\tpython manage.py startapp students\n\n2：pycharm创建方式：\n\t1:选择Tools ### Run Manager.py Task 就会弹出一个命令执行区域， 类似于已经执行了python manage.py\n\t2：直接 startapp students 就可以了\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"三-在django项目中-给apps设置为sources-root"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-在django项目中-给apps设置为sources-root"}},[s._v("#")]),s._v(" （三）"),e("strong",[e("code",[s._v("在Django项目中，给apps设置为Sources Root")])])]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("\t由于在apps包里面，会创建很多的app， 例如students。如果你想在项目的任何一个文件随时导入一个app里面的文件，那么需要将apps作为Sources Root， 那么pycharm将会知道，文件的根路径为apps。\n\t\n\t例如： "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" students "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" views ， pycharm是不会报错的。都是如果你使用命令行运行这个Python文件，那么就会报错，因为Python解释器认为：Python模块的搜索路径是从当前运行的Python文件所在目录开始寻找，然后在是项目的根目录"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 一级一级找，最后到site"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("packages目录"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("第三方包目录"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。\n\n\t那么如果你想使用命令行运行这个文件不报错，且将apps在命令行模式下也是Sources Root的话，需要在settings"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py文件中加入一行：\n\tsys"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("insert"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BASE_DIR"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'apps'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。  \n\t目的就是在django的sys"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path模块搜索路径中的第一个位置加上apps的路径："),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Users"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yinhuanyi"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Python_Virtual_Env_2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.10")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Djang_test"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apps\n\t\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"四-启动django项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四-启动django项目"}},[s._v("#")]),s._v(" （四）"),e("strong",[e("code",[s._v("启动Django项目")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("可以在Run中点击Run指定启动pycharm中哪一个Django项目\n也可以在Run中点击Debug进行项目调试\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"五-配置django项目使用的数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五-配置django项目使用的数据库"}},[s._v("#")]),s._v(" （五）"),e("strong",[e("code",[s._v("配置Django项目使用的数据库")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("编辑settings文件，在settings文件中配置数据库如下\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': '数据库名',\n        'USER': '用户名',\n        'PASSWORD': '密码',\n        'HOST': '主机IP',\n        'PORT': 端口,\n    }\n}\n\n\n且需要安装MySQL-python包，是Python连接MySQL的驱动\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("h3",{attrs:{id:"六-生成数据表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六-生成数据表"}},[s._v("#")]),s._v(" （六）"),e("strong",[e("code",[s._v("生成数据表")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("makemigrations : 检查更新\nmigrate：更新数据表\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"七-在settings中指定html页面的templates模板"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七-在settings中指定html页面的templates模板"}},[s._v("#")]),s._v(" （七）"),e("strong",[e("code",[s._v("在settings中指定HTML页面的templates模板")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\t在每一个app的view里面，都需要render HTML文件，那个HTML文件一般都是填写的相对地址，也就是HTML的文件名称。那么Django会在哪里找这个HTML文件呢？\n\t在settings指定的模板目录中找，如下\n\n# 设置静态模板的路径\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'templates')], # 这里就是指定模板路径\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n                'django.core.context_processors.media',  # 为了引用图片地址的时候，使用data-url=\"{{ MEDIA_URL }}{{ course_org.image }}\"， 因此，需要加入这个类, 使得{{ MEDIA_URL }}能够取到值\n            ],\n        },\n    },\n]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h3",{attrs:{id:"八-在settings中指定静态文件static的路径-这样就能够直接在template中指定static文件的相对路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#八-在settings中指定静态文件static的路径-这样就能够直接在template中指定static文件的相对路径"}},[s._v("#")]),s._v(" （八）"),e("strong",[e("code",[s._v("在settings中指定静态文件static的路径, 这样就能够直接在template中指定static文件的相对路径")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('1：打开settings文件，你会发现已经指定了static为/static/， \nSTATIC_URL = \'/static/\'\n\n2：但是在template中是无法使用这个路径的，因为没有把这个路径加入到项目的路径中，因此需要把static路径加入到项目的路径中\nSTATICFILES_DIRS = (os.path.join(BASE_DIR, "static"), )  # 等价于 /Users/yinhuanyi/Python_Virtual_Env_2.7.10/MxOnline/static\n\n3: 那么在template中引用这个静态文件就可以这样引用，指定相对路径就好了\n<link rel="stylesheet" type="text/css" href="{% static \'css/muke/course/learn-less.css\' %}"/### \n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"九-django项目的配置过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#九-django项目的配置过程"}},[s._v("#")]),s._v(" （九）"),e("strong",[e("code",[s._v("Django项目的配置过程")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(974),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("request请求流程")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(975),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"十-每次创建一个app都需要在settings中将它注册进来-如果不注册进来-那么执行migration的时候就不会生成表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十-每次创建一个app都需要在settings中将它注册进来-如果不注册进来-那么执行migration的时候就不会生成表"}},[s._v("#")]),s._v(" （十）"),e("strong",[e("code",[s._v("每次创建一个app都需要在settings中将它注册进来, 如果不注册进来，那么执行migration的时候就不会生成表")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 配置安装好的APP\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'users',\n    'courses',\n    'operation',\n    'organization',\n    'xadmin',  # xadmin库\n    'crispy_forms',  # xadmin依赖的form验证库 \n    'captcha',  # 验证码处理库\n    'pure_pagination',  # 翻页库\n    'DjangoUeditor', # 富文本编辑器\n]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h3",{attrs:{id:"十一-django中的post表单提交操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十一-django中的post表单提交操作"}},[s._v("#")]),s._v(" （十一）"),e("strong",[e("code",[s._v("Django中的post表单提交操作")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\t1：在Django中的每一次表单提交操作都需要提供一个{% csrf_token %}, 因为每次get这个页面的时候，服务器端都会在浏览器端写入token到cookie中。当用户点击提交请求，post表单的时候，这个 {% csrf_token %} 就会做变量替换，替换为一个input标签，获取到浏览器的token，提交到服务器端，服务器端会先通过Django的CSRF token的浏览器，验证token是否是合法的，如果合法，那么请求会通过拦截器，到达服务器端的view处理逻辑，然后就可以取出用户提交的数据了\n\n\t2：Django中还有一种csrf认知机制，就是通过ajax，将token写入http的请求头。通过ajax完成一个http的自定义请求头\n\n\t3：Django没有referer的CSRF认证机制，referer的认证是最简单的一种，确保每次表单提交的源站都是后台允许的源站\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"十二-django中的object管理器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十二-django中的object管理器"}},[s._v("#")]),s._v(" （十二）"),e("strong",[e("code",[s._v("Django中的object管理器")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\t每次当model类调用object去处理数据的时候，都会返回一个Queryset对象，这个Queryset就像一个列表一样，需要遍历才能得到每一条记录对象\n\t\n\tobject常用的方法有：\n\t\tall(): 返回表中的所有的行\n\t\tfilter()：返回指定的行，可以对字段进行过滤\n\t\n\t记录对象可以实现的操作有：\n\t\tmessage.name: 获取message对象的name字段的值\n\t\tmessage.save: 将message对象写入表中\n\t\tmessage.delete: 将将message对象从表中删除\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"十三-简单介绍django中template如何获取到view中传递的值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十三-简单介绍django中template如何获取到view中传递的值"}},[s._v("#")]),s._v(" （十三）"),e("strong",[e("code",[s._v("简单介绍Django中template如何获取到view中传递的值")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('Python的模板语言的使用都类似，如果在view中render的template是这样写的：\n\nreturn render(request, \'course-list.html\', {\n            "all_courses": courses,\n            "sort": sort,\n            "hot_courses": hot_courses,\n        })\n\n那么，你在模板语言中可以获取到all_courses、sort、hot_courses对应的value\n{% for course in all_courses.object_list %}  # 遍历\n{% if sort == \'up\' %} up {% else %} down {% endif %} # 条件判断, if 和 endif是成对出现的\n\n\n文档参考：https://yiyibooks.cn/xx/Django_1.11.6/ref/templates/builtins.html\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h3",{attrs:{id:"十四-简单介绍django中的过滤器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十四-简单介绍django中的过滤器"}},[s._v("#")]),s._v(" （十四）"),e("strong",[e("code",[s._v("简单介绍Django中的过滤器")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('使用的基本方式为：{{ 变量名称|过滤器名称 }}\n1：例如：{{ value|add:"2" }} ： 如果 value 为 4,则会输出 6\n\n2：例如：{{ first|add:second }}：first 是 [1, 2, 3] ，second 是 [4, 5, 6], 将会输出 [1, 2, 3, 4, 5, 6]， 同样适合于字符串的相加\n\n3：例如：{{ value|cut:" " }}：如果value为“String with spaces”，输出将为"Stringwithspaces"。\n\nhttps://yiyibooks.cn/xx/Django_1.11.6/ref/templates/builtins.html\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"十五-为django自建的user表进行扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十五-为django自建的user表进行扩展"}},[s._v("#")]),s._v(" （十五）"),e("strong",[e("code",[s._v("为Django自建的user表进行扩展")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# 使用AbstractUser， 这样可以使用Django自带的用户字段，也可以添加我们自定义的字段，AbstractUser 中的所有的字段就是auth.user表中的字段，因此扩展的时候直接继承AbstractUser这个model就好了\n\nfrom django.contrib.auth.models import AbstractUser\nclass UserProfile(AbstractUser):\n    nick_name = models.CharField(max_length=50, verbose_name=u\'昵称\', default=u"")\n    # 这里的null 和blank一般是一组合，说明用户可以不填写\n    birday = models.DateField(verbose_name=u"生日", null=True, blank=True)\n    # 对于这个性别，有两种类型，所以使用枚举\n    gender = models.CharField(\n        # 对应后台管理系统中的选择框\n        choices=(("male", u"男"), ("female", u"女")),\n        default="female",\n        max_length=50,\n    )\n\n    address = models.CharField(max_length=100, default=u"")\n    mobile = models.CharField(max_length=11, default=u"")\n    # 图片字段，有上传的能力\n    image = models.ImageField(upload_to="image/%Y/%m", default=u"image/default.png", max_length=100)\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h3",{attrs:{id:"十六-对django的django-contrib是啥-做出解释"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十六-对django的django-contrib是啥-做出解释"}},[s._v("#")]),s._v(" （十六）"),e("strong",[e("code",[s._v("对Django的Django.contrib是啥？做出解释")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1、它是一个强大的功能包，是Django的标准库。\n2、Django的标准库存放在 django.contrib 包中。每个子包都是一个独立的附加功能包。 这些子包一般是互相独立的，不过有些django.contrib子包需要依赖其他子包。\n3、在 django.contrib 中对函数的类型并没有强制要求 。其中一些包中带有模型（因此需要你在数据库中安装对应的数据表），但其它一些由独立的中间件及模板标签组成。\n4、django.contrib 开发包共有的特性是: 就算你将整个django.contrib开发包删除，你依然可以使用 Django 的基础功能而不会遇到任何问题。\n\n5、当 Django 开发者向框架增加新功能的时，他们会严格根据这一原则来决定是否把新功能放入django.contrib中。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("img",{attrs:{src:n(976),alt:"Alt text"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("admin : 自动化的站点管理工具。\nadmindocs : 为Django admin站点提供自动文档。\nauth : Django的用户验证框架。\ncomments : 一个评论应用，关于这个应用的更多信息请参见Django的官方网站。\ncontenttypes : 这是一个用于引入文档类型的框架，每个安装的Django模块作为一种独立的文档类型。 这个框架主要在Django内部被其他应用使用，它主要面向Django的高级开发者。可以通过阅读源码来了解关于这个框架的更多信息，源码的位置在 django/contrib/contenttypes/。\ncsrf : 这个模块用来防御跨站请求伪造(CSRF)。\ndatabrowse：帮助你浏览数据的Django应用。\nflatpages : 一个在数据库中管理单一HTML内容的模块。\nformtools : 一些列处理表单通用模式的高级库。\ngis : 为Django提供GIS（Geographic Information Systems）支持的扩展。 举个例子，它允许你的Django模型保存地理学数据并执行地理学查询。请参看http://geodjango.org/上的文档。\nhumanize : 一系列 Django 模块过滤器，用于增加数据的人性化。\nlocalflavor：针对不同国家和文化的混杂代码段。例如，它包含了验证美国的邮编 以及爱尔兰的身份证号的方法。\nmarkup : 一系列的 Django 模板过滤器，用于实现一些常用标记语言。\nredirects : 用来管理重定向的框架。\nsessions : Django 的会话框架。\nsitemaps : 用来生成网站地图的 XML 文件的框架。\nsites : 一个让你可以在同一个数据库与 Django 安装中管理多个网站的框架。\nsyndication : 一个用 RSS 和 Atom 来生成聚合订阅源的的框架。\nwebdesign : 对设计者非常有用的Django扩展。到编写此文时，它只包含一个模板标签{% lorem %}。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("h3",{attrs:{id:"十七-创建了users的app之后-写完users的model之后-每次都需要将app在settings文件中注册-编写的userprofile这个model比较特别-不是直接继承与models-model的-是继承abstractuser这个model-因此还有将这个用户的model在settings文件中重载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十七-创建了users的app之后-写完users的model之后-每次都需要将app在settings文件中注册-编写的userprofile这个model比较特别-不是直接继承与models-model的-是继承abstractuser这个model-因此还有将这个用户的model在settings文件中重载"}},[s._v("#")]),s._v(" （十七）"),e("strong",[e("code",[s._v("创建了users的app之后，写完users的model之后，每次都需要将app在settings文件中注册，编写的UserProfile这个model比较特别，不是直接继承与models.Model的，是继承AbstractUser这个model，因此还有将这个用户的model在settings文件中重载")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 配置安装好的APP\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'users',\n    'courses',\n    'operation',\n    'organization',\n    'xadmin',  # xadmin库\n    'crispy_forms',  # xadmin依赖的form验证库\n    'captcha',  # 验证码处理库\n    'pure_pagination',  # 翻页库\n    'DjangoUeditor', # 富文本编辑器\n]\n\n\n# 当使用Userprofile替代Django自带的user， 之后用户都使用Userprofile这个模型来认证用户，后台也会读取这个配置，配置Django认证的时候使用的是users这个app的Userprofile这个model\nAUTH_USER_MODEL = \"users.Userprofile\"\n\n# 且不要忘记需要使用manage.py检查更新\nmakemigrations \nmigrate\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])]),e("h3",{attrs:{id:"十八-如果是使用的python2-7-那么在每个页面中-最好写上使用utf-8编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十八-如果是使用的python2-7-那么在每个页面中-最好写上使用utf-8编码"}},[s._v("#")]),s._v(" （十八）"),e("strong",[e("code",[s._v("如果是使用的Python2.7，那么在每个页面中，最好写上使用utf-8编码")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# coding: utf-8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"十九-如果使用到了django的imagefield这个字段类型的话-需要安装pillow这个库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#十九-如果使用到了django的imagefield这个字段类型的话-需要安装pillow这个库"}},[s._v("#")]),s._v(" （十九）"),e("strong",[e("code",[s._v("如果使用到了Django的ImageField这个字段类型的话，需要安装pillow这个库")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pillow是Python Imaging Library的一个兼容版本，支持Python2和Python3.\n使用方式为：\nfrom PIL import Image\n这里的PIL就是Python的图形处理库\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"二十-说一说django中的循环引用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十-说一说django中的循环引用"}},[s._v("#")]),s._v(" （二十）"),e("strong",[e("code",[s._v("说一说Django中的循环引用")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(977),alt:"Alt text"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\t如上图，我们创建两个app，一个是users的app，一个是course的app。在设计表的时候，Usercourse这个model就会引用到Course这个model的主键。CourseComment这个model会引用到User这个model的主键\n\t\n\t那么这种情况就会变为A需要执行的时候应用了B，B需要执行的时候引用了A，那就变成了循环等待，使得A,B两个任务都无法完成，因此在设计表的时候，需要考虑到循环引用\n\n\t为了解决Django的循环引用，必须使用分层设计app， 如下图\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("img",{attrs:{src:n(978),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"二十一-说一说django的imagefield字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十一-说一说django的imagefield字段"}},[s._v("#")]),s._v(" （二十一）"),e("strong",[e("code",[s._v("说一说Django的ImageField字段")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("这个字段比较特殊，一般用来做图片上传的功能， \nimage = models.ImageField(max_length=100, upload_to='banner/%Y/%m', verbose_name=u'轮播图')\nmax_length：因为数据库保存的是图片的地址，因此需要一个max_length\nupload_to：指定图片上传到哪里，这里一般是上传到media目录下，因为在setting里面会设定\nverbose_name： 指定字段在后台管理系统的名称\n\n# 设置后台图片上传和查找的路径\nMEDIA_URL = '/media/'\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h3",{attrs:{id:"二十二-django是如何处理表中多对一和一对多的映射关系的"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十二-django是如何处理表中多对一和一对多的映射关系的"}},[s._v("#")]),s._v(" （二十二）"),e("strong",[e("code",[s._v("Django是如何处理表中多对一和一对多的映射关系的")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Django内部的没有关于逻辑的一对多和多对一的写法，Django是通过表之间的外键来实现表与表之间的关联关系的\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"二十三-django中使用外键"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十三-django中使用外键"}},[s._v("#")]),s._v(" （二十三）"),e("strong",[e("code",[s._v("Django中使用外键")])])]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Course")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Model"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    name "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CharField"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("max_length"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" verbose_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"课程名"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    desc "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CharField"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("max_length"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" verbose_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"课程描述"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    detail "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" UEditorField"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("verbose_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"课程详情"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("width"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" height"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" imagePath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"courses/ueditor/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filePath"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"courses/ueditor/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" default"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Meta")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        verbose_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"课程"')]),s._v("\n        verbose_name_plural "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" verbose_name\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 课程一般是有很多章节的，那么课程与章节直接就是一对多的关系，Django中使用外键来描述一对多的映射关系，因此设置的一个字段为course，主键是Course表中的id字段")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lesson")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Model"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    course "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ForeignKey"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Course"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" verbose_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"课程"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    name "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CharField"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("max_length"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" verbose_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"章节名"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    add_time "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DateTimeField"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("datetime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("now"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" verbose_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"添加时间"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Meta")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        verbose_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('u"章节"')]),s._v("\n        verbose_name_plural "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" verbose_name\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("ul",[e("li",[s._v("Lesson表的表结构是这样的, 外键名为course_id，后面加了一个 _ 和一个主键的名称")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(979),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"二十四-文件上传字段-filefield"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十四-文件上传字段-filefield"}},[s._v("#")]),s._v(" （二十四）"),e("strong",[e("code",[s._v("文件上传字段 FileField")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# upload_to是文件上传的地址, 在后台管理系统中会显示一个按钮\ndownload = models.FileField(upload_to="course/resource/%Y/%m", verbose_name=u"资源文件", max_length=100)\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"二十五-如何将django生成的app移动到指定的apps目录中"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十五-如何将django生成的app移动到指定的apps目录中"}},[s._v("#")]),s._v(" （二十五）"),e("strong",[e("code",[s._v("如何将Django生成的app移动到指定的apps目录中")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 由于后续的过程，app会越来越多，那么一般而言，所有的app都需要移动到apps目录下，直接拖动需要移动的app到指定的apps目录即可。但是在移动的时候会出现一个提示对话框，，把search for references 和 open moved files in editor 不要打钩。但是这里就会有个问题，在某个model中取引用其他的model的时候，就会出现找不到model的错误，这是因为Python的搜索路径是从项目的根目录和当前文件所在目录往下找。那么我们需要将apps目录标记为Mark as source root， 那么这样就可以找到了。但是这样还是不行的，如果是命令行执行的话还是会出错，因此，需要在settings文件中将apps加入到Django的搜索路径中：sys.path.insert(0, os.path.join(BASE_DIR, 'apps'))，这样就将sys.path中加入了apps的路径\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:n(980),alt:"Alt text"}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(981),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"二十六-命令行启动django项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十六-命令行启动django项目"}},[s._v("#")]),s._v(" （二十六）"),e("strong",[e("code",[s._v("命令行启动Django项目")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("python manage.py runserver 0.0.0.0:8000\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"二十七-创建后台admin的管理用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十七-创建后台admin的管理用户"}},[s._v("#")]),s._v(" （二十七）"),e("strong",[e("code",[s._v("创建后台admin的管理用户")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("python manage.py createsuperuser\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"二十七-修改admin后台为中文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十七-修改admin后台为中文"}},[s._v("#")]),s._v(" （二十七）"),e("strong",[e("code",[s._v("修改admin后台为中文")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 编辑settings文件\n# 让admin显示中文\nLANGUAGE_CODE = 'zh-hans'\n\nTIME_ZONE = 'Asia/Shanghai'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = False # 设置数据库存储的时间为本地时间，如果是True的话，就是UTC时间\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"二十八-当我们将所有的app拖入到apps的时候-会出现too-many-values-to-unpack的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十八-当我们将所有的app拖入到apps的时候-会出现too-many-values-to-unpack的问题"}},[s._v("#")]),s._v(" （二十八）"),e("strong",[e("code",[s._v("当我们将所有的app拖入到apps的时候，会出现too many values to unpack的问题")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\t这是由于将app拖入到apps的时候，app的路径在migrations的文件中也会相应变化，因此：需要migrations的文件中在删除apps。\n\t在Edit里面，选择find in path，然后一个一个删除掉，再次makemigration \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"二十九-安装xadmin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二十九-安装xadmin"}},[s._v("#")]),s._v(" （二十九）"),e("strong",[e("code",[s._v("安装xadmin")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1：直接pip install xadmin （我们使用源码安装）\n2：在settings中添加xadmin 这个app\n3: 添加crispy_forms这个app\n4：在urls.py文件中将admin换成xadmin（先要导入xadmin） # url(r'^xadmin/', xadmin.site.urls),\n5: 在重启django系统\n6：makemigration 同步xadmin的数据表\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"三十-xadmin源码引入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十-xadmin源码引入"}},[s._v("#")]),s._v(" （三十）"),e("strong",[e("code",[s._v("xadmin源码引入")])])]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("1：下载xadmin的源码包")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(982),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("2：把xadmin的目录复制到项目的根目录中， 再创建一个extra_apps目录，将xadmin的目录拖入到extra_apps目录，最后将extra_apps目录Mark 为source root。 且在settings文件中加入"),e("code",[s._v("sys.path.insert(0, os.path.join(BASE_DIR, 'extra_apps'))")])])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(983),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("修改urls.py文件，不再使用admin，直接引入xadmin作为管理后台")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("from django.conf.urls import url\nfrom django.contrib import admin\nimport xadmin\n\nurlpatterns = [\n    url(r'^xadmin/', xadmin.site.urls),\n]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("3：根据xadmin的requirements提示，安装对应的依赖包")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("django-crispy-forms>=1.6.0\ndjango-import-export>=0.5.1\ndjango-reversion>=2.0.0\ndjango-formtools==1.0\nfuture==0.15.2\nhttplib2==0.9.2\nsix==1.10.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pip install django-crispy-forms\npip install future==0.15.2\npip install django-formtools==1.0\npip install httplib2==0.9.2 \npip install six==1.10.0\npip install django-import-export\npip install django-reversion\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"三十一-创建后台超级用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十一-创建后台超级用户"}},[s._v("#")]),s._v(" （三十一）"),e("strong",[e("code",[s._v("创建后台超级用户")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("引入了xadmin之后需要注册到settings文件中，且运行makemigration 和 migrate\n在命令行加入到Future_Edu项目的目录，执行 python manage.py createsuperuser, 创建超级用户\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("那么现在就可以使用超级用户登录到xadmin管理后台了")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(984),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"三十二-如何设置pycharm自定义的语言模板"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十二-如何设置pycharm自定义的语言模板"}},[s._v("#")]),s._v(" （三十二）"),e("strong",[e("code",[s._v("如何设置pycharm自定义的语言模板")])])]),s._v(" "),e("ul",[e("li",[s._v("在pycharm的设置中，搜索template")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(985),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("这样就可以在pycharm中设定不同语言的模板了")])]),s._v(" "),e("h3",{attrs:{id:"三十三-将所有的app的model都注册到xadmin中"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十三-将所有的app的model都注册到xadmin中"}},[s._v("#")]),s._v(" （三十三）"),e("strong",[e("code",[s._v("将所有的APP的model都注册到xadmin中")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("因为xadmin自动会将users的UserProfile这个model注册到xadmin中，那么现在我们只需要注册其他到model即可\n\n1：在所有的app底下创建一个adminx.py文件，那么xadmin后台会自动将adminx.py文件model注册到xadmin中， 注意不是xadmin.py， 如果命令为xadmin.py的话，在导入xadmin模块的时候，系统就以为是导入自己, 但是其实这个文件可以任意命名\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ul",[e("li",[s._v("在没有创建adminx.py文件文件之前后台是这样的")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(986),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("创建adminx.py文件文件之后，且注册了model到xadmin之后是这样的，这里"),e("code",[s._v("用户信息")]),s._v("、"),e("code",[s._v("邮箱验证吗")]),s._v("、"),e("code",[s._v("轮播图")]),s._v("，的名字是哪里来的呢，这样由于这个model的meta信息是中指定的")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('class Meta:\n    # 用来描述这张表\n    verbose_name = u"用户信息"  \n    verbose_name_plural = verbose_name # 如何不加这个，在后台就显示为 用户信息s 了\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("img",{attrs:{src:n(987),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("将一个app的一张表注册到后台管理系统中如何做呢？只需要四步就可以")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import xadmin  # 导入xadmin模块\nfrom .models import EmailVerifyRecord  # 导入需要注册的model\nclass EmailVerifyRecordAdmin(object):  # 创建model管理器\n    pass\nxadmin.site.register(EmailVerifyRecord, EmailVerifyRecordAdmin) # 将model注册到管理器中\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"三十四-在后台给表插入数据-以邮箱验证码为例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十四-在后台给表插入数据-以邮箱验证码为例"}},[s._v("#")]),s._v(" （三十四）"),e("strong",[e("code",[s._v("在后台给表插入数据，以邮箱验证码为例")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(988),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("这里会显示邮箱验证码的中文名称，是因为每一个字段都设置了中文名称"),e("strong",[s._v("verbose_name")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('code = models.CharField(max_length=20, verbose_name="验证码")\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"三十五-如何在过滤器中使用外键字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十五-如何在过滤器中使用外键字段"}},[s._v("#")]),s._v(" （三十五）"),e("strong",[e("code",[s._v("如何在过滤器中使用外键字段")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# TODO:将外键引用的name字段添加到过滤过滤中, 直接将字段名加上两个下划线引入名字即可\nlist_filter = ['course__name', 'name', 'add_time', ]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"三十六-如何让后台显示app的时候显示自定义的中文名称-而不是app本身的英文名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十六-如何让后台显示app的时候显示自定义的中文名称-而不是app本身的英文名"}},[s._v("#")]),s._v(" （三十六）"),e("strong",[e("code",[s._v("如何让后台显示app的时候显示自定义的中文名称，而不是app本身的英文名")])])]),s._v(" "),e("ul",[e("li",[s._v("设置之前是这样")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(517),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("修改每一个APP的"),e("code",[s._v("apps.py")]),s._v("文件和"),e("code",[s._v("__init__.py")]),s._v("文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# apps.py 文件\nclass UsersConfig(AppConfig):\n    name = \'users\'\n    verbose_name = u"用户信息"  # 在xadmin自定义的APP的中文名称\n\n# __init__.py 文件\ndefault_app_config = "users.apps.UsersConfig"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[s._v("修改之后是这样的")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(517),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"三十七-如何修改全局样式、主题样式-后台管理系统的标题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十七-如何修改全局样式、主题样式-后台管理系统的标题"}},[s._v("#")]),s._v(" （三十七）"),e("strong",[e("code",[s._v("如何修改全局样式、主题样式，后台管理系统的标题")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# 修改全局样式以及修改后台管理系统的标题\nclass GlobalSetting(object):\n    site_title = "Future视频教学管理系统"\n    site_footer = "Future视频教学管理系统"\n    menu_style = "accordion"  # 让后台APP的model自行折叠\n    \nxadmin.site.register(views.CommAdminView, GlobalSetting)\n\n# 修改主题样式\nclass BaseSetting(object):\n    enable_themes = True\n    use_bootswatch = True\n    \nxadmin.site.register(views.BaseAdminView, BaseSetting)\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("修改前是这样的")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(989),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("修改后是这样的")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(990),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"三十八-如何替换xadmin的字体图标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十八-如何替换xadmin的字体图标"}},[s._v("#")]),s._v(" （三十八）"),e("strong",[e("code",[s._v("如何替换xadmin的字体图标")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("在font awesome官网下载字体图标的css包，在xadmin中替换font-awesome的css和fonts。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:n(991),alt:"Alt text"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("在每一个app的adminx.py文件的model中加上 model_icon = 'fa fa-tablet'  这一行即可\n注意：有一些css的字体图标用引用不了，所有需要选择一下\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"三十九-在项目根目录下创建static目录-将前端准备好的css、images、img、js-拷贝到static目录中-这一块需要自己能够开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三十九-在项目根目录下创建static目录-将前端准备好的css、images、img、js-拷贝到static目录中-这一块需要自己能够开发"}},[s._v("#")]),s._v(" （三十九）"),e("strong",[e("code",[s._v("在项目根目录下创建static目录，将前端准备好的css、images、img、js 拷贝到static目录中（这一块需要自己能够开发）")])])]),s._v(" "),e("p",[e("img",{attrs:{src:n(992),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"四十-配置静态文件的查找路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十-配置静态文件的查找路径"}},[s._v("#")]),s._v(" （四十）"),e("strong",[e("code",[s._v("配置静态文件的查找路径")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("STATIC_URL = '/static/'\nSTATICFILES_DIRS = (os.path.join(BASE_DIR, \"static\"), )\n\n\nMEDIA_URL = '/media/'\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('为什么这么写，因为在html模板中引用css文件是这样引用的：下面是两种方式\n\n# 第一种是直接写死, html解析到/static/的时候就知道去STATICFILES_DIRS所指定的目录下寻找\n<link rel="stylesheet" type="text/css" href="/static/css/reset.css">\n\n# 第二种是通过Django的模板语法，{% static \'css/reset.css\' %} 等价于 /static/css/reset.css\n<link rel="stylesheet" type="text/css" href="{% static \'css/reset.css\' %}">\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"四十一-在django框架中显示第一个页面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十一-在django框架中显示第一个页面"}},[s._v("#")]),s._v(" （四十一）"),e("strong",[e("code",[s._v("在Django框架中显示第一个页面")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("from django.conf.urls import url\n\nimport xadmin\n# 导入TemplateView这个类\nfrom django.views.generic import TemplateView\n\nurlpatterns = [\n    url(r'^xadmin/', xadmin.site.urls),\n    # 直接可以渲染template目录中的index.html页面\n    url(r'^$', TemplateView.as_view(template_name='index.html'), name='index'),\n]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("ul",[e("li",[s._v("这样就会渲染index.html页面，都是里面的css,  js,  image需要修改下链接")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<link rel="stylesheet" type="text/css" href="{% static \'css/reset.css\' %}">\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("在index.html页面中加上")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<a style="color:white" class="fr loginbtn" href="/login/">登录</a>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("在页面中加入urls.py中加入，就可以点进登录按钮，跳转到登录页面")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("url(r'^login/$', TemplateView.as_view(template_name='login.html'), name='login'),\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"四十二-在views-py文件中-添加登录处理逻辑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十二-在views-py文件中-添加登录处理逻辑"}},[s._v("#")]),s._v(" （四十二）"),e("strong",[e("code",[s._v("在views.py文件中，添加登录处理逻辑")])])]),s._v(" "),e("ul",[e("li",[s._v("改写urls.py文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 当URL为login的时候，调用users.views中的login函数\nurl(r'^login/$', login, name='login'),\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("在views.py文件中添加处理逻辑")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("from django.shortcuts import render\nfrom django.contrib.auth import authenticate,login\n\n\ndef user_login(request):\n    if request.method == 'POST':\n        user_name = request.POST.get(\"username\", \"\")\n        pass_word = request.POST.get(\"password\", \"\")\n        # 这里的authenticate是验证后台传递的user_name，pass_word是否在数据库中，如果在数据库中，就会返回对应的Userprofile类的实例名称\n        user = authenticate(username=user_name, password=pass_word)\n        # 如果user有值，那么使用login函数，将这个user写入客户端的session中\n        if user:\n            login(request, user)\n            return render(request, 'index.html')\n    elif request.method == 'GET':\n        return render(request, 'login.html', {})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h3",{attrs:{id:"四十三-重载django的认证方式-实现自定义的用户名和邮箱验证"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十三-重载django的认证方式-实现自定义的用户名和邮箱验证"}},[s._v("#")]),s._v(" （四十三）"),e("strong",[e("code",[s._v("重载Django的认证方式，实现自定义的用户名和邮箱验证")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 在setting文件中加入\n# 这里让用户名和密码认证变为了 使用邮箱和用户名都可以认证， 最后需要重写这个class的认证方法\nAUTHENTICATION_BACKENDS = (\n    'users.views.CustomBackend',\n)\n\n\n# 在users的views.py中加入\n\nfrom django.shortcuts import render\nfrom django.contrib.auth import authenticate,login\nfrom django.contrib.auth.backends import ModelBackend\nfrom users.models import UserProfile\nfrom django.db.models import Q\n\n\n\n# 重写认证方法\nclass CustomBackend(ModelBackend):\n    def authenticate(self, username=None, password=None, **kwargs):\n        try:\n            # 通过用户传递进来的用户名或邮箱判断用户是否是注册用户, 这里引入的Django的或查询方式Q， 这样可以实现与和或运算的随意书写\n            user = UserProfile.objects.get(Q(username=username) | Q(email=username))\n            # 使用Django的密码认证机制，看用户的密码是否能够匹配\n            if user.check_password(password): # 如果匹配，把这个查询的用户return回去\n                return user\n            return None  # 匹配不了，返回None\n        except Exception as e:  # 如果查询异常，返回None\n            return None\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br")])]),e("ul",[e("li",[s._v("修改完毕之后，在使用邮箱+密码的方式登录，看看是否可以登录")])]),s._v(" "),e("h3",{attrs:{id:"四十四-使用django-fbv-function-base-views-方式编写后台逻辑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十四-使用django-fbv-function-base-views-方式编写后台逻辑"}},[s._v("#")]),s._v(" （四十四）"),e("strong",[e("code",[s._v("使用Django FBV（function base views）方式编写后台逻辑")])])]),s._v(" "),e("ul",[e("li",[s._v("在views.py里面编写")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("def user_login(request):\n    if request.method == 'POST':\n        user_name = request.POST.get(\"username\", \"\")\n        pass_word = request.POST.get(\"password\", \"\")\n        user = authenticate(username=user_name, password=pass_word)\n        if user:\n            login(request, user) # 给客户端写入session，\n            return render(request, 'index.html')\n        else:\n\t        # 这个msg变量可以传递到前端html中，显示错误提示\n            render(request, 'login.html', {'msg':'用户名或密码错误'})\n    elif request.method == 'GET':\n        return render(request, 'login.html', {})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("ul",[e("li",[s._v("在html中使用msg变量，作为错误提示")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('\x3c!-- 错误提示 --\x3e\n<div class="error btns login-form-tips" id="jsLoginTips">\n\t{{ msg }}\n</div>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"四十五-使用django-cbv-class-base-views-方式编写后台逻辑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十五-使用django-cbv-class-base-views-方式编写后台逻辑"}},[s._v("#")]),s._v(" （四十五）"),e("strong",[e("code",[s._v("使用Django CBV（class base views）方式编写后台逻辑")])])]),s._v(" "),e("ul",[e("li",[s._v("在views.py文件中")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# 之前都是使用的Django的 FBV（function base views），实现的后台逻辑\n# 现在开始修改后台逻辑为CBV的方式\n\n# 在views.py中编写如下内容：\n# 使用Django的内置view类处理展示逻辑\nfrom django.views.generic.base import View\n# 这里重写了get和post方法，只要是前端请求的是get方法，就会调用这里的get方法，请求的是post方法，就会调用这里的post方法\nclass LoginView(View):\n    def get(self, request):\n        return render(request, "login.html", {})\n\n    def post(self, request):\n        # 引入form对input的信息做验证\n        login_form = LoginForm(request.POST)\n        if login_form.is_valid(): # 如果填入的值合法，开始查询数据库\n\n            user_name = request.POST.get(\'username\', "")\n            pass_word = request.POST.get(\'password\', "")\n\n            user = authenticate(username=user_name, password=pass_word)\n\n            if user:  # 如果数据库匹配正确\n                if user.is_active: # 如果用户的账号是激活的\n                    # login()函数，功能是：当用户第一次登录成功，那么给django_session表中会添加一条session记录，且在浏览器端写入一个sessionID，将index.html渲染给用户，且渲染过程中会判断{% if request.user.is_authenticated %}, 如果是True，那么显示用户登录状态信息。当用户第二次访问首页的时候，会带着浏览器的sessionID，发起请求，Django的拦截器会查询数据库，看看是否有这个sessionID存在，如果有，直接显示用户的登录信息\n                    login(request, user) # 这里也是的如果用户没有登入的情况下，访问个人中心，自动跳转到登入页面\n                    return HttpResponseRedirect(reverse(\'index\'))\n                else:\n                    return render(request, "login.html", {"msg": "您还没有激活邮箱链接，请激活邮箱链接再登入"})\n            return render(request, "login.html", {"msg": "用户名或密码错误!"})\n        return render(request, "login.html", {"login_form": login_form})\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br")])]),e("ul",[e("li",[s._v("在urls.py文件中处理路由的时候，就需要修改之前的函数调用方式， 改为类调用的方式")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# from users.views import user_login\nfrom users.views import LoginView\n# url(r'^login/$', user_login, name='login'),\nurl(r'login/$', LoginView.as_view(), name='login')\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"四十六-使用django-的form最表单做验证"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十六-使用django-的form最表单做验证"}},[s._v("#")]),s._v(" （四十六）"),e("strong",[e("code",[s._v("使用Django 的Form最表单做验证")])])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("在users这个APP中，添加forms.py文件，用于对提交到后台的form表单的input框的内容做格式、长度等合法性验证，合法性验证通过之后，在查询数据库对比是否用户名和密码正确。Form合法性验证是Django自带的功能")])]),s._v(" "),e("li",[e("p",[s._v("这里的LoginForm类中，username的字段名称和password的字段名称，必须与HTML中的的input表单中的name属性的值一样**"),e("code",[s._v('<input name="username"/### <input name="password"/>')]),s._v("**，如果不一样，那么Form在验证的时候就会报错")])]),s._v(" "),e("li",[e("p",[s._v("Form验证的目的就是对前端传递的值做验证，"),e("code",[s._v("将验证返回的对象传递到前端页面显示，使用Django的模板语法，生成HTML代码")])])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("from django import forms\nfrom .models import UserProfile\n\n# 引入form做表单在数据库查询之前的验证\nclass LoginForm(forms.Form):\n    # 这两个验证属性的名称的名称，必须要与login.html中的input元素的name属性对应，这样才会使得form帮助我们自行验证\n    # required=True, min_length=6表示：input必须不为空，且最小字符为6个\n    username = forms.CharField(required=True, min_length=6)\n    password = forms.CharField(required=True, min_length=6)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("ul",[e("li",[s._v("修改views.py文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('from .forms import LoginForm  # 导入LoginForm类\n\nclass LoginView(View):\n    def get(self, request):\n        return render(request, "login.html", {})\n\n    def post(self, request):\n        # 引入form对input的信息做验证\n        login_form = LoginForm(request.POST)\n        if login_form.is_valid(): # 如果填入的值合法，开始查询数据库\n            user_name = request.POST.get(\'username\', "")\n            pass_word = request.POST.get(\'password\', "")\n\n            user = authenticate(username=user_name, password=pass_word)\n            if user:\n                if user.is_active:\n                    login(request, user)\n                    return HttpResponseRedirect(reverse(\'index\'))\n                else:\n                    return render(request, "login.html", {"msg": "您还没有激活邮箱链接，请激活邮箱链接再登入"})\n            return render(request, "login.html", {"msg": "用户名或密码错误!"})\n        return render(request, "login.html", {"login_form": login_form}) # 如果用户填写的登录信息没有成功通过合法性验证，直接把login_form对象返回给前端页面\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("ul",[e("li",[s._v("前端页面需要显示login_form返回的错误信息，提醒用户，那么就需要修改login.html文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# 这个div是高亮提示\n<div class="form-group marb20 {% if login_form.errors.username %} errorput {% endif %} "### ... </div>\n\n# 这个div是高亮提示\n<div class="form-group marb8 {% if login_form.errors.password %} errorput {% endif %} "### ... </div>\n\n# 这个div是显示错误信息\n<div class="error btns login-form-tips" id="jsLoginTips">\n\t{% for key, value in login_form.errors.items %}\n\t    {{ value }}\n    {% endfor %}\n    {{ msg }}\n</div>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("ul",[e("li",[s._v("form验证错误的提示效果是这样的")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(993),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"四十七-使用django-的login函数实现session保持的原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十七-使用django-的login函数实现session保持的原理"}},[s._v("#")]),s._v(" （四十七）"),e("strong",[e("code",[s._v("使用Django 的login函数实现session保持的原理")])])]),s._v(" "),e("ul",[e("li",[s._v("HTTP请求无状态")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(994),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("HTTP请求有状态（给浏览器写入sessionID, 无法跨越存储）")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(995),alt:"Alt text"}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(996),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("cookie 与 session的区别")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cookie机制：\n\t当用户第一次成功登录的时候，服务器端给浏览器写入一段cookie信息，cookie信息中保存了用户的用户名和密码等认证信息，当用户第二次登录的时候，浏览器就会携带用户的cookie信息进行登录。因此，这样就导致不安全，因为浏览器的cookie信息可能被盗用，使得用户的认证信息被泄露了\n\nsession机制：\n\t正是由于cookie验证机制的不安全性，因此session机制诞生了\n\tsession机制其实就是在cookie机制的基础之上，使得cookie的值为一段hash乱码，不再是以前的用户的认证信息了，当用户第一次请求的时候，首先会被settings文件中的'django.contrib.sessions' 这个APP 和 'django.contrib.sessions.middleware.SessionMiddleware'这个中间件所拦截，目的就是检查浏览器携带的sessionID的值是否与在django_session表中存在，如果存在那么取出sessionID在数据库中被加密的值，解密后，获得用户的登录信息，再从users.profile表中查询，如果查询到了，说明用户sessionID是合法的，那么在前端页面可以这样判断{% if request.user.is_authenticated %}，让页面显示用户已经登录的状态。如果浏览器没有携带用户的sessionID,或者与数据库中的sessionID不匹配，那么显示用户未登录状态。\n\t当用户第一次登录，点击登录按钮，会发起一个post请求到服务器端，如果登录成功，那么返回登录首页，同时，也会被settings文件中的'django.contrib.sessions' 这个APP 和 'django.contrib.sessions.middleware.SessionMiddleware'这个中间件所拦截，将用户的登录信息加密之后，写入django_session表中，然后返回一个sessionID对应的hash乱码给浏览器端。\n\t当用户第二次访问的时候，就会携带这个sessionID对应的hash乱码请求服务器，那么经过浏览器之后，就知道用户是合法用户还是非合法用户了\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("ul",[e("li",[s._v("浏览器的cookie值存储如下所示")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(997),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("django_session表中存储的cookie值如下所示")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(998),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"四十八-首页的注册功能实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十八-首页的注册功能实现"}},[s._v("#")]),s._v(" （四十八）"),e("strong",[e("code",[s._v("首页的注册功能实现")])])]),s._v(" "),e("ul",[e("li",[s._v("拷贝register.html到template目录, 将css、js等路径修改好, 将form表单的action的值改为/register/， 将index.html的注册的form表单的值也改为/register/")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# register.html\n<form id="email_register_form" method="post" action="{% url \'register\' %}" autocomplete="off">\n\n# index.html\n<a style="color:white" class="fr registerbtn" href="{% url \'register\' %}">注册</a>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("编写views.py文件，添加一个出来register的view")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("class RegisterView(View):\n    def get(self,request):\n        return render(request, template_name='register.html', context={})\n\n\n    def post(self,request):\n        pass\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[s._v("在urls.py文件里面添加路由处理逻辑")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("from users.views import LoginView, RegisterView\n\nurlpatterns = [\n    url(r'^xadmin/', xadmin.site.urls),\n    url(r'^$', TemplateView.as_view(template_name='index.html'), name='index'),\n    url(r'login/$', LoginView.as_view(), name='login'),\n    url(r'register/', RegisterView.as_view(), name='register'),\n]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"四十九-url命名空间与static命名空间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四十九-url命名空间与static命名空间"}},[s._v("#")]),s._v(" （四十九）"),e("strong",[e("code",[s._v("URL命名空间与static命名空间")])])]),s._v(" "),e("ul",[e("li",[s._v("之前在HTML页面中写URL和静态文件路径的时候，都是直接编写的，以后我们采用Django模板的语法编写")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如，以前写URL地址是这样写的")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("style")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"color:white"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("class")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fr registerbtn"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/register/"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("注册"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 现在改为这样，使用Django的语法")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("style")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"color:white"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("class")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fr registerbtn"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"{% url 'register' %}\"")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("注册"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为在urls.py文件中，给路由指定了一个register的名称空间， 那么{% url 'register' %}就等于/register/")]),s._v("\nurl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("r"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'register/'")]),s._v(", RegisterView.as_view"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'register'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("ul",[e("li",[s._v("static静态文件的路径也可以有类似写法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 先加上load staticfiles，才能使用这样的static语法, 这是因为在settings文件中，设置了 STATIC_URL = '/static/'， 那么{% static 'css/reset.css' %}就等于 /static/css/reset.css/\n{% load staticfiles %}\n\n<link rel=\"stylesheet\" type=\"text/css\" href=\"{% static 'css/reset.css' %}\">\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"五十-django处理图片验证码django-simple-captcha库介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五十-django处理图片验证码django-simple-captcha库介绍"}},[s._v("#")]),s._v(" （五十）"),e("strong",[e("code",[s._v("Django处理图片验证码django-simple-captcha库介绍")])])]),s._v(" "),e("ul",[e("li",[s._v("安装django-simple-captcha库")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 安装django-simple-captcha 0.4.6版本\npip install django-simple-captcha==0.4.6\n\n# 将captcha写入settings文件中，加入到INSTALL_APPS中，因为这个库会生成一些表， 用于存储验证码图片的路径地址\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'users',\n    'courses',\n    'organization',\n    'operation',\n    'xadmin',\n    'crispy_forms',\n    'captcha',  # 加入到这里\n]\n\n\n# 设置验证码图片的路由， 需要先导入include\nfrom django.conf.urls import url, include\n\nurlpatterns = [\n    url(r'^xadmin/', xadmin.site.urls),\n    url(r'^$', TemplateView.as_view(template_name='index.html'), name='index'),\n    url(r'login/$', LoginView.as_view(), name='login'),\n    url(r'register/', RegisterView.as_view(), name='register'),\n    url(r'^captcha/', include('captcha.urls')),  # 加在这里\n]\n\n# 使用pycharm运行migration\nmanage.py@Future_Edu ### makemigrations\nmanage.py@Future_Edu ### migrate\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br")])]),e("ul",[e("li",[s._v("修改views.py文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("class RegisterView(View):\n    def get(self,request):\n        register_form = RegisterForm()  # 这是实例化ForgetForm的目的在于在HTML页面中自动生成验证码图片\n        return render(request, template_name='register.html', context={'register_form':register_form})\n\n    def post(self,request):\n        pass\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[s._v("修改register.htm文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<div class="form-group marb8 captcha1 {% if login_form.errors.captcha %} errorput {% endif %} ">\n\t<label>验&nbsp;证&nbsp;码</label>\n    \x3c!-- 使用captcha渲染出带验证码的HTML --\x3e\n    {{ register_form.captcha }}\n</div>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("这里的 register_form.captcha 会生成如下HTML代码")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<img src="/captcha/image/d2939093784107ac4a0392b0ddbb0ec3f04ffdbf/" alt="captcha" class="captcha">\n<input id="id_captcha_0" name="captcha_0" type="hidden" value="d2939093784107ac4a0392b0ddbb0ec3f04ffdbf">\n<input autocomplete="off" id="id_captcha_1" name="captcha_1" type="text">\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ul",[e("li",[s._v("在MySQL的captcha_captchastore 表中会生成如下记录, 这样用户form表达提交上来的验证码就可以与数据库中的验证码一一比对，比对成功，说明验证通过_")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(999),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("那么现在在访问注册页面是可以看到验证码图片的")])]),s._v(" "),e("p",[e("img",{attrs:{src:n(1e3),alt:"Alt text"}})])])}),[],!1,null,null,null);a.default=t.exports},517:function(s,a,n){s.exports=n.p+"assets/img/2018-08-029.28.57.8eec9066.png"},973:function(s,a,n){s.exports=n.p+"assets/img/2018-07-052.59.54.c628173d.png"},974:function(s,a,n){s.exports=n.p+"assets/img/ScreenShot_20180708140437.660a03cc.png"},975:function(s,a,n){s.exports=n.p+"assets/img/django.889beb42.png"},976:function(s,a,n){s.exports=n.p+"assets/img/django.contrib.c59821f7.jpg"},977:function(s,a,n){s.exports=n.p+"assets/img/xhyy.bb838553.png"},978:function(s,a,n){s.exports=n.p+"assets/img/fengceng.bf32b7e8.png"},979:function(s,a,n){s.exports=n.p+"assets/img/2018-07-255.39.49.89e5bc93.png"},980:function(s,a,n){s.exports=n.p+"assets/img/2018-07-283.27.22.69779e74.png"},981:function(s,a,n){s.exports=n.p+"assets/img/2018-07-283.29.02.fa6db50a.png"},982:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0110.20.02.65e31e62.png"},983:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0110.39.27.cf17cabd.png"},984:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0211.55.30.e71be137.png"},985:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0212.14.54.09112887.png"},986:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0212.30.37.c39e0719.png"},987:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0212.45.48.cb9e47bc.png"},988:function(s,a,n){s.exports=n.p+"assets/img/2018-08-021.02.02.4bac13cb.png"},989:function(s,a,n){s.exports=n.p+"assets/img/2018-08-032.53.42.0182316a.png"},990:function(s,a,n){s.exports=n.p+"assets/img/2018-08-032.57.15.56c2da55.png"},991:function(s,a,n){s.exports=n.p+"assets/img/2018-08-043.07.30.844c226f.png"},992:function(s,a){s.exports="data:image/png;base64,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"},993:function(s,a,n){s.exports=n.p+"assets/img/2018-08-079.49.45.9fc636e5.png"},994:function(s,a,n){s.exports=n.p+"assets/img/ScreenShot_20180807220145.1ac5edee.png"},995:function(s,a,n){s.exports=n.p+"assets/img/ScreenShot_20180807220724.c529a5cc.png"},996:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0710.08.33.e073442e.png"},997:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0711.16.18.9a59dcf3.png"},998:function(s,a,n){s.exports=n.p+"assets/img/2018-08-0711.16.35.2eb69c2a.png"},999:function(s,a,n){s.exports=n.p+"assets/img/2018-08-096.54.45.2ea1529c.png"}}]);