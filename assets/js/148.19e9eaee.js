(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{2321:function(s,e,a){"use strict";a.r(e);var i=a(9),l=Object(i.a)({},(function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[i("h2",{attrs:{id:"一-modelserializer"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#一-modelserializer"}},[s._v("#")]),s._v(" 一：ModelSerializer")]),s._v(" "),i("h3",{attrs:{id:"一-使用serializers-modelserializer"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#一-使用serializers-modelserializer"}},[s._v("#")]),s._v(" （一）：使用serializers.ModelSerializer")]),s._v(" "),i("ul",[i("li",[s._v("概念")])]),s._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[s._v("使用Django中的serializers.ModelSerializer替换serializers.Serializer， 让代码更加简洁，SchoolSerializer继承serializers.ModelSerializer\n")])]),s._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[s._v("1")]),i("br")])]),i("ul",[i("li",[s._v("修改SchoolSerializer")])]),s._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[s._v("class SchoolSerializer(serializers.ModelSerializer):\n    # 指定需要序列化的Model，和Model中的字段\n    class Meta:\n        model = School\n        fields = ('name', 'desc', 'location', 'create_time', 'course_numbers')\n\n\t\t# 或者序列化所有的字段\n\t\tfields = '__all__'\n\n    def create(self, validated_data):\n        \"\"\"\n        Create and return a new `Snippet` instance, given the validated data.\n        \"\"\"\n        return School.objects.create(**validated_data)\n")])]),s._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[s._v("1")]),i("br"),i("span",{staticClass:"line-number"},[s._v("2")]),i("br"),i("span",{staticClass:"line-number"},[s._v("3")]),i("br"),i("span",{staticClass:"line-number"},[s._v("4")]),i("br"),i("span",{staticClass:"line-number"},[s._v("5")]),i("br"),i("span",{staticClass:"line-number"},[s._v("6")]),i("br"),i("span",{staticClass:"line-number"},[s._v("7")]),i("br"),i("span",{staticClass:"line-number"},[s._v("8")]),i("br"),i("span",{staticClass:"line-number"},[s._v("9")]),i("br"),i("span",{staticClass:"line-number"},[s._v("10")]),i("br"),i("span",{staticClass:"line-number"},[s._v("11")]),i("br"),i("span",{staticClass:"line-number"},[s._v("12")]),i("br"),i("span",{staticClass:"line-number"},[s._v("13")]),i("br"),i("span",{staticClass:"line-number"},[s._v("14")]),i("br")])]),i("ul",[i("li",[s._v("访问效果")])]),s._v(" "),i("p",[i("img",{attrs:{src:a(901),alt:"Alt text"}})]),s._v(" "),i("h3",{attrs:{id:"二-使用mixins-listmodelmixin"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#二-使用mixins-listmodelmixin"}},[s._v("#")]),s._v(" （二）：使用mixins.ListModelMixin")]),s._v(" "),i("ul",[i("li",[s._v("介绍")])]),s._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[s._v("mixins可以实现功能增强，DRF库中有很多功能增强的mixin\n")])]),s._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[s._v("1")]),i("br")])]),i("ul",[i("li",[s._v("编辑views.py文件, 重写AllSchoolsView")])]),s._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[s._v('class AllSchoolsView(mixins.ListModelMixin,generics.GenericAPIView ):\n    """\n    这是AllSchoolsView的返回结果\n    """\n    # queryset、serializer_class是固定的\n    queryset = School.objects.all()\n    serializer_class = SchoolSerializer\n\n    def get(self, request, *args, **kwargs):\n        return self.list(request, *args, **kwargs)\n')])]),s._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[s._v("1")]),i("br"),i("span",{staticClass:"line-number"},[s._v("2")]),i("br"),i("span",{staticClass:"line-number"},[s._v("3")]),i("br"),i("span",{staticClass:"line-number"},[s._v("4")]),i("br"),i("span",{staticClass:"line-number"},[s._v("5")]),i("br"),i("span",{staticClass:"line-number"},[s._v("6")]),i("br"),i("span",{staticClass:"line-number"},[s._v("7")]),i("br"),i("span",{staticClass:"line-number"},[s._v("8")]),i("br"),i("span",{staticClass:"line-number"},[s._v("9")]),i("br"),i("span",{staticClass:"line-number"},[s._v("10")]),i("br")])]),i("ul",[i("li",[s._v("访问接口的效果")])]),s._v(" "),i("p",[i("img",{attrs:{src:a(902),alt:"Alt text"}})]),s._v(" "),i("h3",{attrs:{id:"三-使用使用generics-listapiview简化allschoolsview"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#三-使用使用generics-listapiview简化allschoolsview"}},[s._v("#")]),s._v(" （三）：使用使用generics.ListAPIView简化AllSchoolsView")]),s._v(" "),i("ul",[i("li",[s._v("查看ListAPIView的继承关系")])]),s._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[s._v("class ListAPIView(mixins.ListModelMixin, GenericAPIView):\n")])]),s._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[s._v("1")]),i("br")])]),i("ul",[i("li",[s._v("修改AllSchoolsView的继承关系")])]),s._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[s._v('class AllSchoolsView(generics.ListAPIView):\n    """\n    这是AllSchoolsView的返回结果\n    """\n    # queryset、serializer_class是固定的\n    queryset = School.objects.all()\n    serializer_class = SchoolSerializer\n\n    def get(self, request, *args, **kwargs):\n        return self.list(request, *args, **kwargs)\n')])]),s._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[s._v("1")]),i("br"),i("span",{staticClass:"line-number"},[s._v("2")]),i("br"),i("span",{staticClass:"line-number"},[s._v("3")]),i("br"),i("span",{staticClass:"line-number"},[s._v("4")]),i("br"),i("span",{staticClass:"line-number"},[s._v("5")]),i("br"),i("span",{staticClass:"line-number"},[s._v("6")]),i("br"),i("span",{staticClass:"line-number"},[s._v("7")]),i("br"),i("span",{staticClass:"line-number"},[s._v("8")]),i("br"),i("span",{staticClass:"line-number"},[s._v("9")]),i("br"),i("span",{staticClass:"line-number"},[s._v("10")]),i("br")])]),i("ul",[i("li",[s._v("效果如下")])]),s._v(" "),i("p",[i("img",{attrs:{src:a(903),alt:"Alt text"}})]),s._v(" "),i("ul",[i("li",[s._v("在rest_framework库下的generics.py中有很多封装好的View")])]),s._v(" "),i("div",{staticClass:"language- line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[s._v("这里的规律是：Create表示添加，Retrieve表示操作一条数据，List表示操作多条数据，Destroy表示删除，Update表示更新\n\nListCreateAPIView：用于post提交之后添加多条数据\nRetrieveAPIView：用于返回一条数据\nListAPIView：用于返回一个表的数据，或多条数据\nCreateAPIView：添加一条数据\n")])]),s._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[s._v("1")]),i("br"),i("span",{staticClass:"line-number"},[s._v("2")]),i("br"),i("span",{staticClass:"line-number"},[s._v("3")]),i("br"),i("span",{staticClass:"line-number"},[s._v("4")]),i("br"),i("span",{staticClass:"line-number"},[s._v("5")]),i("br"),i("span",{staticClass:"line-number"},[s._v("6")]),i("br")])])])}),[],!1,null,null,null);e.default=l.exports},901:function(s,e,a){s.exports=a.p+"assets/img/2019-03-232.24.43.cf3ba784.png"},902:function(s,e,a){s.exports=a.p+"assets/img/2019-03-233.03.00.fd603595.png"},903:function(s,e,a){s.exports=a.p+"assets/img/2019-03-233.07.49.e97f644e.png"}}]);