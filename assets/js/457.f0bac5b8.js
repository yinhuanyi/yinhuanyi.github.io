(window.webpackJsonp=window.webpackJsonp||[]).push([[457],{2377:function(s,e,t){"use strict";t.r(e);var n=t(9),a=Object(n.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一-requests第三方库在测试中的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-requests第三方库在测试中的使用"}},[s._v("#")]),s._v(" 一：requests第三方库在测试中的使用")]),s._v(" "),t("h3",{attrs:{id:"一-requests库介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-requests库介绍"}},[s._v("#")]),s._v(" （一）：requests库介绍")]),s._v(" "),t("ul",[t("li",[s._v("文档链接")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("官方文档：http://www.python-requests.org/en/master/\n\n第三方中文文档：http://docs.python-requests.org/zh_CN/latest/user/quickstart.html\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("安装 requests")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pip install requests\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"二-使用requests发送get请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-使用requests发送get请求"}},[s._v("#")]),s._v(" （二）：使用requests发送get请求")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import requests\nfrom requests.cookies import RequestsCookieJar\n\nr1 = requests.get('https://api.github.com/events')\n# 携带请求参数\nr2 = requests.get('https://www.baidu.com', params={'wd': 'requests'})\nr3 = requests.get('https://www.baidu.com', params={'wd': 'requests', 'wd1': ['requests', 'requests']})\n# 设置响应头\nr4 = requests.get('https://www.baidu.com', headers = {'user-agent': 'my-app/0.0.1'})\n# 带cookie请求\njar = RequestsCookieJar()\njar.set('tasty_cookie', 'yum', domain='httpbin.org', path='/cookies')\nr5 = requests.get('https://www.baidu.com', headers = {'user-agent': 'my-app/0.0.1'}, cookies=jar)\n# 带超时时间的请求\nr6 = requests.get('http://github.com', timeout=10)\n\n\n\n\n# 拿到当前请求的url\nprint(r2.url)\nprint(r3.url)\n\n# 拿到请求的返回结果字符串\nprint(r1.text)\n\n# 拿到字典结果\nprint(r1.json())\n\n# 拿到编码方式\nprint(r1.encoding)\n\n# 拿到状态码\nprint(r1.status_code)\n\n# 拿到响应头\nprint(r1.headers)\n\n\nprint(r1.cookies)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br")])]),t("h3",{attrs:{id:"三-使用requests发送post请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-使用requests发送post请求"}},[s._v("#")]),s._v(" （三）：使用requests发送post请求")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 默认的post请求的Content-Type是application/x-www-form-urlencoded\npayload = {'key1': 'value1', 'key2': 'value2'}\nr = requests.post(\"http://httpbin.org/post\", data=payload )\nprint(r.text)\n\n\n# post一个(Multipart-Encoded)的文件\nfiles = {'file': open('test.txt', 'rb')}\nr = requests.post(\"http://httpbin.org/post\", files=files)\nprint(r.text)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"四-设置timeout时长"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-设置timeout时长"}},[s._v("#")]),s._v(" （四）：设置timeout时长")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("requests.get('http://github.com', timeout=0.001)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"五-向后台提交文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五-向后台提交文件"}},[s._v("#")]),s._v(" （五）：向后台提交文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("url = 'http://httpbin.org/post'\nfiles = {'file': open('report.xls', 'rb')}\nr = requests.post(url, files=files)\nprint(r.text)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"六-使用cookie获取登录豆瓣官网之后的信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六-使用cookie获取登录豆瓣官网之后的信息"}},[s._v("#")]),s._v(" （六）：使用cookie获取登录豆瓣官网之后的信息")]),s._v(" "),t("ul",[t("li",[s._v("获取cookie")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from requests.sessions import Session\n\n\n# 返回一个会话的上下文管理器对象\nrequests = Session()\n\nheaders = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'}\ndate = {'ck':'', 'name':'xxxxxxxx', 'password': 'xxxxxxxx', 'remember':'false', 'ticket': ''}\nresult = requests.post('https://accounts.douban.com/j/mobile/login/basic', data=date, headers=headers)\n\n\nprint(result.text)\n\n# 拿到cookie\ncookies = result.cookies\n\nfor i in cookies:\n    print(i)\n    \nfor item in cookies.iteritems():\n    print(item)\n\n\nprint(cookies.get_dict())\nprint(cookies.list_paths())\nprint(cookies.list_domains())\nprint(cookies.items())\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("ul",[t("li",[s._v("获取使用cookie请求登录页面")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from requests.cookies import RequestsCookieJar\n\njar = RequestsCookieJar()\njar.set('bid', 'OvpnenMUNWo', domain='.douban.com', path='/')\njar.set('dbcl2', r'\"153039786:aYRnqJukECk\"', domain='.douban.com', path='/')\n\nr = requests.get('https://www.douban.com/', cookies=jar)\nprint(r.text)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);e.default=a.exports}}]);