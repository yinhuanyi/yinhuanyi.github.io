(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{2318:function(s,n,e){"use strict";e.r(n);var a=e(9),r=Object(a.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"一-django路由处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-django路由处理"}},[s._v("#")]),s._v(" 一：Django路由处理")]),s._v(" "),a("h3",{attrs:{id:"一-django-urls-py文件的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-django-urls-py文件的作用"}},[s._v("#")]),s._v(" (一)：Django urls.py文件的作用")]),s._v(" "),a("p",[a("img",{attrs:{src:e(899),alt:"Alt text"}})]),s._v(" "),a("ul",[a("li",[s._v("urls.py文件介绍")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1: Django项目启动后根据settings文件中的ROOT_URLCONF决定根URLconf\nROOT_URLCONF = 'New_Project.urls'\n\n2： Django会依次匹配每个URL的pattern，在与请求的URL匹配到的第一个pattern停止匹配，并调用视图，视图应该是一个Python的可调用对象或一个类视图\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"二-编写一个路由处理的函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-编写一个路由处理的函数"}},[s._v("#")]),s._v(" (二)：编写一个路由处理的函数")]),s._v(" "),a("ul",[a("li",[s._v("1: 在urls.py文件中的urlpatterns列表中加入url pattern")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("url(r'^$', index, name='index'),\nurl(r'^login/', login, name='login'),\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("2: 在users的APP中的view.py文件中写入index，login两个函数用来处理用户的请求")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("from django.shortcuts import render\n\ndef index(request):\n    if request.method == 'POST':\n        pass\n    else:\n        return render(request=request, template_name='index.html', context=None, content_type=None, status=None, using=None)\n\ndef login(request):\n    if request.method == 'POST':\n        pass\n    else:\n        return render(request=request, template_name='login.html', context=None, content_type=None, status=None, using=None)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("启动Django，且在浏览器访问(Django的HTTP的socket监听在127.0.0.1:8000)")])]),s._v(" "),a("li",[a("p",[s._v("访问 http://127.0.0.1:8000")])]),s._v(" "),a("li",[a("p",[s._v("访问 http://127.0.0.1:8000/login")])])]),s._v(" "),a("p",[a("img",{attrs:{src:e(900),alt:"Alt text"}})]),s._v(" "),a("h3",{attrs:{id:"三-urlpatterns列表中加入url-pattern详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-urlpatterns列表中加入url-pattern详解"}},[s._v("#")]),s._v(" (三)：urlpatterns列表中加入url pattern详解")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1: 每个pattern前的'r'是可选的，但是建议加上，表明正在正则表达式中不允许转义\n2: 每个pattern前不需要加反斜线，不是r'^/login/', 而是r'^login/'\n3: 每个pattern前建议加上^, 表示以什么开头\nurl(r'^login/', login, name='login'),\n4: pattern也可以使用正则表达式的分组，将url的关键信息捕获，作为参数传递给可调用的函数处理\nurl(r'^blog/(.*)/([0-9]{,3})', blog, name='login'), \n那么login函数可以这样写\nblog(request, user, blog_id): pass\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"四-django的多级路由处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四-django的多级路由处理"}},[s._v("#")]),s._v(" (四)：Django的多级路由处理")]),s._v(" "),a("ul",[a("li",[s._v("Django的多级路由")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1：在urls.py文件中，调用django.conf.urls.url函数处理一级路由，将路由处理过程转到对应的APP去处理，二级路由才是处理的用户请求的过程\nurl(r'^users/', include('users.urls', namespace=\"users\")),\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("编写一个二级路由处理过程")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1: 在urls.py文件中，加入如下url路由配置，表示：如果一级路由是users,那么直接交由users APP的urls模块处理\nurl(r'^users/', include('users.urls', namespace='users')),\n\n2: 在users APP中创建一个urls.py文件，用来处理关于users的二级路由\nfrom django.conf.urls import url\nfrom .views import login\nurlpatterns = [\n    url(r'^login/$', login, name=\"users\"),\n]\n\n3：当用户的请求是http://127.0.0.1:8000/users/login/，这个HTTP请求将会被users APP中的路由规则处理\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("Django中的url反向解析")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("在include函数和url函数中使用namespace和name的目的就是可以通过名称对url进行反向解析\n\n\t1：在Django模板或Jinja模板中使用模板语法\n\t2：在Python代码中使用django.core.urlresolvers.reverse()函数反向解析\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"五-异常请求或服务器异常默认处理的url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五-异常请求或服务器异常默认处理的url"}},[s._v("#")]),s._v(" (五)：异常请求或服务器异常默认处理的url")]),s._v(" "),a("ul",[a("li",[s._v("当Django找不到匹配请求的URL的正则表达式时，或者当抛出一个服务器内部异常时，Django 将调用错误处理视图")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1: 在django.conf.urls.__init__.py模块中，定义了四种常见错误的调用规则\nhandler400 = 'django.views.defaults.bad_request'\nhandler403 = 'django.views.defaults.permission_denied'\nhandler404 = 'django.views.defaults.page_not_found'\nhandler500 = 'django.views.defaults.server_error'\n\n2: 在django.views.defaults.py模块里面\nhandler400 = 'django.views.defaults.bad_request'\nhandler403 = 'django.views.defaults.permission_denied'\nhandler404 = 'django.views.defaults.page_not_found'\nhandler500 = 'django.views.defaults.server_error'\n\n400错误，会调用django.views.defaults.bad_request()函数处理用户请求\n403错误，会调用django.views.defaults.permission_denied()函数处理用户请求\n404错误，会调用django.views.defaults.page_not_found()函数处理用户请求\n500错误，会调用django.views.defaults.server_error()函数处理用户请求\n\n3: 这四个函数的默认模板如下，也就是在templates模板目录下，找寻这四个HTML页面渲染后响应请求\nERROR_404_TEMPLATE_NAME = '404.html'\nERROR_403_TEMPLATE_NAME = '403.html'\nERROR_400_TEMPLATE_NAME = '400.html'\nERROR_500_TEMPLATE_NAME = '500.html'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ul",[a("li",[s._v("也可以自定义错误处理view")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("在urls.py中定义，错误处理的view\nhandler400 = 'users.views.bad_request'\nhandler403 = 'users.views.permission_denied'\nhandler404 = \"users.views.page_not_found\"\nhandler500 = \"users.views.server_error\"\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("自定义错误页面的要求")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1：在跟urls.py文件中，定义处理的函数\nhandler404 = 'users.views.handler_404'\n\n2：编写handler_404函数，函数名称可以自定义\ndef handler_404(request):\n    from django.shortcuts import render_to_response\n    response = render_to_response('404.html')\n    response.status_code = 404\n    return response\n\n3：在settings文件中设置\nDEBUG = False\nALLOWED_HOSTS = ['*']\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])])])}),[],!1,null,null,null);n.default=r.exports},899:function(s,n,e){s.exports=e.p+"assets/img/q.fcc2f352.png"},900:function(s,n,e){s.exports=e.p+"assets/img/2019-03-0310.45.16.59056bb8.png"}}]);