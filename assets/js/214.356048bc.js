(window.webpackJsonp=window.webpackJsonp||[]).push([[214],{1677:function(s,a,t){s.exports=t.p+"assets/img/2021-10-262.59.42.7e730893.png"},1678:function(s,a,t){s.exports=t.p+"assets/img/2021-10-263.24.08.19b7c6e8.png"},2636:function(s,a,t){"use strict";t.r(a);var r=t(9),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h3",{attrs:{id:"一-redis的架构演变"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-redis的架构演变"}},[s._v("#")]),s._v(" 一：Redis的架构演变")]),s._v(" "),r("h3",{attrs:{id:"一-架构演变"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-架构演变"}},[s._v("#")]),s._v(" (一)：架构演变")]),s._v(" "),r("ul",[r("li",[s._v("虽然Redis单节点性能很强，但是需要解决单点故障问题")]),s._v(" "),r("li",[s._v("引入主从模式，但是当出现节点故障的时候需要人为干预")]),s._v(" "),r("li",[s._v("引入哨兵模式，但是依然无法解决存储压力过大的问题，主节点的写压力依然过大")]),s._v(" "),r("li",[s._v("引入集群模式，解决存储压力过大问题")])]),s._v(" "),r("h3",{attrs:{id:"二-集群模式搭建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-集群模式搭建"}},[s._v("#")]),s._v(" (二)：集群模式搭建")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("集群最少需要3个主节点，3个从节点，也就是最少6个节点")])]),s._v(" "),r("li",[r("p",[s._v("集群的优点")])])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：去中心化\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：可扩展性\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：高可用性\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("：自动故障转移\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("ul",[r("li",[s._v("集群的缺点")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：数据通过异步复制，无法保证数据强一致性\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：集群环境搭建稍微复杂\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("h3",{attrs:{id:"三-redis的数据分区"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-redis的数据分区"}},[s._v("#")]),s._v(" (三)：Redis的数据分区")]),s._v(" "),r("ul",[r("li",[s._v("数据分区的优点")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：增强可用性\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：均衡i"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("o\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：改善查询性能\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("常见的分区算法")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：范围分区\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：节点取余分区\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：哈希一致性分区：当节点比较少的情况下，哈希一致性算法容易造成缓存穿透，只有节点较多情况下，适合使用哈希一致性算法\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("：虚拟槽分区：Redis cluster使用这种分区算法，虚拟槽算法更加精确\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("ul",[r("li",[s._v("虚拟槽分区")])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1677),alt:"Alt text"}})]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("slot槽：当Redis增加或减少节点的时候，不会影响其他节点存储的数据\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"二-redis集群的搭建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-redis集群的搭建"}},[s._v("#")]),s._v(" 二：Redis集群的搭建")]),s._v(" "),r("h3",{attrs:{id:"一-6节点架构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-6节点架构"}},[s._v("#")]),s._v(" (一)：6节点架构")]),s._v(" "),r("ul",[r("li",[s._v("准备三个节点(192.168.10.101，192.168.10.102，192.168.10.103)，初始化集群的时候，会初始化3个master和3个slave节点。但是不一定每个物理节点中有一个master和一个slave，可能是两个master，或者两个slave，因为Redis cluster是自动初始化的")])]),s._v(" "),r("h3",{attrs:{id:"二-第一台物理节点192-168-10-101-redis节点的配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-第一台物理节点192-168-10-101-redis节点的配置"}},[s._v("#")]),s._v(" (二)：第一台物理节点192.168.10.101，Redis节点的配置")]),s._v(" "),r("ul",[r("li",[s._v("redis-6371.conf配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("bind "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nport "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v("\ndaemonize yes\nlogfile "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/redis/log/sentinel.log"')]),s._v("\ndbfinename dump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371.")]),s._v("rdb\nappendonly yes\nappendfilename "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\ndir "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 密码")]),s._v("\nrequirepass "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从节点访问主节点密码")]),s._v("\nmasterauth "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否开启集群模式")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled yes \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点信息文件，会保存在dir配置对应目录下")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file nodes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371.")]),s._v("conf \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点连续超时时间")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点IP")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点总线端口：节点之间通信的端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bus"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16371")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br")])]),r("ul",[r("li",[s._v("redis-6372.conf配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("bind "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nport "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372")]),s._v("\ndaemonize yes\nlogfile "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/redis/log/sentinel.log"')]),s._v("\ndbfinename dump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372.")]),s._v("rdb\nappendonly yes\nappendfilename "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\ndir "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 密码")]),s._v("\nrequirepass "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从节点访问主节点密码")]),s._v("\nmasterauth "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否开启集群模式")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled yes \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点信息文件，会保存在dir配置对应目录下")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file nodes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372.")]),s._v("conf \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点连续超时时间")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点IP")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点总线端口：节点之间通信的端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bus"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16372")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br")])]),r("h3",{attrs:{id:"三-第二台物理节点192-168-10-102-redis节点的配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-第二台物理节点192-168-10-102-redis节点的配置"}},[s._v("#")]),s._v(" (三)：第二台物理节点192.168.10.102，Redis节点的配置")]),s._v(" "),r("ul",[r("li",[s._v("redis-6373.conf配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("bind "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nport "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373")]),s._v("\ndaemonize yes\nlogfile "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/redis/log/sentinel.log"')]),s._v("\ndbfinename dump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373.")]),s._v("rdb\nappendonly yes\nappendfilename "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\ndir "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 密码")]),s._v("\nrequirepass "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从节点访问主节点密码")]),s._v("\nmasterauth "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否开启集群模式")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled yes \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点信息文件，会保存在dir配置对应目录下")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file nodes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373.")]),s._v("conf \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点连续超时时间")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点IP")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".102")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点总线端口：节点之间通信的端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bus"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16373")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br")])]),r("ul",[r("li",[s._v("redis-6374.conf配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("bind "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nport "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6374")]),s._v("\ndaemonize yes\nlogfile "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/redis/log/sentinel.log"')]),s._v("\ndbfinename dump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6374.")]),s._v("rdb\nappendonly yes\nappendfilename "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\ndir "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 密码")]),s._v("\nrequirepass "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从节点访问主节点密码")]),s._v("\nmasterauth "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否开启集群模式")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled yes \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点信息文件，会保存在dir配置对应目录下")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file nodes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6374.")]),s._v("conf \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点连续超时时间")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点IP")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".102")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6374")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点总线端口：节点之间通信的端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bus"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16374")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br")])]),r("h3",{attrs:{id:"四-第三台物理节点192-168-10-103-redis节点的配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四-第三台物理节点192-168-10-103-redis节点的配置"}},[s._v("#")]),s._v(" (四)：第三台物理节点192.168.10.103，Redis节点的配置")]),s._v(" "),r("ul",[r("li",[s._v("redis-6375.conf配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("bind "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nport "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375")]),s._v("\ndaemonize yes\nlogfile "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/redis/log/sentinel.log"')]),s._v("\ndbfinename dump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375.")]),s._v("rdb\nappendonly yes\nappendfilename "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\ndir "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 密码")]),s._v("\nrequirepass "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从节点访问主节点密码")]),s._v("\nmasterauth "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否开启集群模式")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled yes \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点信息文件，会保存在dir配置对应目录下")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file nodes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375.")]),s._v("conf \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点连续超时时间")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点IP")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".103")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点总线端口：节点之间通信的端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bus"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16375")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br")])]),r("ul",[r("li",[s._v("redis-6376.conf配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("bind "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nport "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376")]),s._v("\ndaemonize yes\nlogfile "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/redis/log/sentinel.log"')]),s._v("\ndbfinename dump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376.")]),s._v("rdb\nappendonly yes\nappendfilename "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\ndir "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 密码")]),s._v("\nrequirepass "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从节点访问主节点密码")]),s._v("\nmasterauth "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否开启集群模式")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled yes \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点信息文件，会保存在dir配置对应目录下")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file nodes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376.")]),s._v("conf \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点连续超时时间")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("15000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点IP")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ip "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".103")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群节点总线端口：节点之间通信的端口")]),s._v("\ncluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("announce"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bus"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("port "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16376")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br")])]),r("h3",{attrs:{id:"五-分别启动这六个节点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#五-分别启动这六个节点"}},[s._v("#")]),s._v(" (五)：分别启动这六个节点")]),s._v(" "),r("ul",[r("li",[s._v("启动命令")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371.")]),s._v("conf\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372.")]),s._v("conf\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376.")]),s._v("conf\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("检查一下Redis是否是集群模式启动")])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1678),alt:"Alt text"}})]),s._v(" "),r("ul",[r("li",[s._v("当6个节点都启动后，开始创建集群")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// --cluster-replicas 1 表示主从比例为1:1")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster create "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6374")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("replicas "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("ul",[r("li",[r("p",[s._v("Redis Cluster一共会有16383个slot，会平均分配至3个主节点上，从节点没有slot")])]),s._v(" "),r("li",[r("p",[s._v("连接到集群")])])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -c 表示连接到集群")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("h3",{attrs:{id:"六-redis-cluster没有数据库的概念-只有slot的概念"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#六-redis-cluster没有数据库的概念-只有slot的概念"}},[s._v("#")]),s._v(" (六)：Redis Cluster没有数据库的概念，只有slot的概念")]),s._v(" "),r("ul",[r("li",[s._v("Redis的单机版有16个数据库，但是Redis Cluster没有数据库概念，只有16384个slot")])]),s._v(" "),r("h3",{attrs:{id:"三-redis集群节点的管理和集群迁移"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-redis集群节点的管理和集群迁移"}},[s._v("#")]),s._v(" 三：Redis集群节点的管理和集群迁移")]),s._v(" "),r("h3",{attrs:{id:"一-给集群添加一个master节点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-给集群添加一个master节点"}},[s._v("#")]),s._v(" (一)：给集群添加一个master节点")]),s._v(" "),r("ul",[r("li",[s._v("在物理机(192.168.10.3)添加一个6377端口的节点，此节点以集群模式启动")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 以集群模式启动")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6377.")]),s._v("conf\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("但是此时节点还没有加入到集群中，直接将新节点加入集群中")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.3:6377 是新节点的IP和端口")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.3:6375 是最后一个slot所在的主节点的IP和端口")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3323de8cjasdf74620fdksdfd88874 是最后一个slot所在的主节点id")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster add"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6377")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("master"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("id "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3323")]),s._v("de8cjasdf74620fdksdfd88874\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("ul",[r("li",[s._v("给新节点分配slot")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.1:6371 是集群中任意的节点")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// dsfhaasdfjasdf78287sh 这个是需要分配slot的主节点的master_id")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 73473hdfisbdifsdf 表示新节点的master_id")]),s._v("\n\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster reshard "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("from dsfhaasdfjasdf78287sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("to "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("73473")]),s._v("hdfisbdifsdf "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slots "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("yes\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("h3",{attrs:{id:"二-给新的master节点添加从节点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-给新的master节点添加从节点"}},[s._v("#")]),s._v(" (二)：给新的master节点添加从节点")]),s._v(" "),r("ul",[r("li",[s._v("同样也需要以cluster模式启动一个Redis节点，假设端口为6378")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 以集群模式启动")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6378.")]),s._v("conf\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("让6378端口的节点作为6377节点的slave节点，添加到cluster中")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.103:6378 新的从节点IP和端口")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.103:6377 新的主节点IP和端口")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 73473hdfisbdifsdf 新的主节点id")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster add"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".103")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6378")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".103")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6377")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slave "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("master"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("id "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("73473")]),s._v("hdfisbdifsdf\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("h3",{attrs:{id:"三-删除集群中的从节点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-删除集群中的从节点"}},[s._v("#")]),s._v(" (三)：删除集群中的从节点")]),s._v(" "),r("ul",[r("li",[s._v("如果要删除的节点是slave节点，那么直接删除就可以了")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.103:6378 从节点的IP和端口")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster del"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".103")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6378")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("从节点的id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("然后将这个从节点停止掉")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" shutdown \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"四-删除集群中的主节点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四-删除集群中的主节点"}},[s._v("#")]),s._v(" (四)：删除集群中的主节点")]),s._v(" "),r("ul",[r("li",[s._v("删除主节点需要先将主节点的slots移动到其他节点上去，然后才能删除")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.101:6372 这个是集群中任意节点")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster reshard "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".101")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 然后会进入到reshard的交互命令")]),s._v("\n要选择多少slot移动\n将slot转移到哪个master上\n这些slot从哪个master上转\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("ul",[r("li",[s._v("转移完slot后，将主节点删除")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 192.168.10.103:6377 主节点的IP和端口")]),s._v("\nredis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cluster del"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".103")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6377")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("主节点的id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("h3",{attrs:{id:"五-集群备份迁移之redis-shark"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#五-集群备份迁移之redis-shark"}},[s._v("#")]),s._v(" (五)：集群备份迁移之Redis-Shark")]),s._v(" "),r("ul",[r("li",[s._v("集群迁移使用redis-shake "),r("a",{attrs:{href:"https://github.com/alibaba/RedisShake",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis-shake"),r("OutboundLink")],1)])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("conf"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" redis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("shake\nsource"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cluster\nsource"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsource"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" auth\nsource"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password_raw "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n\ntarget"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cluster\ntarget"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("address "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6373")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6375")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".6")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6376")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ntarget"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth_type "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" auth\ntarget"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password_raw "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br")])]),r("ul",[r("li",[s._v("集群迁移完整性检测：redis-full-check "),r("a",{attrs:{href:"https://github.com/alibaba/RedisFullCheck",target:"_blank",rel:"noopener noreferrer"}},[s._v("仓库地址"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);