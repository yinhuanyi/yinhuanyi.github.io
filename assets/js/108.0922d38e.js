(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{1608:function(s,a,t){s.exports=t.p+"assets/img/2020-03-229.38.02.6b297c3f.png"},1609:function(s,a,t){s.exports=t.p+"assets/img/2020-03-229.41.03.1e138a98.png"},1610:function(s,a,t){s.exports=t.p+"assets/img/2020-03-229.42.12.c1954250.png"},1611:function(s,a,t){s.exports=t.p+"assets/img/2020-03-2211.52.54.d00fa709.png"},1612:function(s,a,t){s.exports=t.p+"assets/img/2020-03-239.36.00.4b748272.png"},2605:function(s,a,t){"use strict";t.r(a);var n=t(9),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一-集群配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-集群配置"}},[s._v("#")]),s._v(" 一："),n("code",[s._v("集群配置")])]),s._v(" "),n("ul",[n("li",[s._v("查看文档")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(1608),alt:"Alt text"}})]),s._v(" "),n("p",[n("img",{attrs:{src:t(1609),alt:"Alt text"}})]),s._v(" "),n("p",[n("img",{attrs:{src:t(1610),alt:"Alt text"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 点击下载，进入下载页面后，在点击getting started guide，就可以看到文档了\n进入到 “Setup Elasticsearch” -### “Important System Configuration”\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"一-在elasticsearch-yml中只设定固定的参数-其他的基于-cluster-settings动态设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-在elasticsearch-yml中只设定固定的参数-其他的基于-cluster-settings动态设置"}},[s._v("#")]),s._v(" (一)在elasticsearch.yml中只设定固定的参数，其他的基于 /_cluster/settings动态设置")]),s._v(" "),n("ul",[n("li",[s._v("在elasticsearch.yml需要设置的参数有")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" yhy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("es\nnode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" yhy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\npath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("elasticsearch\npath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logs"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("elasticsearch\n# 开启内存锁，防止内存数据被转移到交换分区，影响性能。如果这个选项打开为"),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("，必须保证系统的swap关闭，否则启动会报错"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" memory locking requested "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" elasticsearch process but memory is not locked\n# bootstrap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("memory_lock"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n# 集群中的所有节点\ndiscovery"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("seed_hosts"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.18.202"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.18.203"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.18.204"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n# 可以被选举为master节点的主机，如果不是新集群，那么这个设置不能够修改，如果修改了，需要删除所有节点的path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data里面的数据，让集群重新初始化，如果这里写的是主机名，那么必须与node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name的名称一致，并且在"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hosts文件中能够解析\ncluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("initial_master_nodes"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.18.202"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.18.203"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.18.204"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n# 当前节点监听的地址\nnetwork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".18")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".202")]),s._v("\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v("\nnode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("master"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nnode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n# 允许越狱\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enabled"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cors"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("origin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h3",{attrs:{id:"二-可以动态设置的集群参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-可以动态设置的集群参数"}},[s._v("#")]),s._v(" (二) 可以动态设置的集群参数")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("更新集群级别的设置。更新分为持久和临时两种，如果是持久的，则集群重启后仍然生效；如果是临时的，在完全重启集群后会失效。通过将值设置为null可以重置持久或临时设置。如果临时设置被重置，则会按持久设置、配置文件中的设置和默认值的顺序将第一个找到的值作为设置的值。集群设置的优先级是：临时设置、持久设置、配置文件elasticsearch.yml中的设置。")])]),s._v(" "),n("li",[n("p",[s._v("查看集群默认的参数, 临时参数，持久化参数")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("GET /_cluster/settings?include_defaults=true\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("设置集群的配置")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('PUT /_cluster/settings\n{\n  "persistent": {\n    \n  },\n  "transient" : {\n        "indices.recovery.max_bytes_per_sec" : "20mb"\n   }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"三-关于节点jvm的设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-关于节点jvm的设置"}},[s._v("#")]),s._v(" (三) 关于节点JVM的设置")]),s._v(" "),n("ul",[n("li",[s._v("每个节点最好内存大小不要超过31G，且不要超过系统内存的一半")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(1611),alt:"Alt text"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("这里的搜索类型项目，比例是1(内存大小):16(数据量大小)\n但是如果是查询类型项目，比如浏览器，可以是1:48\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"二-写数据优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-写数据优化"}},[s._v("#")]),s._v(" 二："),n("code",[s._v("写数据优化")])]),s._v(" "),n("h3",{attrs:{id:"一-refresh、translog机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-refresh、translog机制"}},[s._v("#")]),s._v(" (一) Refresh、Translog机制")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("segment写入到磁盘的过程依然比较耗时，因此基于文件系统的缓冲特性，将segment在缓冲中创建，并且开放查询进一步提高实时性能，这个过程就是refresh")])]),s._v(" "),n("li",[n("p",[s._v("ES默认是1秒钟执行一次refresh，因此文档的实时性能被提高到了1秒，这也就是为什么ES具有近实时的原因")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\t一个新的写入请求进来，会先写入到index buffer中，且同时写入到translog中，translog的文件是写入到磁盘的，每个请求都会写入到translog，因此这里可以修改为5秒写入一次，相关配置参数为：index.translog.*。然后refresh到segment in memory内从中，最后同步到ES的segment磁盘中\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"二-refresh、translog优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-refresh、translog优化"}},[s._v("#")]),s._v(" (二) Refresh、Translog优化")]),s._v(" "),n("ul",[n("li",[s._v("目标是增大吞吐量：EPS（Events Per Second）")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1: 客户端：批量写入，使用ES的bulk批量写入\n2：调整refresh、translog参数\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"三-refresh优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-refresh优化"}},[s._v("#")]),s._v(" (三) Refresh优化")]),s._v(" "),n("ul",[n("li",[s._v("增大 refresh_interval参数")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("默认是1s，如果设置为-1，则表示禁止自动refresh, 因此可以调整这个值为5s\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("增大 index_buffer_size参数")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("indices.memory.index_buffer_size是静态参数，必须写在elasticsearch.yml中，默认是10%，可以调大到30%\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"四-translog优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-translog优化"}},[s._v("#")]),s._v(" (四) Translog优化")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\t1：调整index.translog.durability为async, index.translog.sync_interval为120秒，表示异步写入translog，120秒写入一次到磁盘\n\t\n\t2：index.translog.flush_threshold_size默认是512mb，可以调整到 1024mb，超过这个值触发一次flush\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"五-shard优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五-shard优化"}},[s._v("#")]),s._v(" (五) Shard优化")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("index.routing.allocation.total_shards_per_node 设置每个node上可以分配的shard数(包括主shard和副shard)\n\n如果有5个node，5个分片，1个发布。每个node上的shard个数为 (5+5)/5 == 2，但是可以增加一个或两个，防止node宕机时候，shard迁移失败\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"六-写性能优化示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六-写性能优化示例"}},[s._v("#")]),s._v(" (六) 写性能优化示例")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# 必须是syslog-2020.03.22索引没有创建的时候设置\nPUT /syslog-2020.03.22\n{\n  "settings": {\n    "refresh_interval": "30s",\n    "number_of_shards": 5,\n    "number_of_replicas": 1,\n    "routing": {\n      "allocation": {\n        "total_shards_per_node": 4\n      }\n    },\n    "translog":{\n      "sync_interval": "30s",\n      "durability": "async"\n    }\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h2",{attrs:{id:"三-如何设定shard数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-如何设定shard数"}},[s._v("#")]),s._v(" 三："),n("code",[s._v("如何设定Shard数")])]),s._v(" "),n("ul",[n("li",[s._v("ES的性能是线性扩展的，因此只需要测试出一个shard的性能指标，然后根据实际情况的性能需求计算出需要的shard数量。例如")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("一个shard的EPS是10000，那么如果需要写入的EPS到达50000，那么就需要有5个Shard\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("测试1个shard的性能步骤如下")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1：搭建一个与生产环境相同配置的单一节点集群\n\n2：创建一个1 shard，0 replicas的Index\n\n3：写入实际的数据进行测试，获取写性能指标\n\n4：针对数据进行查询请求，获取读性能查询指标 \n\n5：压测工具可以选择：esrally\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("ul",[n("li",[s._v("经验总结")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1：如果是搜索引擎场景，单个shard大小不要超过15GB\n\n2：如果是日志场景，单个shard大小不要超过50GB\n\n3：此时只要估算出你索引的总数据量大小，然后再除以单个shard的大小，也可以得到shard的分片数量\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"四-x-pack-monitoring"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-x-pack-monitoring"}},[s._v("#")]),s._v(" 四："),n("code",[s._v("X-Pack Monitoring")])]),s._v(" "),n("ul",[n("li",[s._v("X-Pack具有集群监控功能")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("在ES6版本，需要安装 x-pack 插件, ES7不需要手动安装了\n\nbin/elasticsearch-plugin install x-pack\nbin/kibana-plugin install x-pack\nbin/logstash-plugin install x-pack\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ul",[n("li",[s._v("安装了之后，就可以在Kibana上看到Monitor的监控图")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(1612),alt:"Alt text"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);