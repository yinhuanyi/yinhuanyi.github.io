(window.webpackJsonp=window.webpackJsonp||[]).push([[633],{2721:function(s,e,a){"use strict";a.r(e);var t=a(9),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"一-k8s的各个组件调度通信策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-k8s的各个组件调度通信策略"}},[s._v("#")]),s._v(" 一：K8S的各个组件调度通信策略")]),s._v(" "),a("h3",{attrs:{id:"一-通信策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-通信策略"}},[s._v("#")]),s._v(" "),a("code",[s._v("(一)通信策略")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\tmaster节点是一个工作平面，其他的节点都是真正的运行pod的节点\n\t\n\t当用户向apiserver发送请求，apiserver将请求转发给scheduler，scheduler会从众多节点中选择一个适合的节点，作为pod运行的节点，将选定的结果返回给apiserver，且记录在etcd中。apiserver会与被选定节点上的kubelet通信，kubelet会始终watch与它所在节点相关的事件变动，kubelet会从apiserver获取配置清单，根据配置清单的定义创建一个pod。一般会给pod的前端加上一个service，提供固定的访问端点。service并不是一个实实在在的组件，service其实是节点上的一组iptables或ipvs规则。当需要创建一个service的时候，kube-proxy会监控apiserver关于service相关的变动，然后创建到当前节点上，kube-proxy是管理service的重要组件。因此kubelet和kube-proxy都需要去连接apiserver获取到pod或service资源的定义清单。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"二-预选策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-预选策略"}},[s._v("#")]),s._v(" "),a("code",[s._v("(二)预选策略")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("CheckNodeCondition:\nGeneralPredicates:\n\tHostname：检查pod是否指定了Hostname\n\tPodFitsHostPort：检查pod是否指定了Port\n\tMatchNodeSelector:检查pod是否指定了节点选择器\n\tPodFitsResources: 检查节点是否符合pod的需求\nNoDiskConflict: 检查Pod依赖的存储卷是否满足需求\nPodToleratesNodeTaints: 检查pod是否能够容忍污点\nCheckNodeLabelPresence: \nCheckServiceAffinity: 检查pod对service的倾向性\nCheckSVolumeBinding: \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"三-优选函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-优选函数"}},[s._v("#")]),s._v(" "),a("code",[s._v("(三)优选函数")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("LeastRequested: \n\t(cpu((capacity-sum(requested))*10)/capacity)： CPU的计算方法\n\nBalancedResourceAllocation: CPU和内存的占用率相近的胜出\n\nNodePreferAvoidPods:\n\t节点注解信息\n\nTaintToleration: 将Pod对象的spec.tolerations与节点的taints列表项进行匹配度检查，匹配的条目越多，得分越低。\nSelectorSpreading: 分散调度越高评分越高\nInterPodAffinity: 匹配项越多评分越高\nNodeLabel：有标签匹配到了评分越高\nImageLocality: 镜像体积大小评分\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"四-容器污点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四-容器污点"}},[s._v("#")]),s._v(" "),a("code",[s._v("(四)容器污点")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);