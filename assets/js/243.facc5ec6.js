(window.webpackJsonp=window.webpackJsonp||[]).push([[243],{2216:function(s,n,t){"use strict";t.r(n);var e=t(9),a=Object(e.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"一-io-io包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-io-io包"}},[s._v("#")]),s._v(" 一：io.io包")]),s._v(" "),e("h3",{attrs:{id:"一-概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-概念"}},[s._v("#")]),s._v(" (一)：概念")]),s._v(" "),e("ul",[e("li",[e("strong",[e("code",[s._v("Golang的输入和输出操作是使用原语实现的，这些原语将数据模拟成可读的或可写的字节流")]),s._v("，Go 的 io 包提供了 io.Reader 和 io.Writer 接口，分别用于数据的输入和输出")]),s._v("，IO包支持对内存结构，文件，网络连接等资源进行操作，如图")])]),s._v(" "),e("p",[e("img",{attrs:{src:t(742),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"二-io-reader-接口表示一个读取器-它将数据从某个资源读取到传输缓冲区。在缓冲区中-数据可以被流式传输和使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-io-reader-接口表示一个读取器-它将数据从某个资源读取到传输缓冲区。在缓冲区中-数据可以被流式传输和使用"}},[s._v("#")]),s._v(" (二)：io.Reader 接口表示一个读取器，它将数据从某个资源读取到传输缓冲区。在缓冲区中，数据可以被流式传输和使用")]),s._v(" "),e("ul",[e("li",[s._v("1："),e("code",[s._v("io.Reader是一个接口")]),s._v("，任何类型只要实现了"),e("code",[s._v("Read(p []byte) (n int, err error)")]),s._v("都可以认为实现了Reader接口，下面的功能是"),e("code",[s._v("将reader中的数据写入数据到缓冲区，最后从缓冲区读取数据的过程")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\t// 这里是通过strings.NewReader方法创建了一个Reader实例，这个Reader类型实现了Read方法，那么就可以认为reader实例是一个读取器\n\treader := strings.NewReader("Clear is better than clever")\n\n\t// 定义读取写进写入的缓冲区\n\tp := make([]byte, 4)\n\n\t// 定义所有的字节写入的缓冲区\n\tvar results []byte\n\t\n\t// 循环将reader中的数据，拷贝到缓冲区p中，每次循环缓冲区的数据都会被覆盖掉\n\tfor {\n\t\tn, err := reader.Read(p)\n\t\tif err != nil{\n\t\t\tif err == io.EOF { // 如果读取完毕，返回0，EOF\n\t\t\t\tfmt.Println("EOF:", n)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tfmt.Println(err)\n\t\t\tos.Exit(1)\n\t\t}\n\t\t// 遍历缓冲区字节，添加到results里面\n\t\tfor _, v := range p[:n] {\n\t\t\tresults = append(results, v)\n\t\t}\n\t\tfmt.Println(n, string(p[:n]))\n\t}\n\n\tfmt.Printf("results=%s\\n", results)\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br")])]),e("ul",[e("li",[s._v("2：自己实现一个MyReader结构体，且结构体实现Read方法，满足io.Reader接口")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("type MyReader struct {\n\tsrc string  // 读取的数据\n\tcur int     // 当前读取的位置\n}\n\nfunc NewMyReader(src string) *MyReader {\n\treturn &MyReader{src: src}\n}\n\n// alpha 过滤函数\nfunc alpha(r byte) byte {\n\tif (r >= 'A' && r <= 'Z') || (r >= 'a' && r <= 'z') {\n\t\treturn r\n\t}\n\treturn 0\n}\n\n// Read 实现io.Reader的方法, p是缓存字节数组\nfunc (m *MyReader) Read (p []byte) (int, error) {\n\n\t// 如果当前读取的位置已经到了末尾，那么直接返回io.EOF\n\tif m.cur >= len(m.src) {\n\t\treturn 0, io.EOF\n\t}\n\n\n\tx := len(m.src) - m.cur\n\n\tn, bound := 0, 0\n\n\tif x >= len(p) {\n\t\t// 剩余长度超过缓冲区大小，说明本次可完全填满缓冲区\n\t\tbound = len(p)\n\n\t} else if x < len(p) {\n\t\t// 剩余长度小于缓冲区大小，使用剩余长度输出，缓冲区不补满\n\t\tbound = x\n\n\t}\n\n\t// 内部缓冲区\n\tbuf := make([]byte, bound)\n\n\tfor n < bound {\n\t\t// 每次读取一个字节，执行过滤函数\n\t\tif char := alpha(m.src[m.cur]); char != 0 {\n\t\t\tbuf[n] = char\n\t\t}\n\t\tn++\n\t\tm.cur++\n\t}\n\n\t// 将缓冲区数据拷贝一份到缓冲区p中\n\tcopy(p, buf)\n\n\treturn n, nil\n\n}\n\nfunc main() {\n\treader := NewMyReader(\"Hello! 110, my name is Robby\")\n\n\tp := make([]byte, 4)\n\n\tvar results []byte\n\n\tfor {\n\t\tn, err := reader.Read(p)\n\n\t\tif err != nil{\n\t\t\tif err == io.EOF {\n\t\t\t\tfmt.Println(\"EOF:\", n)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tfmt.Println(err)\n\t\t\tos.Exit(1)\n\t\t}\n\n\t\tfor _, v := range p[:n] {\n\t\t\tresults = append(results, v)\n\t\t}\n\n\t\tfmt.Println(n, string(p[:n]))\n\t}\n\n\tfmt.Printf(\"results=%s\\n\", results)\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br"),e("span",{staticClass:"line-number"},[s._v("70")]),e("br"),e("span",{staticClass:"line-number"},[s._v("71")]),e("br"),e("span",{staticClass:"line-number"},[s._v("72")]),e("br"),e("span",{staticClass:"line-number"},[s._v("73")]),e("br"),e("span",{staticClass:"line-number"},[s._v("74")]),e("br"),e("span",{staticClass:"line-number"},[s._v("75")]),e("br"),e("span",{staticClass:"line-number"},[s._v("76")]),e("br"),e("span",{staticClass:"line-number"},[s._v("77")]),e("br"),e("span",{staticClass:"line-number"},[s._v("78")]),e("br"),e("span",{staticClass:"line-number"},[s._v("79")]),e("br"),e("span",{staticClass:"line-number"},[s._v("80")]),e("br"),e("span",{staticClass:"line-number"},[s._v("81")]),e("br"),e("span",{staticClass:"line-number"},[s._v("82")]),e("br"),e("span",{staticClass:"line-number"},[s._v("83")]),e("br"),e("span",{staticClass:"line-number"},[s._v("84")]),e("br"),e("span",{staticClass:"line-number"},[s._v("85")]),e("br"),e("span",{staticClass:"line-number"},[s._v("86")]),e("br"),e("span",{staticClass:"line-number"},[s._v("87")]),e("br")])]),e("ul",[e("li",[s._v("3："),e("code",[s._v("通过继承的方式，在io.Reader的基础上继续扩展其他功能，这里使用strings.NewReader作为接口的实现")]),s._v("，这种方式在开发过程中很常用")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("type MyReader struct {\n\treader io.Reader\n}\n\nfunc NewMyReader(reader io.Reader) *MyReader {\n\treturn &MyReader{reader: reader}\n}\n\nfunc alpha(r byte) byte {\n\tif (r >= 'A' && r <= 'Z') || (r >= 'a' && r <= 'z') {\n\t\treturn r\n\t}\n\treturn 0\n}\n\nfunc (m *MyReader) Read(p []byte) (int, error) {\n\t// 调用的父类的Read方法，由于子类的方法与父类同名，那么调用父类方法的时候，需要使用父类的实例调用\n\tn, err := m.reader.Read(p)\n\n\tif err != nil {\n\t\treturn n, err\n\t}\n\n\tbuf := make([]byte, n)\n\n\tfor i := 0; i < n; i++ {\n\t\tif char := alpha(p[i]); char != 0 {\n\t\t\tbuf[i] = char\n\t\t}\n\t}\n\n\tcopy(p, buf)\n\n\treturn n, nil\n}\n\nfunc main() {\n\n\treader := NewMyReader(strings.NewReader(\"Hello! It's 9am, where is the sun?\"))\n\n\tp := make([]byte, 4)\n\n\tvar results []byte\n\n\tfor {\n\t\tn, err := reader.Read(p)\n\n\t\tif err != nil{\n\t\t\tif err == io.EOF {\n\t\t\t\tfmt.Println(\"EOF:\", n)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tfmt.Println(err)\n\t\t\tos.Exit(1)\n\t\t}\n\n\t\tfor _, v := range p[:n] {\n\t\t\tresults = append(results, v)\n\t\t}\n\n\t\tfmt.Println(n, string(p[:n]))\n\t}\n\n\tfmt.Printf(\"results=%s\\n\", results)\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br")])]),e("ul",[e("li",[s._v("4："),e("code",[s._v("这里使用os.File作为io.Reader接口的实现")]),s._v("，那么数据就可以从文件中读取了")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("type MyReader struct {\n\treader io.Reader\n}\n\nfunc NewMyReader(reader io.Reader) *MyReader {\n\treturn &MyReader{ reader: reader }\n}\n\nfunc alpha(r byte) byte {\n\tif (r >= 'A' && r <= 'Z') || (r >= 'a' && r <= 'z') {\n\t\treturn r\n\t}\n\treturn 0\n}\n\nfunc (m *MyReader) Read(p []byte) (int, error) {\n\t// 调用的父类的Read方法，由于子类的方法与父类同名，那么调用父类方法的时候，需要使用父类的实例调用\n\tn, err := m.reader.Read(p)\n\n\tif err != nil {\n\t\treturn n, err\n\t}\n\n\tbuf := make([]byte, n)\n\n\tfor i := 0; i < n; i++ {\n\t\tif char := alpha(p[i]); char != 0 {\n\t\t\tbuf[i] = char\n\t\t}\n\t}\n\n\tcopy(p, buf)\n\n\treturn n, nil\n}\n\nfunc main() {\n\n\tfile, err := os.Open(\"/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt\")\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\n\tdefer file.Close()\n\n\treader := NewMyReader(file)\n\n\tp := make([]byte, 4)\n\n\tvar results []byte\n\n\tfor {\n\t\tn, err := reader.Read(p)\n\n\t\tif err != nil{\n\t\t\tif err == io.EOF {\n\t\t\t\tfmt.Println(\"EOF:\", n)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tfmt.Println(err)\n\t\t\tos.Exit(1)\n\t\t}\n\n\t\tfor _, v := range p[:n] {\n\t\t\tresults = append(results, v)\n\t\t}\n\n\t\tfmt.Println(n, string(p[:n]))\n\t}\n\n\tfmt.Printf(\"results=%s\\n\", results)\n\n}\n\n\n// 输出结果：\n4 niha\n1 o\nEOF: 0\nresults=nihao\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br"),e("span",{staticClass:"line-number"},[s._v("70")]),e("br"),e("span",{staticClass:"line-number"},[s._v("71")]),e("br"),e("span",{staticClass:"line-number"},[s._v("72")]),e("br"),e("span",{staticClass:"line-number"},[s._v("73")]),e("br"),e("span",{staticClass:"line-number"},[s._v("74")]),e("br"),e("span",{staticClass:"line-number"},[s._v("75")]),e("br"),e("span",{staticClass:"line-number"},[s._v("76")]),e("br"),e("span",{staticClass:"line-number"},[s._v("77")]),e("br"),e("span",{staticClass:"line-number"},[s._v("78")]),e("br"),e("span",{staticClass:"line-number"},[s._v("79")]),e("br"),e("span",{staticClass:"line-number"},[s._v("80")]),e("br"),e("span",{staticClass:"line-number"},[s._v("81")]),e("br"),e("span",{staticClass:"line-number"},[s._v("82")]),e("br")])]),e("h3",{attrs:{id:"三-io-writer-表示一个编写器-它从缓冲区读取数据-并将数据写入目标资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-io-writer-表示一个编写器-它从缓冲区读取数据-并将数据写入目标资源"}},[s._v("#")]),s._v(" (三)：io.Writer 表示一个编写器，它从缓冲区读取数据，并将数据写入目标资源")]),s._v(" "),e("ul",[e("li",[s._v("1："),e("code",[s._v("io.Writer是一个接口，任何类型只要实现了Write(p []byte) (n int, err error)方法")]),s._v("，都可以认为实现了Writer接口，下面的功能是"),e("code",[s._v("将缓冲区的数据写入到writer中，然后writer再打印出来")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\tproverbs := []string{\n\t\t"I am Robby",\n\t\t"I am Chinese",\n\t\t"I love China",\n\t}\n\n\t// 初始化writer\n\tvar writer bytes.Buffer\n\n\tfor _, p := range proverbs {\n\t\t// 从缓冲区p中读取数据，写入到writer中\n\t\tn, err := writer.Write([]byte(p))\n\t\tif err != nil {\n\t\t\tfmt.Println(err)\n\t\t\tos.Exit(1)\n\t\t}\n\n\t\t// 如果缓冲区数据与写入数据不等，说明写入丢失数据了\n\t\tif n != len(p) {\n\t\t\tfmt.Println("failed to write data")\n\t\t\tos.Exit(1)\n\t\t}\n\t}\n\n\tfmt.Println(writer.String())\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br")])]),e("ul",[e("li",[s._v("2：自己实现一个MyWriter")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('type MyWriter struct {\n\tch chan byte\n}\n\nfunc NewMyWriter() *MyWriter {\n\treturn &MyWriter{make(chan byte, 1024)}\n}\n\nfunc (m *MyWriter) Chan() <-chan byte {\n\treturn m.ch\n}\n\nfunc (m *MyWriter) Write(p []byte) (int, error) {\n\tn := 0\n\t// 遍历输入数据，按字节写入目标资源\n\tfor _, b := range p {\n\t\tm.ch <- b\n\t\tn++\n\t}\n\treturn n, nil\n}\n\nfunc (m *MyWriter) Close() error {\n\tclose(m.ch)\n\treturn nil\n}\n\nfunc main() {\n\twriter := NewMyWriter()\n\n\tgo func() {\n\t\tdefer writer.Close()\n\t\twriter.Write([]byte("Stream "))\n\t\twriter.Write([]byte("me!"))\n\t}()\n\n\tfor c := range writer.Chan() {\n\t\tfmt.Printf("%c", c)\n\t}\n\tfmt.Println()\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br")])]),e("ul",[e("li",[s._v("3："),e("code",[s._v("这里使用os.File作为io.Writer接口的实现")]),s._v("，那么就可以将数据写入到文件了")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\tproverbs := []string{\n\t\t"I am robby\\n",\n\t\t"I am Chinese\\n",\n\t\t"I love China\\n",\n\t}\n\n\tfile, err := os.Create("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt")\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\n\tdefer file.Close()\n\n\tfor _, p := range proverbs {\n\n\t\tn, err := file.Write([]byte(p))\n\t\tif err != nil {\n\t\t\tfmt.Println(err)\n\t\t\tos.Exit(1)\n\t\t}\n\t\tif n != len(p) {\n\t\t\tfmt.Println("failed to write data")\n\t\t\tos.Exit(1)\n\t\t}\n\t}\n\n\tfmt.Println("file write done")\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br")])]),e("h3",{attrs:{id:"四-标准输入、输出和错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四-标准输入、输出和错误"}},[s._v("#")]),s._v(" (四)：标准输入、输出和错误")]),s._v(" "),e("ul",[e("li",[s._v("在os包中"),e("code",[s._v("os.Stdout ，os.Stdin 和 os.Stderr")]),s._v("这三个对象是*os.File类型，因此这三个实例对象也实现了"),e("code",[s._v("io.Writer、io.Reader")]),s._v("，下面使用"),e("code",[s._v("os.Stdout举个例子")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\tproverbs := []string{\n\t\t"I am robby\\n",\n\t\t"I am Chinese\\n",\n\t\t"I love China\\n",\n\t}\n\n\tfor _, p := range proverbs {\n\n\t\tn, err := os.Stdout.Write([]byte(p))\n\n\t\tif err != nil {\n\t\t\tfmt.Println(err)\n\t\t\tos.Exit(1)\n\t\t}\n\n\t\tif n != len(p) {\n\t\t\tfmt.Println("failed to write data")\n\t\t\tos.Exit(1)\n\t\t}\n\n\t}\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("h3",{attrs:{id:"五-io-copy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五-io-copy"}},[s._v("#")]),s._v(" (五)：io.Copy")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("io.Copy()")]),s._v("可以轻松地将数据从一个 io.Reader 拷贝到另一个 io.Writer，下面将reader中的数据copy到writer中")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\treader := strings.NewReader("I am Robby\\n")\n\n\tfile, err := os.Create("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt")\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\n\tdefer file.Close()\n\n\tif _, err := io.Copy(file, reader); err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("ul",[e("li",[s._v("也可以将文件的数据，写入到标准输出")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\tfile, err := os.Open("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt")\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\tdefer file.Close()\n\n\tif _, err := io.Copy(os.Stdout, file); err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("h3",{attrs:{id:"六-io-writestring"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六-io-writestring"}},[s._v("#")]),s._v(" (六)：io.WriteString()")]),s._v(" "),e("ul",[e("li",[s._v("io.WriteString()可以方便地将字符串写入一个 writer中")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n    file, err := os.Create("./magic_msg.txt")\n    if err != nil {\n        fmt.Println(err)\n        os.Exit(1)\n    }\n    defer file.Close()\n    if _, err := io.WriteString(file, "Go is fun!"); err != nil {\n        fmt.Println(err)\n        os.Exit(1)\n    }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h3",{attrs:{id:"七-io-pipewriter-和-io-pipereader-在内存管道中模拟-io-操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七-io-pipewriter-和-io-pipereader-在内存管道中模拟-io-操作"}},[s._v("#")]),s._v(" (七)：io.PipeWriter 和 io.PipeReader 在内存管道中模拟 io 操作")]),s._v(" "),e("ul",[e("li",[s._v("类型 io.PipeWriter 和 io.PipeReader 在内存管道中模拟 io 操作")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\tproverbs := new(bytes.Buffer)\n\tproverbs.WriteString("I am robby\\n")\n\tproverbs.WriteString("I am Chinese\\n")\n\tproverbs.WriteString("I love China\\n")\n\n\tpiper, pipew := io.Pipe()\n\n\t// 将 proverbs 写入 pipew\n\tgo func() {\n\t\tdefer pipew.Close()\n\t\tio.Copy(pipew, proverbs)\n\t}()\n\n\t// 从piper读取数据写入到os.Stdout\n\tio.Copy(os.Stdout, piper)\n\t\n\tpiper.Close()\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("h2",{attrs:{id:"二-bufio-bufio包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-bufio-bufio包"}},[s._v("#")]),s._v(" 二：bufio.bufio包")]),s._v(" "),e("h3",{attrs:{id:"一-bufio模块通过对io模块的封装-提供了数据缓冲功能-减少大块数据读写带来的开销"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-bufio模块通过对io模块的封装-提供了数据缓冲功能-减少大块数据读写带来的开销"}},[s._v("#")]),s._v(" (一)：bufio模块通过对io模块的封装，提供了数据缓冲功能，减少大块数据读写带来的开销")]),s._v(" "),e("ul",[e("li",[s._v("bufio包相关的方法签名如下，主要是创建reader或writer实例对象")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1：func NewReader(rd io.Reader) *Reader ：需要传递一个io.Reader实例，返回一个*Reader\n\n2：func NewReaderSize(rd io.Reader, size int) *Reader：也可以指定Reader的缓冲区大小\n\n3：func NewWriter(w io.Writer) *Writer：需要传递一个io.Writer实例，返回一个*Writer\n\n4：func NewWriterSize(w io.Writer, size int) *Writer：也可以指定Writer的大小\n\n5：func NewReadWriter(r *Reader, w *Writer) *ReadWriter：返回可读可写的实例\n\n6：func NewScanner(r io.Reader) *Scanner\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h3",{attrs:{id:"二-bufio模块中的reader对象-常用的方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-bufio模块中的reader对象-常用的方法"}},[s._v("#")]),s._v(" (二)：bufio模块中的Reader对象，常用的方法")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("bufio.Reader")]),s._v("的基础操作方法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1：func (b *Reader) Read(p []byte) (n int, err error)：将数据读取到缓冲区p中，并且返回读取的字节数n\n\n2：func (b *Reader) Discard(n int) (discarded int, err error)：丢弃n个reader中的byte数据\n\n3：func (b *Reader) Peek(n int) ([]byte, error)：获取当前缓冲区内接下来的n个byte，但是不移动指针，也就是说，下次依然从reader当前位置读取\n\n4：func (b *Reader) Reset(r io.Reader)：清空整个reader，返回一个新的reader\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("bufio.Reader")]),s._v("的特有数据获取方法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1：func (b *Reader) ReadByte() (byte, error)：读取一个byte字节\n\n2：func (b *Reader) ReadRune() (r rune, size int, err error)：读取一个UTF-8字符，r是rune类型字符，size是r的字节大小\n\n3：func (b *Reader) ReadLine() (line []byte, isPrefix bool, err error)：读取一行数据，默认由'\\n'分隔\n\n4：func (b *Reader) ReadBytes(delim byte) ([]byte, error)：读取一个byte切片，使用delim进行分割\n\n5：func (b *Reader) ReadString(delim byte) (string, error)：读取一个字符串，使用delim进行分割\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("ul",[e("li",[s._v("简单示例：读取文件中的行")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\tfile, err := os.Open("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt")\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\tdefer file.Close()\n\n\t// 封装一下\n\treader := bufio.NewReader(file)\n\t\n\tfor {\n\n\t\tline, ok, err := reader.ReadLine()\n\n\t\tif err != nil {\n\t\t\tif err == io.EOF {\n\t\t\t\tbreak\n\t\t\t} else {\n\t\t\t\tfmt.Println(err)\n\t\t\t\tos.Exit(1)\n\t\t\t}\n\t\t}\n\n\t\tfmt.Printf("%s %t\\n",line, ok)\n\t}\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br")])]),e("h3",{attrs:{id:"三-bufio模块中的writer对象-常用的方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-bufio模块中的writer对象-常用的方法"}},[s._v("#")]),s._v(" (三)：bufio模块中的Writer对象，常用的方法")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("bufio.Writer")]),s._v("的基础操作方法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1：func (b *Writer) Write(p []byte) (n int, err error)：将p的数据写入到writer中，n是写入的字节数\n\n2：func (b *Writer) Reset(w io.Writer)：重置当前的writer，返回一个新的writer\n\n3：func (b *Writer) Flush() error ：将数据写入到输出(例如文件中)，且重置当前的writer\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("bufio.Writer")]),s._v("的特有数据获取方法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1：func (b *Writer) WriteByte(c byte) error： 写入一个字节\n\n2：func (b *Writer) WriteRune(r rune) (size int, err error）：写入一个rune类型字符\n\n3：func (b *Writer) WriteString(s string) (int, error) ：写入一个字符串\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("简单示例：字符串写入到文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func main() {\n\n\tfile, err := os.OpenFile("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt", os.O_CREATE|os.O_RDWR|os.O_APPEND, os.ModeAppend|os.ModePerm)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\tdefer file.Close()\n\n\t// 封装一下\n\twriter := bufio.NewWriter(file)\n\n\t// 写入字符串\n\tn, err := writer.WriteString("你好，中国\\n")\n\t\n\n\tif err != nil {\n\t\tfmt.Println("写入错误")\n\t\tos.Exit(1)\n\t}\n\n\t// 如果写入成功，一定用flush才能持久化\n\twriter.Flush()\n\t\n\tfmt.Println(n)\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br")])]),e("h2",{attrs:{id:"三-ioutil包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-ioutil包"}},[s._v("#")]),s._v(" 三：ioutil包")]),s._v(" "),e("h3",{attrs:{id:"一-概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-概述"}},[s._v("#")]),s._v(" (一)：概述")]),s._v(" "),e("ul",[e("li",[e("strong",[e("code",[s._v("ioutil 包实现了一些 I/O 的便捷功能")])])])]),s._v(" "),e("h3",{attrs:{id:"二-ioutil包里的方法列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-ioutil包里的方法列表"}},[s._v("#")]),s._v(" (二)：ioutil包里的方法列表")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("1：Discard")]),s._v("："),e("code",[s._v("Discard 是一个 io.Writer 接口，调用它的 Write 方法将不做任何事情，并且始终成功返回")]),s._v("，类似于/dev/null设备一样")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("var Discard io.Writer = devNull(0)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("2：ReadAll")]),s._v("："),e("code",[s._v("读取 Reader 中的所有数据")]),s._v("，返回读取的数据和遇到的错误")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func ReadAll(r io.Reader) ([]byte, error)\n\n\n代码示例：\nfunc main() {\n\n\treader := strings.NewReader("你好 Robby")\n\n\tbyteArr, err := ioutil.ReadAll(reader)\n\tif err != nil {\n\t\tfmt.Println("文件读取错误")\n\t\tos.Exit(1)\n\t}\n\n\tfmt.Println(string(byteArr))\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("3：ReadFile")]),s._v("：ReadFile "),e("code",[s._v("读取文件中的所有数据")]),s._v("，返回读取的数据和遇到的错误")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func ReadFile(filename string) ([]byte, error)\n\n\n代码示例：\nfunc main() {\n\tfileName := "/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt"\n\tdata, err := ioutil.ReadFile(fileName)\n\n\tif err != nil {\n\t\tfmt.Println("文件读取错误")\n\t\tos.Exit(1)\n\t}\n\tfmt.Println(string(data))\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("4：WriteFile")]),s._v("：WriteFile 向文件中写入数据，"),e("code",[s._v("写入前会清空文件")]),s._v("，"),e("code",[s._v("如果文件不存在，则会以指定的权限创建该文件")]),s._v("，返回遇到的错误")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func WriteFile(filename string, data []byte, perm os.FileMode) error\n\n\n代码示例：\nfunc main() {\n\tfileName := "/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test1/test.txt"\n\ts := "面朝大海春暖花开"\n\n\terr := ioutil.WriteFile(fileName, []byte(s), 0777)\n\tif err != nil {\n\t\tfmt.Println("写入文件错误")\n\t\tos.Exit(1)\n\t}\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("5：ReadDir")]),s._v("："),e("code",[s._v("ReadDir 读取指定目录中的所有目录和文件（不包括子目录）")]),s._v("，返回读取到的"),e("code",[s._v("文件信息列表")]),s._v("和遇到的错误，列表是经过排序的。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func ReadDir(dirname string) ([]os.FileInfo, error)\n\n代码示例：\nfunc main() {\n\n\tdirName := "/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test"\n\tfileInfos, _ := ioutil.ReadDir(dirName)\n\n\tfmt.Printf("目录下的文件数为：%d\\n", len(fileInfos))\n\tfor i:=0;i<len(fileInfos);i++{\n\t\tfmt.Printf("%d，文件名称：%s，是否是目录：%t\\n", i, fileInfos[i].Name(), fileInfos[i].IsDir())\n\n\t}\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("6：TempDir和TempFile")]),s._v("：TempFile 在 dir 目录中创建一个以 prefix 为前缀的临时文件，并将其以读写模式打开。返回创建的文件对象和遇到的错误。如果 dir 为空，则在默认的临时目录中创建文件（参见 os.TempDir），多次调用会创建不同的临时文件，调用者可以通过 f.Name() 获取文件的完整路径。调用本函数所创建的临时文件，应该由调用者自己删除。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func TempFile(dir, prefix string) (f *os.File, err error)\n\n\n示例代码：\nfunc main() {\n\n\tdir, err := ioutil.TempDir("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test", "flink")\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\n\tdefer os.Remove(dir)\n\n\tfmt.Printf("%s\\n", dir)\n\n\t// 创建临时文件\n\tf, err := ioutil.TempFile(dir, "Test")\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\tdefer os.Remove(f.Name()) // 用完删除\n\n\tfmt.Printf("%s\\n", f.Name())\n\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("ul",[e("li",[e("strong",[s._v("7：NopCloser")]),s._v("："),e("code",[s._v("NopCloser 将 Reader 包装为一个 ReadCloser 类型")]),s._v("，但 Close 方法不做任何事情。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("func NopCloser(r io.Reader) io.ReadCloser\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"四-bytes-buffer包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四-bytes-buffer包"}},[s._v("#")]),s._v(" 四：bytes.buffer包")]),s._v(" "),e("h3",{attrs:{id:"一-概念-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-概念-2"}},[s._v("#")]),s._v(" (一)：概念")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("bytes.Buffer")]),s._v(" 是一个实现了读写方法的可变大小的字节缓冲器，封装了一些操作缓冲的函数。创建bytes.Buffer实例有三种非法：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("func main() {\n\t\n\tbuf1 := bytes.NewBufferString(\"hello\")\n\tfmt.Println(buf1)\n\t\n\tbuf2 := bytes.NewBuffer([]byte(\"hello\"))\n\tfmt.Println(buf2)\n\t\n\tbuf3 := bytes.NewBuffer([]byte{byte('h'),byte('e'),byte('l'),byte('o')})\n\tfmt.Println(buf3)\n\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h3",{attrs:{id:"二-bytes-buffer缓冲器实例写入数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-bytes-buffer缓冲器实例写入数据"}},[s._v("#")]),s._v(" (二)：bytes.Buffer缓冲器实例写入数据")]),s._v(" "),e("ul",[e("li",[s._v("写入string")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('buf := bytes.NewBuffer([]byte{})\nbuf.WriteString("小花猫")\nfmt.Println(buf.String())\n\n输出结果：\n小花猫\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("ul",[e("li",[s._v("写入[]byte")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('buf := bytes.NewBuffer([]byte{})\ns := []byte("小黑猫")\nbuf.Write(s)\n\nfmt.Println(buf.String())\n\n输出结果：\n小花猫\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("ul",[e("li",[s._v("写入byte")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("buf := bytes.NewBuffer([]byte{})\nvar b byte = 'a'\nbuf.WriteByte(b)\n\nfmt.Println(buf.String())\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("写入rune")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("buf := bytes.NewBuffer([]byte{})\nvar r rune = '你'\nbuf.WriteRune(r)\n\nfmt.Println(buf.String())\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("从文件读取数据写入到缓冲器")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('// 只读打开文件\nfile,err := os.Open("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test.txt")\nif err != nil {\n\tfmt.Println(err)\n}\ndefer file.Close()\n\n// 让文件缓冲区内容写入到磁盘\n_ = file.Sync()\n\nbuf := bytes.NewBufferString("hello")\n\n// 将文件中的内容读取到缓冲器\n_, _ = buf.ReadFrom(file)\n\nfmt.Println(buf.String())\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h3",{attrs:{id:"三-bytes-buffer缓冲器实例输出数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-bytes-buffer缓冲器实例输出数据"}},[s._v("#")]),s._v(" (三)：bytes.Buffer缓冲器实例输出数据")]),s._v(" "),e("ul",[e("li",[s._v("写出数据到io.Writer实现对象")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('file, _ := os.OpenFile("/Users/yinhuanyi/Yinhuanyi_Project/easy-kill/test/test.txt", os.O_CREATE|os.O_RDWR|os.O_APPEND, os.ModeAppend|os.ModePerm)\n\nbuf := bytes.NewBufferString("robby")\n\n_,_ = buf.WriteTo(file)\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("其他的读取操作与bufio的读取API一样")])]),s._v(" "),e("h2",{attrs:{id:"五-os-file包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五-os-file包"}},[s._v("#")]),s._v(" 五：os.file包")]),s._v(" "),e("h3",{attrs:{id:"一-宏观概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-宏观概念"}},[s._v("#")]),s._v(" (一)：宏观概念")]),s._v(" "),e("ul",[e("li",[s._v("os.file包实现了Golang中所有实现文件的操作，主要包含两个部分，一个是文件描述符类型，一个是文件信息接口")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// File类型表示一个文件描述符对象\ntype File struct {\n\t*file // os specific\n}\n\n// 要满足文件描述符对象，必须实现FileInfo接口的所有方法\ntype FileInfo interface {\n\tName() string       // 文件名称\n\tSize() int64        // 文件大小\n\tMode() FileMode     // 文件模式\n\tModTime() time.Time // 文件修改时间\n\tIsDir() bool        // 是否是目录\n\tSys() interface{}   // 底层数据源\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h3",{attrs:{id:"二-文件标志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-文件标志"}},[s._v("#")]),s._v(" (二)：文件标志")]),s._v(" "),e("ul",[e("li",[s._v("文件的标志：文件描述符以什么样的方式打开")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const (\n    O_RDONLY int = syscall.O_RDONLY // 只读模式打开文件\n    O_WRONLY int = syscall.O_WRONLY // 只写模式打开文件\n    O_RDWR   int = syscall.O_RDWR   // 读写模式打开文件\n    O_APPEND int = syscall.O_APPEND // 写操作时将数据附加到文件尾部,默认是覆盖\n    O_CREATE int = syscall.O_CREAT  // 如果不存在将创建一个新文件\n    O_EXCL   int = syscall.O_EXCL   // 和O_CREATE配合使用，文件必须不存在\n    O_SYNC   int = syscall.O_SYNC   // 打开文件用于同步I/O\n    O_TRUNC  int = syscall.O_TRUNC  // 如果可能，打开时清空文件\n)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"三-常用的创建文件描述符file的相关方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-常用的创建文件描述符file的相关方法"}},[s._v("#")]),s._v(" (三)：常用的创建文件描述符File的相关方法")]),s._v(" "),e("ul",[e("li",[s._v("1："),e("code",[s._v("创建文件")]),s._v("：文件名称，读写模式打开，如果文件不存在创建一个新文件，如果文件存在先清空文件内容，文件权限666，那么Linux的umask默认是022，因此新文件的权限是644。(提示：创建目录的权限是777，那么Linux的umask默认是022，因此新目录的权限是755)")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("func Create(name string) (*File, error) {\n     return OpenFile(name, O_RDWR|O_CREATE|O_TRUNC, 0666)\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("ul",[e("li",[s._v("2："),e("code",[s._v("打开文件")]),s._v("：只读方式打开")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("func Open(name string) (*File, error) {\n\t// perm为0，表示不改变文件已有的权限\n\treturn OpenFile(name, O_RDONLY, 0)\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ul",[e("li",[s._v("3："),e("code",[s._v("最一般的形式打开文件")]),s._v("：大多数情况下，都可以使用Open或Create代替本函数，可以传递文件名称，文件打开方式，文件权限3个参数")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("func OpenFile(name string, flag int, perm FileMode) (*File, error) {\n\ttestlog.Open(name)\n\tf, err := openFileNolog(name, flag, perm)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tf.appendMode = flag&O_APPEND != 0\n\n\treturn f, nil\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("ul",[e("li",[s._v("4：基于Unix文件描述符和文件名称创建文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("func NewFile(fd uintptr, name string) *File {\n\tkind := kindNewFile\n\tif nb, err := unix.IsNonblock(int(fd)); err == nil && nb {\n\t\tkind = kindNonBlock\n\t}\n\treturn newFile(fd, name, kind)\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[s._v("5：Pipe返回一对关联的文件对象，从r的读取将返回写入w的数据")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('func Pipe() (r *File, w *File, err error) {\n\tvar p [2]int\n\n\t// See ../syscall/exec.go for description of lock.\n\tsyscall.ForkLock.RLock()\n\te := syscall.Pipe(p[0:])\n\tif e != nil {\n\t\tsyscall.ForkLock.RUnlock()\n\t\treturn nil, nil, NewSyscallError("pipe", e)\n\t}\n\tsyscall.CloseOnExec(p[0])\n\tsyscall.CloseOnExec(p[1])\n\tsyscall.ForkLock.RUnlock()\n\n\treturn newFile(uintptr(p[0]), "|0", kindPipe), newFile(uintptr(p[1]), "|1", kindPipe), nil\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"六-小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六-小结"}},[s._v("#")]),s._v(" 六：小结")]),s._v(" "),e("h3",{attrs:{id:"一-io-io包、bufio-bufio包、io-ioutil-ioutil包、bytes-buffer包、os-file包的异同和使用场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-io-io包、bufio-bufio包、io-ioutil-ioutil包、bytes-buffer包、os-file包的异同和使用场景"}},[s._v("#")]),s._v(" (一)： io.io包、bufio.bufio包、io.ioutil.ioutil包、bytes.buffer包、os.file包的异同和使用场景")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("1："),e("code",[s._v("io库属于底层接口定义库")]),s._v("，其作用是是定义一些基本接口和一些基本常量，并对这些接口的作用给出说明，常见的接口有io.Reader、io.Writer等，任何实现了io.Reader接口或者io.Writer接口的实例，都可以调用Read或者Write方法。一般用这个库只是为了调用它的一些常量，比如io.EOF")])]),s._v(" "),e("li",[e("p",[s._v("2："),e("code",[s._v("ioutil库包含在io目录下，它的主要作用是作为一个工具包")]),s._v("，里面有一些比较实用的函数，比如 ReadAll(从某个源读取数据)、ReadFile（读取文件内容）、WriteFile（将数据写入文件）、ReadDir（获取目录)，ioutil包进一步封装了IO的方法，让调用者使用更加简单")])]),s._v(" "),e("li",[e("p",[s._v("3："),e("code",[s._v("os库主要是跟操作系统打交道")]),s._v("，所以文件操作基本都会跟os库挂钩，比如创建文件、打开一个文件等，这个库往往会和ioutil库、bufio库等配合使用")])]),s._v(" "),e("li",[e("p",[s._v("4："),e("code",[s._v("bufio库可以理解为在io库基础上加了缓存功能")]),s._v("，实现了内存读写，提升了IO速度")])]),s._v(" "),e("li",[e("p",[s._v("5："),e("code",[s._v("bufio VS ioutil库")]),s._v("：两者都提供了对文件的读写功能，唯一的不同就是bufio多了一层缓存的功能，这个优势主要体现读取大文件的时候（ioutil.ReadFile是一次性将内容加载到内存，如果内容过大，很容易爆内存），bufio可以设置缓冲区大小，从而很好的控制了内存的利用率")])]),s._v(" "),e("li",[e("p",[s._v("6："),e("code",[s._v("bufio VS bytes.Buffer")]),s._v("：两者都提供一层缓存功能，它们的不同在于 bufio 主要针对的是"),e("code",[s._v("文件到内存的缓存")]),s._v("，而 bytes.Buffer 的针对的是"),e("code",[s._v("内存到内存的缓存")])])])])])}),[],!1,null,null,null);n.default=a.exports},742:function(s,n,t){s.exports=t.p+"assets/img/2021-08-122.25.27.fe7721ad.png"}}]);