(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1647:function(s,t,a){s.exports=a.p+"assets/img/2021-01-028.58.09.dbad461b.png"},1648:function(s,t,a){s.exports=a.p+"assets/img/2021-01-029.15.36.76680f8f.png"},1649:function(s,t,a){s.exports=a.p+"assets/img/2021-01-029.32.59.0dafc6b2.png"},1650:function(s,t,a){s.exports=a.p+"assets/img/2021-01-029.34.07.98f6a2e7.png"},1651:function(s,t,a){s.exports=a.p+"assets/img/2021-01-029.42.50.23a7129e.png"},1652:function(s,t,a){s.exports=a.p+"assets/img/2021-01-0210.24.38.3b2f2201.png"},1653:function(s,t,a){s.exports=a.p+"assets/img/2021-01-0210.53.36.825ee649.png"},2623:function(s,t,a){"use strict";a.r(t);var e=a(9),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"一-mysql数据架构设计的几种基本模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-mysql数据架构设计的几种基本模式"}},[s._v("#")]),s._v(" 一：MySQL数据架构设计的几种基本模式")]),s._v(" "),e("ul",[e("li",[s._v("模式分类")])]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：MySQL "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" 分布式Proxy扩展\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：数据归档，冷热数据分离\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：MySQL"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("缓存")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("高并发架构\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("：MySQL"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("小文件系统\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("：MySQL"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OLAP")]),s._v("系统\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"一-mysql-分布式proxy扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-mysql-分布式proxy扩展"}},[s._v("#")]),s._v(" "),e("code",[s._v("(一) MySQL + 分布式Proxy扩展")])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("牺牲数据同步速度，保证数据的强一致性("),e("code",[s._v("这适合于cmdb系统，cmdb系统没有超高并发，不需要分区容错性，但是对数据的一致性和可用性要求很高，因此选择PXC集群比较合适，选择Replication集群不合适")]),s._v(")")])]),s._v(" "),e("li",[e("p",[e("strong",[e("code",[s._v("Replication集群")]),s._v("：Master节点不用等待Slave节点同步成功，这种集群只是比单节点数据库多了一个异步复制binlog日志的操作，因此，写入速度基本接近于单节点的性能")])])]),s._v(" "),e("li",[e("p",[e("strong",[e("code",[s._v("PXC集群")]),s._v("：Master节点需要等待所有的Slave节点都同步成功后才能算本次事务执行成功，因此写入速度比较慢")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("单节点MySQL：并发能力比较弱，集群的并发能力比较强")])])]),s._v(" "),e("li",[e("p",[s._v("如何提高PXC集群的性能呢？")])])]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：使用多分片\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：使用"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PXC")]),s._v("集群和Replication集群两种混合集群方式，数据强一致性的存储在"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PXC")]),s._v("中，弱一致性的存储在Replication集群中\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("阿里云的"),e("code",[s._v("GTS")]),s._v("，全局事务服务，可以将不同的数据库做成全局只有一个事务，非常强大")])]),s._v(" "),e("h3",{attrs:{id:"二-数据归档和数据分离"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-数据归档和数据分离"}},[s._v("#")]),s._v(" "),e("code",[s._v("(二) 数据归档和数据分离")])]),s._v(" "),e("ul",[e("li",[s._v("将冷数据归档到MongoDB或TokuDB中")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1647),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"三-mysql-缓存-redis-高并发架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-mysql-缓存-redis-高并发架构"}},[s._v("#")]),s._v(" "),e("code",[s._v("(三) MySQL+缓存(Redis)高并发架构")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1648),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"四-mysql-小文件系统"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四-mysql-小文件系统"}},[s._v("#")]),s._v(" "),e("code",[s._v("(四) MySQL+小文件系统")])]),s._v(" "),e("ul",[e("li",[s._v("写入")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1649),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("读取")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1650),alt:"Alt text"}})]),s._v(" "),e("h3",{attrs:{id:"五-mysql-olap系统"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五-mysql-olap系统"}},[s._v("#")]),s._v(" "),e("code",[s._v("(五) MySQL+OLAP系统")])]),s._v(" "),e("ul",[e("li",[s._v("OLTP与OLAP的关系是什么")])]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("："),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OLTP")]),s._v("（on"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("line transaction processing）翻译为联机事务处理， 从字面上来看"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OLTP")]),s._v("是做事务处理，"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OLTP")]),s._v("主要是对数据的增删改\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("："),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OLAP")]),s._v("（On"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Line Analytical Processing）翻译为联机分析处理，"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OLAP")]),s._v("是做分析处理，从对数据库操作来看，"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OLAP")]),s._v("是对数据的查询。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("img",{attrs:{src:a(1651),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("常见的OLAP系统")])]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" spark"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("hive"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("hbase\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Druid\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ClickHouse\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"二-架构设计原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-架构设计原则"}},[s._v("#")]),s._v(" 二：架构设计原则")]),s._v(" "),e("h3",{attrs:{id:"一-单体集群设计"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-单体集群设计"}},[s._v("#")]),s._v(" "),e("code",[s._v("(一) 单体集群设计")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1652),alt:"Alt text"}})]),s._v(" "),e("ul",[e("li",[s._v("对于Django而言，默认是将session写入到数据库中，但是也可以改为写入到Redis中")])]),s._v(" "),e("h3",{attrs:{id:"二-拆分业务表原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-拆分业务表原则"}},[s._v("#")]),s._v(" "),e("code",[s._v("(二) 拆分业务表原则")])]),s._v(" "),e("ul",[e("li",[s._v("将一张表的关联字段和业务数据字段拆分出来，因为有时候，查询的过程中，只需要做表关联查询，不需要每次都查询到数据，因此这种拆表的方法，可以提高查询效率。")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(1653),alt:"Alt text"}})])])}),[],!1,null,null,null);t.default=r.exports}}]);