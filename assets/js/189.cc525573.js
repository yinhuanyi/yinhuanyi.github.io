(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{2311:function(s,a,n){"use strict";n.r(a);var t=n(9),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一-django框架配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-django框架配置"}},[s._v("#")]),s._v(" 一：Django框架配置")]),s._v(" "),t("h3",{attrs:{id:"一-django中创建app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-django中创建app"}},[s._v("#")]),s._v(" (一)：Django中创建APP")]),s._v(" "),t("ul",[t("li",[s._v("选择Tools --\x3e RUN manage.py Task")])]),s._v(" "),t("p",[t("img",{attrs:{src:n(881),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("创建一个名称为users, courses, students, teachers, schools的APP")]),s._v(" "),t("li",[s._v("创建一个apps的目录，将四个APP都放入这个apps目录")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("startapp users\nstartapp courses\nstartapp teachers\nstartapp schools\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("img",{attrs:{src:n(882),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("由于在apps包里面，会创建很多的app， 例如students。如果你想在项目的任何一个文件随时导入一个app里面的模块，那么需要将apps作为Sources Root， 那么pycharm将会知道，文件的根路径为apps")])]),s._v(" "),t("li",[t("p",[s._v("例如： from students import views ， pycharm是不会报错的。都是如果你使用命令行运行这个Python文件，那么就会报错，因为Python解释器认为：Python模块的搜索路径是从当前运行的Python文件所在目录开始寻找，然后在是项目的根目录, 一级一级找，最后到site-packages目录(第三方包目录)。")])]),s._v(" "),t("li",[t("p",[s._v("那么如果你想使用命令行运行这个文件不报错，且将apps在命令行模式下也是Sources Root的话，需要在settings.py文件中加入一行：")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 目的就是在django的sys.path模块搜索路径中的第一个位置加上apps的路径\nsys.path.insert(0, os.path.join(BASE_DIR, 'apps'))。  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"二-django中创建static静态文件目录和media媒体文件目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-django中创建static静态文件目录和media媒体文件目录"}},[s._v("#")]),s._v(" (二)：Django中创建static静态文件目录和media媒体文件目录")]),s._v(" "),t("ul",[t("li",[s._v("配置static静态文件查找路径")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('1：打开settings文件，你会发现已经指定了static为/static/， \nSTATIC_URL = \'/static/\'\n\n2：但是在template中是无法使用这个路径的，因为没有把这个路径加入到项目的路径中，因此需要把static路径加入到项目的路径中\nSTATICFILES_DIRS = (os.path.join(BASE_DIR, "static"), ) \n\n3: 那么在template中引用这个静态文件就可以这样引用，指定相对路径就好了\n<link rel="stylesheet" type="text/css" href="{% static \'css/course/banner.css\' %}"/> \n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("配置media媒体文件查找路径")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1: 由于在后台可以上传一些图片，那么这些图片保存到哪里呢？编辑settings文件，添加如下配置， 那么用户上传的所有的东西就会保存到这个/media/目录下\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\n\n2：因为图片上传的字段在model中是这样写的, 因此，图片上传，会上传到/media/banner/%Y/%m/目录下\nimage = models.ImageField(max_length=100, upload_to='banner/%Y/%m', verbose_name='用户头像图片')\n\n3：那么在前端的html页面中，我们就可以使用用户上传的图片或其他的可以在html页面显示的东西, 因为数据库中保存了图片上传的路径，{{ MEDIA_URL }}相当于 /media/， {{ request.user.image }} 相当于 user/1.png，那么 {{ MEDIA_URL }}{{ request.user.image }} 相当于 /media/user/1.png\n<img width=\"20\" height=\"20\" src=\"{{ MEDIA_URL }}{{ request.user.image }}\"/>\n\n4：因此，就必须写个路由处理逻辑，在urls.py文件中编辑\nfrom django.views.static import serve\nurl(r'^media/(?P<path>.*)', serve, {'document_root': MEDIA_ROOT})\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ul",[t("li",[s._v("每次创建一个app都需要在settings中将它注册进来, 如果不注册进来，那么执行migration的时候就不会生成表")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 配置安装好的APP\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'users',\n    'courses',\n    'teachers',\n    'schools',\n]\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ul",[t("li",[s._v("运行 Run manage.py Task， 生成数据库中的表")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("执行：\nmakemigrations\nmigrate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports},881:function(s,a,n){s.exports=n.p+"assets/img/2019-03-0210.42.12.9c20bb20.png"},882:function(s,a,n){s.exports=n.p+"assets/img/2019-03-0210.52.08.dcec0ae7.png"}}]);