(window.webpackJsonp=window.webpackJsonp||[]).push([[580],{2629:function(e,t,a){"use strict";a.r(t);var s=a(9),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"一-mysql5-6中建表故障-高版本的mysql没有这个问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-mysql5-6中建表故障-高版本的mysql没有这个问题"}},[e._v("#")]),e._v(" 一：MySQL5.6中建表故障(高版本的MySQL没有这个问题)")]),e._v(" "),a("h3",{attrs:{id:"一-建表的时候出现-specified-key-was-too-long-max-key-length-is-767-bytes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-建表的时候出现-specified-key-was-too-long-max-key-length-is-767-bytes"}},[e._v("#")]),e._v(" "),a("code",[e._v("(一) 建表的时候出现：Specified key was too long; max key length is 767 bytes")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("执行建表语句"),a("code",[e._v("create table test(id int, name varchar(256), key index_test(name))ENGINE=InnoDB DEFAULT CHARSET=utf8")]),e._v(" 报错")])]),e._v(" "),a("li",[a("p",[e._v("由于MySQL默认禁用innodb_large_prefix，不管是什么表，索引键前缀限制为767字节，如果给name varchar(255)类型的字段设置索引，那么由于utf8mb4字符集中每个字符最大的字节数为4bytes，那么 4 * 255 = 1020 > 767，因此就会报上面的错误")])]),e._v(" "),a("li",[a("p",[e._v("解决办法是在不升级数据库的前提下：将name的数据类型改为varchar(100)，或者小于255个字符的varchar类型")])]),e._v(" "),a("li",[a("p",[e._v("那么为什么大家在创建字符串字段的时候喜欢使用varchar(255)呢？由于在MySQL中InnoDB存储引擎索引前缀长度最长是"),a("code",[e._v("767bytes")]),e._v("，那么使用utf8字符集，255 * 3 = 765bytes，正好小于767bytes")])]),e._v(" "),a("li",[a("p",[e._v("但是字符集为")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);