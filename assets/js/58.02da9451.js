(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{2155:function(t,s,n){"use strict";n.r(s);var a=n(9),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一-设置支付宝支付逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-设置支付宝支付逻辑"}},[t._v("#")]),t._v(" 一：设置支付宝支付逻辑")]),t._v(" "),a("h3",{attrs:{id:"一-支付服务与支付宝交互逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-支付服务与支付宝交互逻辑"}},[t._v("#")]),t._v(" (一)：支付服务与支付宝交互逻辑")]),t._v(" "),a("ul",[a("li",[t._v("示意图")])]),t._v(" "),a("p",[a("img",{attrs:{src:n(612),alt:"Alt text"}})]),t._v(" "),a("h3",{attrs:{id:"二-创建私钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-创建私钥"}},[t._v("#")]),t._v(" (二)：创建私钥")]),t._v(" "),a("ul",[a("li",[t._v("在【支付宝开放平台】-> 【开发工具】-> 【Web 在线加密】创建公钥和私钥")])]),t._v(" "),a("p",[a("img",{attrs:{src:n(613),alt:"Alt text"}})]),t._v(" "),a("ul",[a("li",[t._v("可以生成【公钥和私钥】")])]),t._v(" "),a("p",[a("img",{attrs:{src:n(614),alt:"Alt text"}})]),t._v(" "),a("ul",[a("li",[t._v("需要保存自己的私钥[记录下来]")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("MIIEpAIBAAKCAQEAicmwEK8Ya/haMIqvp3D46UhyBi3UGsss/kogATnAZLDSKIWSSJ7YhnW3OAPRWTjd+QYuXvbWK7KPR3wxHHbGeCIDnO98717pBk7UhhDBv0htuwOp6vNvoy1uMatmIy/Ez4hVrX18IRUMXCUF4GySoC0YkK/+G3QQycozYCL/KHMNx0ECKptsuy1hstWG5TF+f6q4eG7o9To9Y+gF2152IkpI2kO48odwtCGByONcuRu8YtR4TsupVwuxoK1JqjzCWjucVHPq0oZPbQf/5JAJKl2oSlJ0XJMjrA+x1PU+JqsTdOVbWMv4m3m5ZIhciX8+e010LK1FQFijlEORmYyb/wIDAQABAoIBAAa+oKewanmehoupvj9sAEMrEKnMxH0rROCNsFNfCFPlc+QX5bk4TVEHohhT14OOjQ8LhmmPm5w3+Vt+cMj752sp/xNHhc4Rz0ZHxY9qcpFyciydWUvu7qAGMUatJSrDw9aEzezYH6Ne7GP2S/tYVTUSAAnVE5M0cz3tb+Zc0DCingVEuoo/97G/TZ1L+XLa/KzCJerxGq9AGp6jv4STf0/YjqpizL/Kn57TTIRDi4EeiwbIvpAXwC9gogVx7Zu/Dc4Eg7VL9N/wusbbEV6pJ1qa+RIeD89tqckUy+4LCiwPEn1nlgiGTQ9ljlpRwjnmKYdUs0d7KQ6W2MxhpY4tHAECgYEA+H+g+clhQTCdnZvZ+t3vktYfCkCQeOLgJfD6aqmi4CfB5AmNglWXpajLVNAQYNzk7ubA2013td99MLBo2XzGo3xIIpxiTUr4vPzw56xqZvub4Kon67OAAlTyiaiwMaSFAuSJnFk6rXflzJnz5WFcxRfOmKU58lPq2vGIWGtYrj8CgYEAjfJ/fUoLaVRgkzQ47xMIgG5Emqjxx4E2MRXZ9nXNJqEqqs4KjTqsK1PhuC3OiJNFyyTz56GzsIERQ84d4+oOk0pLb/+YyKFHxOekzWNbavrcTKVXtOkd4uB74RVekV5MfBjPqUijXI9CY4teeg6RSG59X1hVRqd9J4AP+f4cIkECgYA99uVXJAYiUVMcN/609Z6FyOrYjZz45+nozBxFeKNqrb9Fc7Rbqag04NBDB9btsGdNwzCX/ss5CM+Y0oRypxCJN7ZtGv3QND+uMIyJ2I53u4n1DbkCpzHmYvRPq0a0OkgInqBJ4l4lX15oFIOi0RJm+zbDDYBTkuVfTxcmpS3p1QKBgQCFtmQ/+osLWm9q2yuykaRVjwnTAshW3bHVxTbAArIQ7IrLwTGRXi6m1epv276NSuXY+eNEVD93Se2giL4BXw8B0l+Djis2+y4nHupQi4KnIM566NnY0ivT9xDas42UtFaqI5kiZwlz/INWUAfcRHK431P8h7I0zzuHBQyHusZ3wQKBgQC/WbUVue5aBdDAirxn9ixx6eEmDTdDSrm9G0pKT9Q4BBRbL0bnkADffyuOZA8saG/a5H1kGAjfDNrcy0KZn3ufXrls0i4vVQ+LAgJGBjhaItmUDDdnOYWqGfeYI2692hh8WM6GTOUuOb/GI52d2MQywJQU2JFA05RoidYR+DkgPA==\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("把公钥赋值到支付宝")])]),t._v(" "),a("p",[a("img",{attrs:{src:n(615),alt:"Alt text"}})]),t._v(" "),a("ul",[a("li",[t._v("保存设置后，支付宝会生成一个【支付宝公钥】")])]),t._v(" "),a("p",[a("img",{attrs:{src:n(616),alt:"Alt text"}})]),t._v(" "),a("ul",[a("li",[t._v("此时【应用公钥】就是自己上传到支付宝的公钥，然后支付宝返回一个【支付宝公钥】，支付宝公钥如下")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoiYKlo61qd4rsALtmcpHGsAqnmBc9DT/QUftQkNW23kreiOlpT+SvfMlIACJLxAV83/2bN6QctnfJO3dxC0Pt6l9SghUqt0wpns0IrcHI5gnU7nUKCQ40Q2BRA++bQPiETVADU715fYGpI15YLiz7VwO1R0Y2CqjisJTxvuDbgVS73Z0lsYrCZF9ywn453y8HdxUe25nd7PCZk84VXBXMeajxMpJ6jpWd1+SlCh4/aH2qfTgCdTWcFNitryXbF+qBcHLT+Di6XPhS3YyWrmf8QlQnAp5YsXp88JWJyf0bsQdRU9egAY/NNksUkbbyEc6iCFinOSFqvvOI+oQxn7/LwIDAQAB\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"三-配置回调地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-配置回调地址"}},[t._v("#")]),t._v(" (三)：配置回调地址")]),t._v(" "),a("ul",[a("li",[t._v("在第4步中，支付宝需要把用户支付的结构返回给应用服务器，那么在开发时候，需要使用一个内网穿透，这里还是选择【哲西云】的【断续】功能，进行内网穿透。我这里有一条通道，测试的时候，可以修改内网IP和Port")])]),t._v(" "),a("p",[a("img",{attrs:{src:n(617),alt:"Alt text"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("比如说，我访问"),a("code",[t._v("http://192.168.100.55:8082/health")]),t._v("，只需要访问"),a("code",[t._v("http://e8ybdhoo4p.cdhttp.cn/health")]),t._v("即可。")])]),t._v(" "),a("li",[a("p",[t._v("那么在【授权回调地址】修改为下面的地址")])])]),t._v(" "),a("p",[a("img",{attrs:{src:n(618),alt:"Alt text"}})]),t._v(" "),a("h3",{attrs:{id:"四-在项目中-测试网页支付-沙箱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四-在项目中-测试网页支付-沙箱"}},[t._v("#")]),t._v(" (四)：在项目中，测试网页支付(沙箱)")]),t._v(" "),a("ul",[a("li",[t._v("代码")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('package main\n\nimport (\n\t"fmt"\n\t"github.com/smartwalle/alipay/v3"\n)\n\nfunc main() {\n\tappId := "2016101200669671"\n\tprivateKey := "MIIEpAIBAAKCAQEAicmwEK8Ya/haMIqvp3D46UhyBi3UGsss/kogATnAZLDSKIWSSJ7YhnW3OAPRWTjd+QYuXvbWK7KPR3wxHHbGeCIDnO98717pBk7UhhDBv0htuwOp6vNvoy1uMatmIy/Ez4hVrX18IRUMXCUF4GySoC0YkK/+G3QQycozYCL/KHMNx0ECKptsuy1hstWG5TF+f6q4eG7o9To9Y+gF2152IkpI2kO48odwtCGByONcuRu8YtR4TsupVwuxoK1JqjzCWjucVHPq0oZPbQf/5JAJKl2oSlJ0XJMjrA+x1PU+JqsTdOVbWMv4m3m5ZIhciX8+e010LK1FQFijlEORmYyb/wIDAQABAoIBAAa+oKewanmehoupvj9sAEMrEKnMxH0rROCNsFNfCFPlc+QX5bk4TVEHohhT14OOjQ8LhmmPm5w3+Vt+cMj752sp/xNHhc4Rz0ZHxY9qcpFyciydWUvu7qAGMUatJSrDw9aEzezYH6Ne7GP2S/tYVTUSAAnVE5M0cz3tb+Zc0DCingVEuoo/97G/TZ1L+XLa/KzCJerxGq9AGp6jv4STf0/YjqpizL/Kn57TTIRDi4EeiwbIvpAXwC9gogVx7Zu/Dc4Eg7VL9N/wusbbEV6pJ1qa+RIeD89tqckUy+4LCiwPEn1nlgiGTQ9ljlpRwjnmKYdUs0d7KQ6W2MxhpY4tHAECgYEA+H+g+clhQTCdnZvZ+t3vktYfCkCQeOLgJfD6aqmi4CfB5AmNglWXpajLVNAQYNzk7ubA2013td99MLBo2XzGo3xIIpxiTUr4vPzw56xqZvub4Kon67OAAlTyiaiwMaSFAuSJnFk6rXflzJnz5WFcxRfOmKU58lPq2vGIWGtYrj8CgYEAjfJ/fUoLaVRgkzQ47xMIgG5Emqjxx4E2MRXZ9nXNJqEqqs4KjTqsK1PhuC3OiJNFyyTz56GzsIERQ84d4+oOk0pLb/+YyKFHxOekzWNbavrcTKVXtOkd4uB74RVekV5MfBjPqUijXI9CY4teeg6RSG59X1hVRqd9J4AP+f4cIkECgYA99uVXJAYiUVMcN/609Z6FyOrYjZz45+nozBxFeKNqrb9Fc7Rbqag04NBDB9btsGdNwzCX/ss5CM+Y0oRypxCJN7ZtGv3QND+uMIyJ2I53u4n1DbkCpzHmYvRPq0a0OkgInqBJ4l4lX15oFIOi0RJm+zbDDYBTkuVfTxcmpS3p1QKBgQCFtmQ/+osLWm9q2yuykaRVjwnTAshW3bHVxTbAArIQ7IrLwTGRXi6m1epv276NSuXY+eNEVD93Se2giL4BXw8B0l+Djis2+y4nHupQi4KnIM566NnY0ivT9xDas42UtFaqI5kiZwlz/INWUAfcRHK431P8h7I0zzuHBQyHusZ3wQKBgQC/WbUVue5aBdDAirxn9ixx6eEmDTdDSrm9G0pKT9Q4BBRbL0bnkADffyuOZA8saG/a5H1kGAjfDNrcy0KZn3ufXrls0i4vVQ+LAgJGBjhaItmUDDdnOYWqGfeYI2692hh8WM6GTOUuOb/GI52d2MQywJQU2JFA05RoidYR+DkgPA=="\n\t\n\taliPublicKey := "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoiYKlo61qd4rsALtmcpHGsAqnmBc9DT/QUftQkNW23kreiOlpT+SvfMlIACJLxAV83/2bN6QctnfJO3dxC0Pt6l9SghUqt0wpns0IrcHI5gnU7nUKCQ40Q2BRA++bQPiETVADU715fYGpI15YLiz7VwO1R0Y2CqjisJTxvuDbgVS73Z0lsYrCZF9ywn453y8HdxUe25nd7PCZk84VXBXMeajxMpJ6jpWd1+SlCh4/aH2qfTgCdTWcFNitryXbF+qBcHLT+Di6XPhS3YyWrmf8QlQnAp5YsXp88JWJyf0bsQdRU9egAY/NNksUkbbyEc6iCFinOSFqvvOI+oQxn7/LwIDAQAB"\n\tclient, err := alipay.New(appId, privateKey, false)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\terr = client.LoadAliPayPublicKey(aliPublicKey)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t// 网页支付\n\tvar p = alipay.TradePagePay{}\n\t// 用户支付后，通知接口\n\tp.NotifyURL = "http://e8ybdhoo4p.cdhttp.cn/o/v1/pay/alipay/notify"\n\t//p.ReturnURL = "http://e8ybdhoo4p.cdhttp.cn/o/v1/pay/alipay/return"\n\t// 支付完成后的跳转接口\n\tp.ReturnURL = "http://e8ybdhoo4p.cdhttp.cn/health"\n\tp.Subject = "鞋子"\n\tp.OutTradeNo = "买鞋子"\n\tp.TotalAmount = "10.00"\n\tp.ProductCode = "FAST_INSTANT_TRADE_PAY"\n\n\turl, err := client.TradePagePay(p)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t// 返回地址(访问有点问题)\n\tfmt.Println(url.String())\n\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br")])]),a("ul",[a("li",[t._v("无恒模式打开浏览器，返回上面程序打印的链接，输入"),a("code",[t._v("买家账户和密码")])])]),t._v(" "),a("p",[a("img",{attrs:{src:n(619),alt:"Alt text"}})])])}),[],!1,null,null,null);s.default=e.exports},612:function(t,s,n){t.exports=n.p+"assets/img/2021-06-2510.41.22.80d7e3ec.png"},613:function(t,s,n){t.exports=n.p+"assets/img/2021-06-2510.44.28.ffc5a42b.png"},614:function(t,s,n){t.exports=n.p+"assets/img/2021-06-2510.46.15.9b946293.png"},615:function(t,s,n){t.exports=n.p+"assets/img/2021-06-2511.01.58.43bb21ae.png"},616:function(t,s,n){t.exports=n.p+"assets/img/2021-06-2511.03.23.bab89f0d.png"},617:function(t,s,n){t.exports=n.p+"assets/img/2021-06-2511.33.26.5fbcd361.png"},618:function(t,s,n){t.exports=n.p+"assets/img/2021-06-2511.42.10.1dfb0215.png"},619:function(t,s,n){t.exports=n.p+"assets/img/2021-06-256.47.23.bdea4b3f.png"}}]);