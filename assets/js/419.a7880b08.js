(window.webpackJsonp=window.webpackJsonp||[]).push([[419],{2329:function(s,n,e){"use strict";e.r(n);var a=e(9),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"文件操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件操作"}},[s._v("#")]),s._v(" 文件操作")]),s._v(" "),e("h3",{attrs:{id:"一-文件打开操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-文件打开操作"}},[s._v("#")]),s._v(" (一) 文件打开操作")]),s._v(" "),e("ul",[e("li",[s._v("打开文件的方法：内建open()函数，")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("open(file, mode='r', buffering=None, encoding=None, errors=None, newline=None, closefd=True)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("对于文件操作就是读和写，访问文件的模式有两种，文本模式和二级制模式， buffering是指缓冲大小：-1表示默认大小4096，0表示关闭缓冲区， encoding表示编码方式，None表示默认的编码方式，errors表示编码错误被捕获，如果是errors=ignore，那么出现编码错误将会被忽略，newline表示文件换行的意思，closefd表示是否关闭文件时同时关闭文件描述符。下面给一个读取文件内容的例子")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# file: 需要打开或创建的文件名称，如果不指定路径，默认值当前路径\n# mode: 指定文件操作的模式，默认是r, \n                       r:表示读\n                       w:表示只写\n                       x:创建且写打开一个新文件\n                       a:写打开，如果文件存在，追加写\n                       b:二进制模式\n                       t:默认，文本模式，可以不写，一般都是以文本模式打开文件\n                       +:读写，给只读赋予写的能力，给只写赋予只读的能力\n                       \nf = open(file='./hello.txt')\nresult = f.read()\nf.close()\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("ul",[e("li",[s._v("文件读取示例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("f = open(file='./hello.txt')\nresult = f.read()\nf.write('a')  # 写就会报错\nf.close()\n\nf.read(3) # 表示文件读三个字节，不给值表示直接读到EOF\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("ul",[e("li",[s._v("文件写入示例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("f = open(file='./hello.txt', mode='w')\nf.write('a')\nf.read() # 读就会报错\nf.close()\n\n# x是只写，文件不存在，创建文件，以只写方式打开\nf = open('./test', 'x')\nf.read() # 读会报错\nf.write('a')\nf.close()\n\n# a只写，文件存在，追加内容，文件不存在，只写，追加内容\nf = open('./test', 'a')\nf.read() # 读会报错\nf.write('a')\nf.close()\n\n# 注意：wxa都是只写, t模式是字符流，按照字符编码理解，b是字节流，字节操作是bytes类型\n# + 无法单独使用,用来增强r,w,x,a等功能，但是在获取文件对象是依然是本身的特性\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("h3",{attrs:{id:"二-文件打开操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-文件打开操作"}},[s._v("#")]),s._v(" (二) 文件打开操作")]),s._v(" "),e("ul",[e("li",[s._v("文件指针说明")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mode为r的时候，指针的起始点在0\nmode为a的时候，指针的起始点在EOF\nf.tell()：可以显示指针的当前位置\nf.seek(offset)：移动文件指针的位置，offset指的是偏移的字节\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ul",[e("li",[s._v("指针操作示例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 示例\nf = open('test.txt', 'r+')\nprint(f.tell()) # 文件的起始位置0\nprint(f.read()) # 读文件所有的内容\nprint(f.tell()) # EOF，也就是最后一个字符\nprint(f.seek(2)) # 偏移两个字节\nprint(f.read())\nf.close()\n\n\nf.flush() # 将缓存刷新到文件\nf.write(b'ni hao') \nf.close() # 文件句柄关闭的时候，会将缓存刷新到文件\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h3",{attrs:{id:"三-文件行读取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-文件行读取"}},[s._v("#")]),s._v(" (三) 文件行读取")]),s._v(" "),e("ul",[e("li",[s._v("示例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("f = open('test.txt', 'r+')\nprint(io.DEFAULT_BUFFER_SIZE) # 8192\nprint(f.readline(), '第一行')  # 读取一行\nprint(f.readline(), '第二行')\nprint(f.readlines())          # 读取所有行，且返回列表\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"四-open函数-文件上下文管理器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四-open函数-文件上下文管理器"}},[s._v("#")]),s._v(" (四) open函数 文件上下文管理器")]),s._v(" "),e("ul",[e("li",[s._v("示例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 使用上下文管理器的好处在于保证文件被关闭， 打开文件操作的时候，抛异常也会关闭\nwith open('test.txt') as f:\n    f.write('nihao')\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"五-stringio-和-bytesio"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五-stringio-和-bytesio"}},[s._v("#")]),s._v(" (五) StringIO 和 BytesIO")]),s._v(" "),e("ul",[e("li",[s._v("StringIO示例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 类似文件的缓冲区\nfrom io import StringIO\n\n\ncache_file = StringIO()\nprint(cache_file.write('hello world'))\nprint(cache_file.seek(0))\nprint(cache_file.read())\nprint(cache_file.close())  # 释放缓冲区\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("ul",[e("li",[s._v("BytesIO示例")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 类似文件的缓冲区\nfrom io import BytesIO\nbytes_file = BytesIO()\nbytes_file.write(b'ni hao')\nbytes_file.seek(0)\nprint(bytes_file.read())\nbytes_file.close()\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);