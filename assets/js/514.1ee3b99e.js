(window.webpackJsonp=window.webpackJsonp||[]).push([[514],{2492:function(t,s,n){"use strict";n.r(s);var a=n(9),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"一-概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-概念"}},[t._v("#")]),t._v(" 一：概念")]),t._v(" "),n("h3",{attrs:{id:"一-基本概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-基本概念"}},[t._v("#")]),t._v(" (一)：基本概念")]),t._v(" "),n("ul",[n("li",[t._v("sed流编辑器")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("对标准输出或文件的每一行进行处理的工具\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("语法格式1")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('stdout | sed [option] "pattern command"\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("语法格式2")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('sed [option] "pattern command" file\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h3",{attrs:{id:"二-常用选项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-常用选项"}},[t._v("#")]),t._v(" (二)：常用选项")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("选项")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("含义")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-n")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("只打印模式匹配的行")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-e")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("直接在命令行进行sed编辑，默认选项")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-f")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("编辑动作存在文件中，指定文件执行")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-r")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("使用扩展正则表达式")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("-i")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("直接修改文件内容")])])])]),t._v(" "),n("h3",{attrs:{id:"三-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-示例"}},[t._v("#")]),t._v(" (三)：示例")]),t._v(" "),n("ul",[n("li",[t._v("1：由于sed的模式，会打印原来的行和需要处理的行，所以打印的是两行信息")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# sed 'p' test\nasdfsdf python\nasdfsdf python\nasdfasdf java\nasdfasdf java\nniooni\nniooni\nni\nni\nja\nja\nniddni\nniddni\npy.*\npy.*\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("ul",[n("li",[t._v("2：由于sed -n是只打印模式匹配的行, 所以每一行文本只会打印一行")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# sed -n  'p' test\nasdfsdf python\nasdfasdf java\nniooni\nni\nja\nniddni\npy.*\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("ul",[n("li",[t._v("3：打印test文件中，匹配到python字符串的行，只要匹配到python，这一行就会被输出")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# sed -n  '/python/p' test\nasdfsdf python\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("ul",[n("li",[t._v("4：打印test文件中，匹配到python字符串和java字符串的行，只要匹配到，这一行就会被输出，这里使用的是-e选项，指定sed的编辑模式和命令")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# sed -n -e  '/python/p' -e '/java/p'  test\nasdfsdf python\nasdfasdf java\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("ul",[n("li",[t._v("5：也可以使用扩展正则表达式，使用“或”连接")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# sed -nr '/python|java/p' test\nasdfsdf python\nasdfasdf java\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("ul",[n("li",[t._v("6：也可以把sed的编辑命令写在文件中")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("新建一个edit.sed文件，文件内容如下\n/python/p\n/java/p\n/ni/p\n\n执行结果如下\n[root@iZwz988mpdr1aoZ etc]# sed -n -f ./edit.sed test\nasdfsdf python\nasdfasdf java\nniooni\nni\nniddni\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("ul",[n("li",[t._v("7：sed的查找替换(比较重要) "),n("code",[t._v("s/python/golang/g")]),t._v("是一个command，"),n("code",[t._v("p")]),t._v("也是一个command，两个command之间使用"),n("code",[t._v(";")]),t._v("隔开")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# 这里的s表示select，g表示globo，p表示print\n# 使用了-i选项，表示文件也会被修改\nsed -ni 's/python/golang/g;p' test\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("h3",{attrs:{id:"二-sed中的patter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-sed中的patter"}},[t._v("#")]),t._v(" 二：sed中的patter")]),t._v(" "),n("h3",{attrs:{id:"一-patter的基本语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-patter的基本语法"}},[t._v("#")]),t._v(" (一)：patter的基本语法")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("匹配模式")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("含义")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("10command")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配到第10行")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("10,20command")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配从第10行开始，到第20行结束")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("10,+5command")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配从第10行开始，到16行结束")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("/pattern1/command (工作中使用最多)")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配到pattern1的行")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("/pattern1/,/pattern2/command  (工作中使用最多)")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配到pattern1的行开始，到匹配到pattern2的行结束，如果pattern2匹配不到那么直接匹配文件结尾结束")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("10,/pattern1/command")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配从第10行开始，到匹配到pattern1的行结束")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("/pattern1/,10command")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配到pattern1的行开始，到第10行匹配结束")])])])]),t._v(" "),n("h3",{attrs:{id:"二-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-示例"}},[t._v("#")]),t._v(" (二)：示例")]),t._v(" "),n("ul",[n("li",[t._v("打印出/etc/passwd下无法登陆的用户")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# 在pattern中有/的情况，需要使用\\进行转义\n[root@iZwz988mpdr1aoZ etc]# sed -n '/\\/sbin\\/nologin/p' /etc/passwd\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nmail:x:8:12:mail:/var/spool/mail:/sbin/nologin\noperator:x:11:0:operator:/root:/sbin/nologin\ngames:x:12:100:games:/usr/games:/sbin/nologin\nftp:x:14:50:FTP User:/var/ftp:/sbin/nologin\nnobody:x:99:99:Nobody:/:/sbin/nologin\nsystemd-network:x:192:192:systemd Network Management:/:/sbin/nologin\ndbus:x:81:81:System message bus:/:/sbin/nologin\npolkitd:x:999:998:User for polkitd:/:/sbin/nologin\nsshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin\npostfix:x:89:89::/var/spool/postfix:/sbin/nologin\nchrony:x:998:996::/var/lib/chrony:/sbin/nologin\nntp:x:38:38::/etc/ntp:/sbin/nologin\ntcpdump:x:72:72::/:/sbin/nologin\nnscd:x:28:28:NSCD Daemon:/:/sbin/nologin\nnginx:x:997:995:Nginx web server:/var/lib/nginx:/sbin/nologin\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])]),n("ul",[n("li",[t._v("打印出/etc/passwd中以root开头的行")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# sed -n  '/^root/p' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n\n\n[root@iZwz988mpdr1aoZ etc]# grep \"^root\" /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("ul",[n("li",[t._v("打印出/etc/passwd中以root开头的行, 到以nobody开头的行")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# sed -n '/^root/,/^nobody/p' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\nshutdown:x:6:0:shutdown:/sbin:/sbin/shutdown\nhalt:x:7:0:halt:/sbin:/sbin/halt\nmail:x:8:12:mail:/var/spool/mail:/sbin/nologin\noperator:x:11:0:operator:/root:/sbin/nologin\ngames:x:12:100:games:/usr/games:/sbin/nologin\nftp:x:14:50:FTP User:/var/ftp:/sbin/nologin\nnobody:x:99:99:Nobody:/:/sbin/nologin\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("h3",{attrs:{id:"三-sed中的command编辑命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-sed中的command编辑命令"}},[t._v("#")]),t._v(" 三：sed中的command编辑命令")]),t._v(" "),n("h3",{attrs:{id:"一-command的基本命令分类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-command的基本命令分类"}},[t._v("#")]),t._v(" (一)：command的基本命令分类")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("类别")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("编辑命令")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("含义")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("查询")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("p")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("打印")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("增加")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("a")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("行后追加")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("增加")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("i")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("行前追加")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("增加")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("r")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("外部文件读入，行后追加")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("增加")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("w")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("匹配行写入外部文件")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("删除")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("d")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("删除")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("修改")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("s/old/new")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("将行内第一个old替换为new")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("修改")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("s/old/new/g")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("将行内全部old替换为new")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("修改")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("s/old/new/2g")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("将行内前2个old替换为new")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("修改")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("s/old/new/ig")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("将行内全部old替换为new，且忽略大小写")])])])]),t._v(" "),n("h3",{attrs:{id:"二-示例-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-示例-2"}},[t._v("#")]),t._v(" (二)：示例")]),t._v(" "),n("ul",[n("li",[t._v("1：在匹配到的行后追加字符串")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# 是在匹配到的行后面追加一行\n[root@iZwz988mpdr1aoZ etc]# sed -i '/java/a I love Java language' test\n\n[root@iZwz988mpdr1aoZ etc]# cat test\nasdfsdf golang\nasdfasdf java\nI love Java language\nniooni\nni\nja\nniddni\npy.*\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("h3",{attrs:{id:"四-sed中的后项引用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-sed中的后项引用"}},[t._v("#")]),t._v(" 四：sed中的后项引用")]),t._v(" "),n("h3",{attrs:{id:"一-概念-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-概念-2"}},[t._v("#")]),t._v(" (一)：概念")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("sed的command可以通过()的方式，提取匹配到的内容\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h3",{attrs:{id:"二-示例-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-示例-3"}},[t._v("#")]),t._v(" (二)：示例")]),t._v(" "),n("ul",[n("li",[t._v("在匹配到的字符串后面, 加上s字符串, 这里的&表示匹配到的所有的字符串")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# cat test\nFlinkJavaTo Java\nFlinkPythonTo Python\nFlinkScalaTo Scala\nFlinkGolangTo Golang \n\n[root@iZwz988mpdr1aoZ etc]#  sed -i  's/Flink.*To/&s/g' test\n\n[root@iZwz988mpdr1aoZ etc]# cat test\nFlinkJavaTos Java\nFlinkPythonTos Python\nFlinkScalaTos Scala\nFlinkGolangTos Golang\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("ul",[n("li",[t._v("将Flink后面的字符串，和love前面的字符串全部替换为Catalina")]),t._v(" "),n("li",[t._v("这里的\\1代表第一个括号中匹配到的内容，\\2代表第二个括号中匹配到的内容")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[root@iZwz988mpdr1aoZ etc]# cat test\nFlinkJavaTos nilove  Java \nFlinkPythonTos talove  Python\nFlinkScalaTos wolove  Scala\nFlinkGolangTos wholove  Golang \n\n[root@iZwz988mpdr1aoZ etc]# sed -i 's/\\(Flink\\).*s.*\\(love\\)/\\1Catalina Catalina\\2/g' test\n\n[root@iZwz988mpdr1aoZ etc]# cat test\nFlinkCatalina Catalinalove  Java \nFlinkCatalina Catalinalove  Python\nFlinkCatalina Catalinalove  Scala\nFlinkCatalina Catalinalove  Golang \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("h3",{attrs:{id:"三-sed在脚本中的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-sed在脚本中的使用"}},[t._v("#")]),t._v(" (三)：sed在脚本中的使用")]),t._v(" "),n("ul",[n("li",[t._v("在脚本中，如果sed的comand引用了变量，那么使用双引号即可，如果是单引号，那么变量会被认为是字符串")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('#!/bin/bash\n\nold_str=Java\nnew_str=Javascript\n\n# 脚本中使用双引号\nsed -i "s/$old_str/$new_str/g" test\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("h3",{attrs:{id:"五-sed中的查询详解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五-sed中的查询详解"}},[t._v("#")]),t._v(" 五：sed中的查询详解")]),t._v(" "),n("h3",{attrs:{id:"一-获取-etc-my-cnf中每个section段的字段个数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-获取-etc-my-cnf中每个section段的字段个数"}},[t._v("#")]),t._v(" (一)：获取/etc/my.cnf中每个section段的字段个数")]),t._v(" "),n("ul",[n("li",[t._v("输出结果为：")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("1: mysqld 3\n2: mysqld_safe 2\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("ul",[n("li",[t._v("脚本")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('#!/bin/bash\n\nFILE_NAME=/etc/my.cnf\n\n# 获取所有的section\nfunction get_all_segments {\n   ret=`sed -n \'/\\[.*\\]/p\' $FILE_NAME | sed -r \'s/\\[|\\]//g\'`\n   echo $ret\n}\n\n# 获取segment中的字段\nfunction count_iterms_in_segment {\n  # $1是参数，但是在sed的pattern中，引用变量值需要使用单引号\n  items=`sed -n \'/\\[\'$1\'\\]/,/\\[.*\\]/p\' $FILE_NAME  | grep -v "^#" | grep -v "^$" | grep -v "\\[.*\\]" | grep -v "^!"`\n  index=0\n  for item in $items; do\n        # index自增\n        index=`expr $index + 1`\n  done\n  echo $index \n}\n\nnumber=0\nfor segment in `get_all_segments`; do \n  number=`expr $number + 1`\n  items_count=`count_iterms_in_segment $segment`\n  echo "$number: $segment $items_count" \ndone\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br")])]),n("ul",[n("li",[t._v("包含的知识点")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("1：for循环\n\tfor循环可以循环一个字符串列表，例如\n\t\tmysqld\n\t\tmysqld_safe\n\t\n2：expr在变量自增中的使用\n\tindex=0\n\tindex=`expr $index + 1`\n\n3：sed的''单引号中，如果需要引用变量的值，那么需要变量需要加上单引号或将sed的单引号改为双引号\nsed -n '/\\['$1'\\]/p' /etc/my.cnf\n\n4：grep 匹配空白行\ngrep '^[[:space:]]*$'  test\n\n4：sed删除文件空白行\nsed -i '/^$/d' test （错误的，不严谨, 如果空白行有空白字符就匹配不到）\nsed '/^[[:space:]]*$/d' test\n\n5：sed删除文件开头的空白字符, 注意：这里的+表示一个或多个，但是在基本正则表达式中必须是\\+, Python语言中的+表示一个或多个是扩展正则表达式\nsed -i 's/^[[:space:]]\\+//g' test.txt\nsed -i 's/^[[:blank:]]\\+//g' test\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])]),n("h3",{attrs:{id:"六-sed中的修改详解-查找替换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六-sed中的修改详解-查找替换"}},[t._v("#")]),t._v(" 六：sed中的修改详解（查找替换）")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("编辑命令")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("含义")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("/pattern1/s/old/new/")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("替换匹配到的pattern1的内容,将old修改为new")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("/pattern1/,/pattern2/s/old/new/")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("从匹配到的pattern1的行到pattern2的行，替换old为new")])])])]),t._v(" "),n("h3",{attrs:{id:"一-sed修改nginx的配置-这样可以用来修改nginx的灰度发布流量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-sed修改nginx的配置-这样可以用来修改nginx的灰度发布流量"}},[t._v("#")]),t._v(" (一)：sed修改NGINX的配置(这样可以用来修改NGINX的灰度发布流量)")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("找到对应的upstream，在upstream中注释对应的IP")])]),t._v(" "),n("li",[n("p",[t._v("nginx.conf配置如下")])])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("upstream backend {\n    server 192.168.1.10 weight=1;\n    server 192.168.1.11 weight=2;\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("ul",[n("li",[t._v("命令如下")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("sed -i '/^upstream backend {/,/\\}/s/\\(.* 192.168.1.10\\)/#\\1/g' nginx.conf\nupstream backend {\n#    server 192.168.1.10 weight=1;\n    server 192.168.1.11 weight=2;\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("ul",[n("li",[t._v("如果nginx.conf如下，需要删除前面的#号")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("upstream backend {\n#    server 192.168.1.10 weight=1;\n    server 192.168.1.11 weight=2;\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("ul",[n("li",[t._v("命令如下")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("sed -i '/^upstream backend {/,/\\}/s/#\\(.*192.168.1.10\\)/\\1/g' nginx.conf\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h3",{attrs:{id:"二-关于基于-slb-nginx-的灰度发布过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-关于基于-slb-nginx-的灰度发布过程"}},[t._v("#")]),t._v(" (二)：关于基于 SLB + Nginx 的灰度发布过程")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("1：先在Nginx的uptream中将一组流量摘除")])]),t._v(" "),n("li",[n("p",[t._v("2：等后台应用程序日志中没有请求日志的时候，将新版本的应用程序发布上去，且开放第一组流量，将第二组流量摘除")])]),t._v(" "),n("li",[n("p",[t._v("3：当第二组应用程序日志没有请求的时候，发布新版本到第二组，开放第二组的流量")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);