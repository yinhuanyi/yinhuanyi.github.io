(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{2227:function(s,a,e){"use strict";e.r(a);var t=e(9),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一-http-template-模板渲染"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-http-template-模板渲染"}},[s._v("#")]),s._v(" 一：http/template 模板渲染")]),s._v(" "),t("h3",{attrs:{id:"一-模板渲染的使用规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-模板渲染的使用规则"}},[s._v("#")]),s._v(" (一)：模板渲染的使用规则")]),s._v(" "),t("ul",[t("li",[s._v("Golang的模板渲染与Python、PHP一样，先定义好的HTML文件，通过传递对象到模板中，渲染出不同的页面")])]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Golang的模板文件，一般以tmpl或gtpl结尾，通过点号（.）来访问传递到模板中的对象，可以通过{{ .FieldName }}来访问对象的字段\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"二-解析模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-解析模板"}},[s._v("#")]),s._v(" (二)：解析模板")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("解析模板文件有多种，解析一个模板文件、解析多个模板文件、使用通配符匹配模板文件进行解析。解析模板文件之前可以先创建模板，也可以直接解析模板")])]),s._v(" "),t("li",[t("p",[s._v("解析一个模板文件")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 创建模板\nfunc New(name string) *Template\n\n// 再解析模板\nfunc (t *Template) Parse(text string) (*Template, error)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("解析一个或多个模板")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 直接解析\nfunc ParseFiles(filenames ...string) (*Template, error)\n\n// 创建模板对象后解析\nfunc (t *Template) ParseFiles(filenames ...string) (*Template, error)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("使用通配符匹配模板文件进行解析")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 直接解析\nfunc ParseGlob(pattern string) (*Template, error)\n\n// 创建模板对象后解析\nfunc (t *Template) ParseGlob(pattern string) (*Template, error)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"三-渲染模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-渲染模板"}},[s._v("#")]),s._v(" (三)：渲染模板")]),s._v(" "),t("ul",[t("li",[s._v("渲染模板就是给模板传递数据对象，将模板进行渲染")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 直接传递data对象\nfunc (t *Template) Execute(wr io.Writer, data interface{}) error\n\n// 传递data对象的同时，指定模板名称，name不是对象名称，name是模板名称，因为解析模板的时候可能匹配到多个模板\nfunc (t *Template) ExecuteTemplate(wr io.Writer, name string, data interface{}) error\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"四-一个简单的示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-一个简单的示例"}},[s._v("#")]),s._v(" (四)：一个简单的示例")]),s._v(" "),t("ul",[t("li",[s._v("index.gptl")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<!doctype html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport"\n          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>Document</title>\n</head>\n<body>\n\n  <p>你好，我是 {{ .name }}</p>\n  <p>今年 {{ .age }}</p>\n\n</body>\n</html>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ul",[t("li",[s._v("main.go")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('func sayHello(w http.ResponseWriter, r *http.Request) {\n\t// 解析指定文件生成模板对象\n\ttmpl, err := template.ParseFiles("/Users/yinhuanyi/Yinhuanyi_Project/myoauth2/test1/index.gptl")\n\tif err != nil {\n\t\tfmt.Println("create template failed, err:", err)\n\t\treturn\n\t}\n\t// 利用给定数据渲染模板，并将结果写入w\n\tuser := map[string]string{\n\t\t"name": "Robby",\n\t\t"age" : "30",\n\t}\n\n\n\ttmpl.Execute(w, user)\n}\n\nfunc main() {\n\thttp.HandleFunc("/", sayHello)\n\n\terr := http.ListenAndServe(":8888", nil)\n\tif err != nil {\n\t\tfmt.Println("HTTP server failed,err:", err)\n\t\treturn\n\t}\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("ul",[t("li",[s._v("访问结果")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(750),alt:"Alt text"}})]),s._v(" "),t("h2",{attrs:{id:"二-模板语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-模板语法"}},[s._v("#")]),s._v(" 二：模板语法")]),s._v(" "),t("h3",{attrs:{id:"一-基本语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-基本语法"}},[s._v("#")]),s._v(" (一)：基本语法")]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("`{{ . }}`返回数据对象\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"二-注释"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-注释"}},[s._v("#")]),s._v(" (二)：注释")]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("`{{ /* a comment */ }}`模板的注释，执行时会忽略\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"三-传递pipeline管道数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-传递pipeline管道数据"}},[s._v("#")]),s._v(" (三)：传递pipeline管道数据")]),s._v(" "),t("ul",[t("li",[s._v("模板语法中，"),t("code",[s._v("| 的意义与Linux命令行意义类似")]),s._v("，| 前面的命令会将运算结果传递给后一个命令的最后一个位置")])]),s._v(" "),t("h3",{attrs:{id:"四-变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-变量"}},[s._v("#")]),s._v(" (四)：变量")]),s._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("`$data := {{.}}`：$obj是变量的名字，在后续的代码中就可以使用该变量了\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports},750:function(s,a,e){s.exports=e.p+"assets/img/2021-10-305.00.15.dabc254f.png"}}]);