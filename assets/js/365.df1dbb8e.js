(window.webpackJsonp=window.webpackJsonp||[]).push([[365],{2220:function(s,n,a){"use strict";a.r(n);var e=a(9),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("hr"),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("Golang - net/http包")])]),s._v(" "),a("ul",[a("li",[a("strong",[a("code",[s._v("一：HTTP客户端")])]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("（一）：基本的HTTP/HTTPS请求")])]),s._v(" "),a("ul",[a("li",[s._v("1：Get、Head、Post和PostForm函数发出HTTP/HTTPS请求")]),s._v(" "),a("li",[s._v("2：程序在使用完response后必须关闭回复的主体")]),s._v(" "),a("li",[s._v("3：GET请求示例")]),s._v(" "),a("li",[s._v("4：http.Client控制请求头")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("（二）：带参数的GET请求示例")])]),s._v(" "),a("ul",[a("li",[s._v("1：关于GET请求的参数需要使用Go语言内置的net/url这个标准库来处理")]),s._v(" "),a("li",[s._v("2：对应的Server端HandlerFunc如下")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("（三）：POST请求示例")])]),s._v(" "),a("ul",[a("li",[s._v("1：发送POST请求的示例代码如下")]),s._v(" "),a("li",[s._v("2：对应的Server端HandlerFunc如下")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("（四）：自定义Client")])]),s._v(" "),a("ul",[a("li",[s._v("1：要管理HTTP客户端的头域、重定向策略和其他设置，创建一个Client")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("（五）：自定义Transport")])]),s._v(" "),a("ul",[a("li",[s._v("1：要管理代理、TLS配置、keep-alive、压缩和其他设置，创建一个Transport")]),s._v(" "),a("li",[s._v("2：提示")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("（六）：服务端")])]),s._v(" "),a("ul",[a("li",[s._v("1：默认的Server示例")]),s._v(" "),a("li",[s._v("2：自定义Server")])])])])])])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"一-http客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-http客户端"}},[s._v("#")]),s._v(" 一：HTTP客户端")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://darjun.github.io/2021/07/13/in-post/godailylib/nethttp/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"一-基本的http-https请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-基本的http-https请求"}},[s._v("#")]),s._v(" (一)：基本的HTTP/HTTPS请求")]),s._v(" "),a("ul",[a("li",[s._v("Get、Head、Post和PostForm函数发出HTTP/HTTPS请求")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package main\n\nimport (\n    "net/http"\n    "net/url"\n)\n\nfunc main() {\n\n    resp, err := http.Get("http://example.com/")\n    resp, err := http.Post("http://example.com/upload", "image/jpeg", &buf)\n    resp, err := http.PostForm("http://example.com/form", url.Values{"key": {"Value"}, "id": {"123"}})\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("ul",[a("li",[s._v("程序在使用完response后必须关闭回复的主体")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package main\n\nimport (\n    "fmt"\n    "io/ioutil"\n    "net/http"\n)\n\nfunc main() {\n\n    resp, err := http.Get("http://www.baidu.com")\n    if err != nil {\n        panic("Error")\n    }\n\n    // 关闭资源\n    defer resp.Body.Close()\n\n    // 读取response的信息, 返回byte[]\n    body, err := ioutil.ReadAll(resp.Body)\n\n    fmt.Printf("%s", body)\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("ul",[a("li",[s._v("GET请求示例")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('response, err := http.Get("http://www.baidu.com")\nif err != nil {\n    panic(err)\n}\n\ndefer response.Body.Close()\n\nret, err := httputil.DumpResponse(response, true)\nif err != nil {\n    panic(err)\n}\nfmt.Printf("%s\\n", ret)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ul",[a("li",[s._v("http.Client控制请求头")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 请求地址\nreq, err := http.NewRequest(\n    http.MethodGet,\n    "http://www.baidu.com",\n    nil)\n\n// 添加请求头\nreq.Header.Add("User-Agent", "Mobile")\n\n// 使用默认的客户端发送请求()\nresponse, err := http.DefaultClient.Do(req)\n\n// 使用自定义的客户端发送请求()\nclient := http.Client{\n    CheckRedirect: func(\n        req *http.Request,\n        via []*http.Request) error {\n        fmt.Println("Redirect:-------", req)\n        return nil\n    },\n}\n\nresponse, err := client.Do(req)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h3",{attrs:{id:"二-带参数的get请求示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-带参数的get请求示例"}},[s._v("#")]),s._v(" (二)：带参数的GET请求示例")]),s._v(" "),a("ul",[a("li",[s._v("关于GET请求的参数需要使用Go语言内置的net/url这个标准库来处理")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('func main() {\n\n    apiUrl := "http://127.0.0.1:9090/get"\n\n    // 解析裸url到结构体\n    u, err := url.ParseRequestURI(apiUrl)\n    if err != nil {\n        fmt.Printf("parse url requestUrl failed, err:%v\\n", err)\n    }\n\n    // 初始化url命令行参数\n    data := url.Values{}\n    data.Set("name", "小王子")\n    data.Set("age", "18")\n    // 将请求参数编码，赋值给RawQuery属性\n    u.RawQuery = data.Encode()\n    // url结构体\n    fmt.Println(u.String())\n\n    // 发送get请求\n    resp, err := http.Get(u.String())\n    if err != nil {\n        fmt.Printf("post failed, err:%v\\n", err)\n        return\n    }\n    // 关闭资源\n    defer resp.Body.Close()\n    // 读取数据\n    b, err := ioutil.ReadAll(resp.Body)\n    if err != nil {\n        fmt.Printf("get resp failed, err:%v\\n", err)\n        return\n    }\n    fmt.Println(string(b))\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])]),a("ul",[a("li",[s._v("对应的Server端HandlerFunc如下")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('func getHandler(w http.ResponseWriter, r *http.Request) {\n    defer r.Body.Close()\n    // 获取查询参数\n    data := r.URL.Query()\n    fmt.Println(data.Get("name"))\n    fmt.Println(data.Get("age"))\n    // 反引号创建json字符串\n    answer := `{"status": "ok"}`\n    // 将json字符串转换为[]byte类型返回\n    w.Write([]byte(answer))\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"三-post请求示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-post请求示例"}},[s._v("#")]),s._v(" (三)：POST请求示例")]),s._v(" "),a("ul",[a("li",[s._v("发送POST请求的示例代码如下：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('func main() {\n\n    url := "http://127.0.0.1:9090/post"\n    // 如果是HTMLfor表单数据\n    // contentType := "application/x-www-form-urlencoded"\n    // data := "name=小王子&age=18"\n\n    // 如果是json\n    contentType := "application/json"\n    data := `{"name":"小王子","age":18}`\n    resp, err := http.Post(url, contentType, strings.NewReader(data))\n    if err != nil {\n        fmt.Printf("post failed, err:%v\\n", err)\n        return\n    }\n    defer resp.Body.Close()\n    b, err := ioutil.ReadAll(resp.Body)\n    if err != nil {\n        fmt.Printf("get resp failed, err:%v\\n", err)\n        return\n    }\n    fmt.Println(string(b))\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("ul",[a("li",[s._v("对应的Server端HandlerFunc如下")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('func postHandler(w http.ResponseWriter, r *http.Request) {\n    defer r.Body.Close()\n\n    // 这里其实可以判断一下form类型，看看是表单还是json提交的post请求\n    // 1. 请求类型是application/x-www-form-urlencoded时解析form数据\n    r.ParseForm()\n    fmt.Println(r.PostForm) // 打印form数据\n    fmt.Println(r.PostForm.Get("name"), r.PostForm.Get("age"))\n\n\n    // 2. 请求类型是application/json时从r.Body读取数据\n    b, err := ioutil.ReadAll(r.Body)\n    if err != nil {\n        fmt.Printf("read request.Body failed, err:%v\\n", err)\n        return\n    }\n\n    fmt.Println(string(b))\n    answer := `{"status": "ok"}`\n    w.Write([]byte(answer))\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"四-自定义client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四-自定义client"}},[s._v("#")]),s._v(" (四)：自定义Client")]),s._v(" "),a("ul",[a("li",[s._v("要管理HTTP客户端的头域、重定向策略和其他设置，创建一个Client：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('func main() {\n\n    client := &http.Client{\n        CheckRedirect: redirectPolicyFunc,\n    }\n    resp, err := client.Get("http://example.com")\n\n    req, err := http.NewRequest("GET", "http://example.com", nil)\n\n    req.Header.Add("If-None-Match", `W/"wyzzy"`)\n\n    resp, err := client.Do(req)\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"五-自定义transport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五-自定义transport"}},[s._v("#")]),s._v(" (五)：自定义Transport")]),s._v(" "),a("ul",[a("li",[s._v("要管理代理、TLS配置、keep-alive、压缩和其他设置，创建一个Transport：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('func main() {\n\n    tr := &http.Transport{\n        TLSClientConfig: &tls.Config{RootCAs: pool},\n        DisableCompression: true,\n    }\n\n    client := &http.Client{Transport: tr}\n    resp, err := client.Get("https://example.com")\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("提示")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Client和Transport类型都可以安全的被多个goroutine同时使用。出于效率考虑，应该一次建立、尽量重用。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"六-服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六-服务端"}},[s._v("#")]),s._v(" (六)：服务端")]),s._v(" "),a("ul",[a("li",[s._v("默认的Server示例")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// http server\n\nfunc sayHello(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintln(w, "Hello Robby")\n}\n\nfunc main() {\n    http.HandleFunc("/", sayHello)\n    err := http.ListenAndServe(":9090", nil)\n    if err != nil {\n        fmt.Printf("http server failed, err:%v\\n", err)\n        return\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("ul",[a("li",[s._v("自定义Server")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('s := &http.Server{\n    Addr:           ":8080",\n    Handler:        myHandler,\n    ReadTimeout:    10 * time.Second,\n    WriteTimeout:   10 * time.Second,\n    MaxHeaderBytes: 1 << 20,\n}\n\nlog.Fatal(s.ListenAndServe())\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"二-其他知识点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-其他知识点"}},[s._v("#")]),s._v(" 二：其他知识点")]),s._v(" "),a("h3",{attrs:{id:"一-url-values的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-url-values的使用"}},[s._v("#")]),s._v(" (一)：url.Values的使用")]),s._v(" "),a("ul",[a("li",[s._v("在url.Values本质是"),a("code",[s._v("map[string][]string")]),s._v("数据类型，可以调用"),a("code",[s._v("url.Values.Encode()")]),s._v("进行url参数编码，调用"),a("code",[s._v("url.ParseQuery(encodeurlString)")]),s._v("进行解码")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('func main() {\n\tform := url.Values{}\n\tform.Add("name", "Robby")\n\tform.Add("age", "20")\n\tform.Add("hobby", "running")\n\tencodeForm := form.Encode()\n\tfmt.Println(form)\n\tfmt.Println(encodeForm)\n\tif decodeForm, err := url.ParseQuery(encodeForm); err != nil {\n\t\tfmt.Println(err)\n\t} else {\n\t\tfmt.Println(decodeForm)\n\t}\n\n}\n\n\n// 输出结果：\nmap[age:[20] hobby:[running] name:[Robby]]\nage=20&hobby=running&name=Robby\nmap[age:[20] hobby:[running] name:[Robby]]\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);