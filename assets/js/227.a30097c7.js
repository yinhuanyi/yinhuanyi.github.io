(window.webpackJsonp=window.webpackJsonp||[]).push([[227],{2141:function(s,a,e){"use strict";e.r(a);var t=e(9),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一-分布式事务中的技术难点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-分布式事务中的技术难点"}},[s._v("#")]),s._v(" 一：分布式事务中的技术难点")]),s._v(" "),t("h3",{attrs:{id:"一-事务的四大特征-acid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-事务的四大特征-acid"}},[s._v("#")]),s._v(" (一)：事务的四大特征 ACID")]),s._v(" "),t("ul",[t("li",[s._v("原子性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("功能不可再分，要么全部成功，要么全部失败\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("一致性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("一次事务中，多次操作的数据中间状态，对其他事务不可见.\n\n原子性和一致性的侧重点不同：\n\t①：原子性关注状态，要么全部成功，要么全部失败，不存在部分成功的状态\n\t②：一致性关注数据可见性，中间状态的数据对外部不可见，只有初始状态和最终状态的数据对外部可见\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("隔离性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("多个用户并发访问数据库时，一个用户的事务不能够被另外一个用户的事务所干扰，多个并发事务之间，数据要相互隔离\n如果不考虑隔离性，事务在并发过程中会出现 脏读、不可重复读、幻读\n\nMySQL的隔离级别：读未提交、读已提交、可重复读，串行化\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("持久性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("内存的数据持久化到硬盘中\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"二-分布式事务的-acid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-分布式事务的-acid"}},[s._v("#")]),s._v(" (二)：分布式事务的 ACID")]),s._v(" "),t("ul",[t("li",[s._v("分布式系统无法满足ACID")])]),s._v(" "),t("h3",{attrs:{id:"三-cap理论"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-cap理论"}},[s._v("#")]),s._v(" (三)：CAP理论")]),s._v(" "),t("ul",[t("li",[s._v("一致性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("所有节点，同一时间的数据完全一致\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("可用性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("服务一直可用\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("分区容错性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("分布式系统在节点故障时候，依然满足【数据一致性】和【数据可用性】\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"四-base理论-base理论是cap的权衡结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-base理论-base理论是cap的权衡结果"}},[s._v("#")]),s._v(" (四)：base理论:  base理论是cap的权衡结果")]),s._v(" "),t("ul",[t("li",[s._v("基本可用（Basically Available）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1：响应时间上的损失：正常情况下的搜索引擎0.5秒即返回给用户结果，而基本可用的搜索引擎可以在2秒作用返回结果。\n\n2：功能上的损失：在一个电商网站上，正常情况下，用户可以顺利完成每一笔订单。但是到了大促期间，为了保护购物系统的稳定性，部分消费者可能会被引导到一个降级页面。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("软状态（Soft State）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1：软状态指的是：允许系统中的数据存在中间状态，并认为该状态不影响系统的整体可用性，即允许系统在多个不同节点的数据副本存在数据延时。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("最终一致性(单机是【强一致性】，分布式是【弱一致性】)（Eventually Consistent）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1：上面说软状态，然后不可能一直是软状态，必须有个时间期限。在期限过后，应当保证所有副本保持数据一致性，从而达到数据的最终一致性，这个时间期限取决于网络延时、系统负载、数据复制方案设计等等因素\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"二-常见的分布式事务的解决方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-常见的分布式事务的解决方法"}},[s._v("#")]),s._v(" 二：常见的分布式事务的解决方法")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1：2pc两阶段提交(使用了数据库的事务，需要加锁，有性能影响)\n2：TCC补偿模式（将数据库加锁部分，放在业务逻辑层来做，）\n3：基于本地消息表实现最终统一 (需要在本地维护一张消息可靠表)\n4：最大努力通知 (支付宝是使用这种方式，提供一个通知，再提供一个查询接口)\n5：基于可靠消息最终一致性方案（经常被使用）\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"一-基于可靠消息最终一致性方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-基于可靠消息最终一致性方案"}},[s._v("#")]),s._v(" (一)：基于可靠消息最终一致性方案")]),s._v(" "),t("p",[t("img",{attrs:{src:e(588),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("这种方案解决了："),t("code",[s._v("消息发送出去是可靠的")]),s._v("，但是引入了rocketmq组件")])])])}),[],!1,null,null,null);a.default=n.exports},588:function(s,a,e){s.exports=e.p+"assets/img/2021-06-264.56.38.5d4dcaa3.png"}}]);