(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{1569:function(s,a,e){s.exports=e.p+"assets/img/spark2.24f9aefe.png"},1570:function(s,a,e){s.exports=e.p+"assets/img/21.ce0911fa.png"},1571:function(s,a,e){s.exports=e.p+"assets/img/20170127140924672.52bb9344.png"},2592:function(s,a,e){"use strict";e.r(a);var t=e(9),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一-所有服务的启动方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-所有服务的启动方法"}},[s._v("#")]),s._v(" 一：所有服务的启动方法")]),s._v(" "),t("h3",{attrs:{id:"一-启动顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-启动顺序"}},[s._v("#")]),s._v(" (一)启动顺序")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1：zkServer.sh start： 3台\n2：start-dfs.sh: node1 50070端口\n3：hadoop-daemon.sh start zkfc: node1、node2\n4: start-yarn.sh: node1 8088端口\n5: systemctl start mariadb: node1\n6: start-hbase.sh : node1  60010端口\n7: hbase-daemon.sh start thrift: node1\n8: nohup hiveserver2 &: node3\n9: cd /opt/modules/kafka_2.11-2.1.1 && kafka-server-start.sh -daemon  config/server.properties: 3台\n10: supervisor -d: node3 8888端口\n11: start-all.sh: node3节点启动spark\n12：nohup hive --service metastore & ：node3启动thrift端口\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"二-spark概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-spark概述"}},[s._v("#")]),s._v(" 二：Spark概述")]),s._v(" "),t("h3",{attrs:{id:"一-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-概述"}},[s._v("#")]),s._v(" (一)概述")]),s._v(" "),t("p",[t("img",{attrs:{src:e(1569),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("数据源与数据落地")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1570),alt:"Alt text"}})]),s._v(" "),t("p",[t("img",{attrs:{src:e(1571),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1: 每一个application有自己的executor的进程，它们相互隔离，每个executor中可以有多个task线程。这样可以很好的隔离各个applications,各个spark applications 不能分享数据，除非把数据写到外部系统\n\n2：SparkContext对象可以视为Spark应用程序的入口，主程序被称为driver program，SparkContext可以与不同种类的集群资源管理器(Cluster Manager），例如Hadoop Yarn、Mesos等 进行通信，从而分配到程序运行所需的资源，获取到集群运行所需的资源后，SparkContext将得到集群中其它工作节点（Worker Node） 上对应的Executors （不同的Spark应用程序有不同的Executor，它们之间也是独立的进程，Executor为应用程序提供分布式计算及数据存储功能），之后SparkContext将应用程序代码分发到各Executors，最后将任务（Task）分配给executors执行。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"三-spark编译-节点内存必须是2-5g以上"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-spark编译-节点内存必须是2-5g以上"}},[s._v("#")]),s._v(" 三：Spark编译(节点内存必须是2.5G以上)")]),s._v(" "),t("h3",{attrs:{id:"一-下载spark-2-2-0-tgz源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-下载spark-2-2-0-tgz源码"}},[s._v("#")]),s._v(" (一)下载spark-2.2.0.tgz源码")]),s._v(" "),t("ul",[t("li",[s._v("在node3上编译安装spark")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('1: spark的编译需要Maven 3.3.9 or newer and Java 8+，不同的版本要求不一样\n\n2：在node3上编译spark，jdk已经配置好了，maven配置添加环境变量(编译的时候，已经使用maven 3.3.9)\nvi /etc/profile.d/maven.sh\nexport MAVEN_HOME=/opt/modules/apache-maven-3.6.1\nexport PATH=/opt/modules/apache-maven-3.6.1/bin:$PATH\nexport MAVEN_OPTS="-Xmx2g -XX:MaxPermSize=1024M -XX:ReservedCodeCacheSize=1024m"\n\n3: vi /opt/modules/spark-2.2.0/dev/make-distribution.sh\nVERSION=2.2.0\nSCALA_VERSION=2.11.8\nSPARK_HADOOP_VERSION=2.5.0\nSPARK_HIVE=1\n\n4: 默认的maven仓库地址在 ${user.home}/.m2/repository下\n\n5：编译(文档上的命令是：./dev/make-distribution.sh --name custom-spark --pip --r --tgz -Psparkr -Phadoop-2.7 -Phive -Phive-thriftserver -Pmesos -Pyarn)\ncd /opt/modules/spark-2.2.0\n./dev/make-distribution.sh --name custom-spark --tgz -Phadoop-2.5 -Phive -Phive-thriftserver -Pyarn\n\n6: 将编译生成的spark-2.2.0-bin-custom-spark.tgz拷贝到/opt/modules目录解压\n\n7: 配置spark环境变量\nvi /etc/profile.d/spark.sh\nexport SPARK_HOME=/opt/modules/spark-2.2.0-bin-custom-spark\nexport PATH=/opt/modules/spark-2.2.0-bin-custom-spark/bin:$PATH\n. /etc/profile.d/spark.sh\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h2",{attrs:{id:"四-scala安装与配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-scala安装与配置"}},[s._v("#")]),s._v(" 四：Scala安装与配置")]),s._v(" "),t("h3",{attrs:{id:"一-安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-安装配置"}},[s._v("#")]),s._v(" (一)安装配置")]),s._v(" "),t("ul",[t("li",[s._v("安装在node3")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1: 配置Scala环境变量\nvi /etc/profile.d/scala.sh\nexport SCALA_HOME=/opt/modules/scala-2.11.8\nexport PATH=/opt/modules/scala-2.11.8/bin:$PATH\n. /etc/profile.d/scala.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"五-spark-standalone配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五-spark-standalone配置"}},[s._v("#")]),s._v(" 五：Spark standalone配置")]),s._v(" "),t("h3",{attrs:{id:"一-启动spark"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-启动spark"}},[s._v("#")]),s._v(" (一)启动spark")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1: 启动spark\nspark-shell \n\n2: 打开监控页面http://192.168.43.203:4040\n\n3：spark启动效果\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /___/ .__/\\_,_/_/ /_/\\_\\   version 2.2.0\n      /_/\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);