(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1669:function(s,a,t){s.exports=t.p+"assets/img/2020-12-0110.48.25.38d567e9.png"},1670:function(s,a,t){s.exports=t.p+"assets/img/2020-12-0111.27.56.217b276a.png"},1671:function(s,a,t){s.exports=t.p+"assets/img/2020-12-0111.31.26.262cc348.png"},1672:function(s,a,t){s.exports=t.p+"assets/img/2020-12-0111.33.57.2dc095b2.png"},1673:function(s,a,t){s.exports=t.p+"assets/img/2020-12-0111.36.31.80c9fcb8.png"},1674:function(s,a,t){s.exports=t.p+"assets/img/2020-12-0111.37.08.47d27a08.png"},1675:function(s,a,t){s.exports=t.p+"assets/img/2020-12-022.32.47.cc3733ee.png"},1676:function(s,a,t){s.exports=t.p+"assets/img/2021-01-011.02.37.d67617fa.png"},2633:function(s,a,t){"use strict";t.r(a);var r=t(9),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h2",{attrs:{id:"一-pxc-集群中间件-mycat"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-pxc-集群中间件-mycat"}},[s._v("#")]),s._v(" 一：PXC 集群中间件 MyCat")]),s._v(" "),r("h3",{attrs:{id:"一-安装mycat前期准备"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-安装mycat前期准备"}},[s._v("#")]),s._v(" "),r("code",[s._v("(一) 安装MyCat前期准备")])]),s._v(" "),r("ul",[r("li",[s._v("安装JDK(最好把jdk的devel包安装上，可以使用jps命令查看Java进程)")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("# centos\napt install openjdk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n# ubuntu\napt install openjdk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("jdk\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("配置JAVA_HOME环境变量")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("vi "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jvm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("openjdk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("amd64"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin\nsource "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("h3",{attrs:{id:"二-再创建一个3节点的pxc集群"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-再创建一个3节点的pxc集群"}},[s._v("#")]),s._v(" "),r("code",[s._v("(二) 再创建一个3节点的PXC集群")])]),s._v(" "),r("ul",[r("li",[r("p",[s._v("第一个PXC集群的IP为：yw4-1、yw4-2、yw5-2")])]),s._v(" "),r("li",[r("p",[s._v("第二个PXC集群的IP为：yw1-1,、yw1-2、 yw3-1")])]),s._v(" "),r("li",[r("p",[s._v("两个PXC集群，作为MyCat的两个分片")])]),s._v(" "),r("li",[r("p",[s._v("分别在两个PXC集群的test库中创建t_user表")])])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CREATE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TABLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("t_user")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("id")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UNSIGNED")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("username")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("password")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("tel")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("char")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("locked")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("tinyint")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UNSIGNED")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KEY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("id")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USING")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BTREE")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INDEX")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("idx_username")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("username")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USING")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BTREE")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n\t"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UNIQUE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INDEX")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("unq_username")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("username")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USING")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BTREE")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br")])]),r("h3",{attrs:{id:"三-下载mycat"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-下载mycat"}},[s._v("#")]),s._v(" "),r("code",[s._v("(三) 下载MyCat")])]),s._v(" "),r("ul",[r("li",[s._v("选择Linux版本下载")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("http"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dl"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".7")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".7")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ul",[r("li",[s._v("安装java8 JDK版本，且设置JAVA_HOME环境变量")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("vi "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jvm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("openjdk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("amd64\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jre"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATH")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("profile"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("MyCat目录介绍")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("bin：二进制命令\ncatlet：\nconf：配置文件 \nlib：库文件  \nlogs：日志  \nversion"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("ul",[r("li",[s._v("conf目录中配置文件讲解(MyCat可以把配置信息存储在ZK的)")])]),s._v(" "),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"center"}},[s._v("文件")]),s._v(" "),r("th",{staticStyle:{"text-align":"center"}},[s._v("作用")]),s._v(" "),r("th",{staticStyle:{"text-align":"center"}},[s._v("修改内容")])])]),s._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("rule.xml")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("切分算法")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("修改mod-long分片数量为2")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("server.xml")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("虚拟MySQL")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("修改用户名、密码、逻辑库")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("schema.xml")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("数据库连接、读写分离、负载均衡、数据表映射")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("连接、读写分离、负载均衡、数据表映射")])]),s._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"center"}},[s._v("log4j2.xml")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}},[s._v("Mycat日志相关的配置，例如日志输出格式、日志级别等")]),s._v(" "),r("td",{staticStyle:{"text-align":"center"}})])])]),s._v(" "),r("ul",[r("li",[s._v("将MyCat拷贝到"),r("code",[s._v("yw5-1")]),s._v("的/usr/local/目录下，开始配置MyCat服务")])]),s._v(" "),r("h2",{attrs:{id:"二-配置mycat"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-配置mycat"}},[s._v("#")]),s._v(" 二：配置MyCat")]),s._v(" "),r("h3",{attrs:{id:"一-配置的关系"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-配置的关系"}},[s._v("#")]),s._v(" "),r("code",[s._v("(一) 配置的关系")])]),s._v(" "),r("ul",[r("li",[s._v("常用配置之间的关系")])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1669),alt:"Alt text"}})]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("\t应用连接Mycat服务时，Mycat首先会通过server"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml中的配置信息进行用户认证。用户通过验证后，所看到的逻辑库、逻辑表都是schema"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml中所配置的。当使用了水平切分时，Mycat会通过rule"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml里配置的规则来定位具体的物理数据库位置，从而完成写入"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("读取数据。\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"二-server-xml配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-server-xml配置"}},[s._v("#")]),s._v(" "),r("code",[s._v("(二) server.xml配置")])]),s._v(" "),r("ul",[r("li",[s._v("格式如下")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" $"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("key"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("表示配置属性的名称，$"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("表示该配置属性的值 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${key}"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("$"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("ul",[r("li",[s._v("配置 Mycat 服务端口示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serverPort"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("server.xml文件常见的系统参数举例")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("xml version"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v(" encoding"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTF-8"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server.dtd"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("server xmlns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://io.mycat/"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 这里是系统的相关参数属性 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 服务连接端口 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serverPort"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8066")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 服务管理端口 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"managerPort"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9066")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 服务监听的ip "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bindIp"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为需要密码登陆、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为不需要密码登陆；默认为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("，设置为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("则需要指定默认账户"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nonePasswordLogin"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 前端连接的写队列大小 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"frontWriteQueueSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 设置字符集编码 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"charset"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("utf8"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 的进程数量 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"processors"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 闲置连接超时时间，单位：毫秒 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idleTimeout"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800000")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 默认最大返回的数据集大小 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultMaxLimit"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 允许的最大包大小 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxPacketSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857600")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" \n        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("遇上没有实现的报文")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unknown command"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("就会报错、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为忽略该报文，返回ok报文。\n        在某些mysql客户端存在客户端已经登录的时候还会继续发送登录报文"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mycat会报错"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("该设置可以绕过这个错误\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ignoreUnknownCommand"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useHandshakeV10"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"removeGraveAccent"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为开启实时统计、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为关闭 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useSqlStat"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property###  \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为开启全加班一致性检测、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为关闭 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useGlobleTableCheck"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SQL")]),s._v(" 执行超时 单位"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("秒"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sqlExecuteTimeout"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sequnceHandlerType"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("必须带有"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCATSEQ_")]),s._v("或者 mycatseq_进入序列匹配流程 注意"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCATSEQ_")]),s._v("有空格的情况"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sequnceHandlerPattern"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("next\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("value\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v("\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCATSEQ_")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\\w"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\\"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\\s"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 子查询中存在关联查询的情况下"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("检查关联字段中是否有分片字段 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("默认 "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"subqueryRelationshipCheck"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sequenceHanlderClass"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sequence"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("handler"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("HttpIncrSequenceHandler"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("默认为type "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" DirectByteBufferPool "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" type "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" ByteBufferArena "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" type "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" NettyBufferPool "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"processorBufferPoolType"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("分布式事务开关，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为不过滤分布式事务，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为过滤分布式事务（如果分布式事务内只涉及全局表，则不过滤），"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("为不过滤分布式事务"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("但是记录分布式事务日志"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"handleDistributedTransactions"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" off heap "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" merge"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("order"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("group"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("limit  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("开启；"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("关闭 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useOffHeapForMerge"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"memoryPageSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("k"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spillsFileBufferSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("k"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useStreamOutput"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"systemReserveMemorySize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("384")]),s._v("m"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("是否采用zookeeper协调切换  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useZKSwitch"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("如果为 "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("的话 严格遵守隔离级别"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("不会在仅仅只有select语句的时候在事务中切换连接"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"strictTxIsolation"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Mycat连接数据库时使用的隔离级别\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 读未提交\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 读已提交\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 可重复读\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 串行化\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"txIsolation"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useZKSwitch"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("如果为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("的话"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("涉及多个DataNode的catlet任务不会跨线程执行"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"parallExecute"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 用户名root "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" defaultAccount"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\t    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 密码 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 运行该用户访问的逻辑库，可配置多个允许访问的逻辑库，使用逗号分隔 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"schemas"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 是否只读 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"readOnly"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultSchema"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 配置一个虚拟用户user用户，只读 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"schemas"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"readOnly"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultSchema"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br"),r("span",{staticClass:"line-number"},[s._v("84")]),r("br"),r("span",{staticClass:"line-number"},[s._v("85")]),r("br"),r("span",{staticClass:"line-number"},[s._v("86")]),r("br"),r("span",{staticClass:"line-number"},[s._v("87")]),r("br"),r("span",{staticClass:"line-number"},[s._v("88")]),r("br"),r("span",{staticClass:"line-number"},[s._v("89")]),r("br"),r("span",{staticClass:"line-number"},[s._v("90")]),r("br"),r("span",{staticClass:"line-number"},[s._v("91")]),r("br")])]),r("ul",[r("li",[s._v("除了配置对库的权限可能还不够，有时候我们需要配置用户对某些表的访问权限。如下示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 用户名 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mall"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 密码 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 允许该用户访问的逻辑库 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"schemas"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("mall_db"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("db1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("db2"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 表级 "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DML")]),s._v(" 权限配置，check属性表示是否开启该配置 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("privileges check"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 特别权限应用的逻辑库 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("schema name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mall_db"')]),s._v(" dml"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0110"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" \n                配置用户对该表的访问权限，dml属性用于指定权限位，\n                如果table标签没有配置该属性的话，默认取schema标签的dml属性值，\n                剩余没有配置的其他表默认也是取schema标签的dml属性值\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user_table"')]),s._v(" dml"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0000"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("table"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"order_table"')]),s._v(" dml"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1111"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("table"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("privileges"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br")])]),r("ul",[r("li",[r("p",[s._v("dml属性配置的数字是权限位，分别对应着insert,update,select,delete四种权限。例如，当dml的值为0110时，表示拥有update和select权限，不具有insert和delete权限。所以权限位为1时代表拥有对应的操作权限，为0时代表没有该操作权限。")])]),s._v(" "),r("li",[r("p",[s._v("加密明文密码: server.xml的密码都是明文的，可以使用MyCat自带的加密工具对密码进行加密")])])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("# "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("：代表的是mycat用户登录密码加密（"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 则是dataHost加密）\n# root是用户名，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("是明文密码\njava "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cp lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".7")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DecryptUtil "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("root"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("执行成功后，会得到一个加密后的字符串")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("GO0bnFVWrAuFgr1JMuMZkvfDNyTpoiGU7n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Wlsa151CirHQnANVk3NzE3FErx8v6pAcO0ctX3xFecmSr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("976")]),s._v("QA"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ul",[r("li",[s._v("复制该字符串，替换配置文件中的明文密码，如下示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" defaultAccount"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 需要声明使用的是加密后的密码 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usingDecrypt"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("GO0bnFVWrAuFgr1JMuMZkvfDNyTpoiGU7n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Wlsa151CirHQnANVk3NzE3FErx8v6pAcO0ctX3xFecmSr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("976")]),s._v("QA"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("全局防火墙设置：在server.xml文件中也可以设置全局SQL防火墙，也就是添加白名单")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 全局"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SQL")]),s._v("防火墙设置 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("白名单可以使用通配符"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("或着"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("例如"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.*"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("例如"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.*"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("例如"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.*"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("例如"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1*7.*"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("这些配置情况下对于"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("都能以root账户登录"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("firewall"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("whitehost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1*7.0.0.*"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("whitehost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("blacklist check"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("blacklist"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("firewall"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br")])]),r("h3",{attrs:{id:"三-log4j2-xm配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-log4j2-xm配置"}},[s._v("#")]),s._v(" "),r("code",[s._v("(三) log4j2.xm配置")])]),s._v(" "),r("ul",[r("li",[s._v("Pattern 标签：用于配置 Mycat 日志输出格式，默认如下：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("PatternLayout"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Pattern"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("d"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("yyyy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MM")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dd "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ss"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SSS")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("p "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("t"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("l"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("m"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Pattern"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PatternLayout"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("d"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("yyyy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MM")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dd "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ss"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SSS")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("：日志的时间格式\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("p：输出的日志的级别\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("t：输出日志的线程名称\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("l：日志输出语句所在的代码位置\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("m：输出代码中指定的日志内容\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("n：输出一个换行符\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("ul",[r("li",[s._v("level 属性：用于配置 Mycat 的日志输出级别，默认为info级别：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("asyncRoot level"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"info"')]),s._v(" includeLocation"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"四-rule-xml配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四-rule-xml配置"}},[s._v("#")]),s._v(" "),r("code",[s._v("(四) rule.xml配置")])]),s._v(" "),r("ul",[r("li",[s._v("当我们需要通过Mycat实现数据分片时就得用到rule.xml配置文件，该文件用于配置：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：水平分片的分片规则\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：分片规则所对应的分片函数\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("这是一个分片规则的配置示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" name属性指定分片规则的名称，必须在 rule"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml 文件中是唯一的 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-mod-4_id"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 指定使用表中的哪个列进行分片 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 指定表的分片算法，取值为"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("标签的name属性 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br")])]),r("ul",[r("li",[r("p",[s._v("Tips：分片规则的名称尽量具有实际意义，命名格式可以参考：{分片算法名称}-{分片数量}_{分片列}；上面的示例就是采用的这种命名格式")])]),s._v(" "),r("li",[r("p",[s._v("上面示例中所提到的"),r("code",[s._v("<function>")]),s._v("标签是用于配置表的分片算法或者说分片函数，如下示例：")])])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" name属性指定分片算法的名称，同样需要是唯一的；"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v("属性指定该算法的具体实现类 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-mod-4"')]),s._v("\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByHashMod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 要分片的数据库节点数量，必须指定，否则没法分片 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("ul",[r("li",[s._v("每个分片算法的所需参数可能不一样，所以property标签是可以有多个的，其属性也因具体的分片算法而异。如下示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partbyday"')]),s._v("\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dateFormat"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("yyyy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MM")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dd"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sNaturalDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sBeginDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sEndDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sPartionDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("ul",[r("li",[s._v("常用的几个分片算法")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("Mycat 内置了非常多的分片算法，并且我们也可以针对实际情况自行开发属于自己的分片算法。我们来看看常用分片算法都有哪些：\n\nPartitionByMod：简单取模，直接通过列值进行取模得出分片位置\nPartitionByHashMod：哈希取模，先将列值进行hash运算之后再取模得出分片位置\nPartitionByFileMap：分片枚举，根据枚举值对数据进行分片，例如在异地多活的场景中通过地区id进行数据分片的场景\nPartitionByPrefixPattern：字符串范围取模，根据长字符串的前面几位进行取模分片\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("ul",[r("li",[s._v("完整的rule.xml配置（这里只修改了mod-long算法的分片数，因为在schema.xml文件中使用了mod-long算法）")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("xml version"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v(" encoding"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTF-8"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("rule "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule.dtd"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("rule xmlns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://io.mycat/"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule1"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("func1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-date"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("createTime"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partbyday"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule2"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("func1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-intfile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("sharding_id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("int"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auto-sharding-long"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("rang"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("long"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("long"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-murmur"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("murmur"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"crc32slot"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("crc32slot"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-month"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("create_time"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partbymonth"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest-month-calldate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("calldate"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("latestMonth"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auto-sharding-rang-mod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("rang"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jch"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("jump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("consistent"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"murmur"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByMurmurHash"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"seed"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"virtualBucketTimes"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("160")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"crc32slot"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByCRC32PreSlot"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 要分片的数据库节点数量，必须指定，否则没法分片 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-int"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByFileMap"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("int"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rang-long"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.AutoPartitionByLong"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("autopartition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("long"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 由于使用了取模算法，且分片为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("，因此count为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByMod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"func1"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByLong"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partitionCount"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partitionLength"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latestMonth"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.LatestMonthPartion"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"splitOneDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partbymonth"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByMonth"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dateFormat"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("yyyy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MM")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dd"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sBeginDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partbyday"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dateFormat"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("yyyy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MM")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dd"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sNaturalDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sBeginDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sEndDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sPartionDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rang-mod"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByRangeMod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("range"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jump-consistent-hash"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByJumpConsistentHash"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"totalBuckets"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br"),r("span",{staticClass:"line-number"},[s._v("84")]),r("br"),r("span",{staticClass:"line-number"},[s._v("85")]),r("br"),r("span",{staticClass:"line-number"},[s._v("86")]),r("br"),r("span",{staticClass:"line-number"},[s._v("87")]),r("br"),r("span",{staticClass:"line-number"},[s._v("88")]),r("br"),r("span",{staticClass:"line-number"},[s._v("89")]),r("br"),r("span",{staticClass:"line-number"},[s._v("90")]),r("br"),r("span",{staticClass:"line-number"},[s._v("91")]),r("br"),r("span",{staticClass:"line-number"},[s._v("92")]),r("br"),r("span",{staticClass:"line-number"},[s._v("93")]),r("br"),r("span",{staticClass:"line-number"},[s._v("94")]),r("br"),r("span",{staticClass:"line-number"},[s._v("95")]),r("br"),r("span",{staticClass:"line-number"},[s._v("96")]),r("br"),r("span",{staticClass:"line-number"},[s._v("97")]),r("br"),r("span",{staticClass:"line-number"},[s._v("98")]),r("br"),r("span",{staticClass:"line-number"},[s._v("99")]),r("br"),r("span",{staticClass:"line-number"},[s._v("100")]),r("br"),r("span",{staticClass:"line-number"},[s._v("101")]),r("br"),r("span",{staticClass:"line-number"},[s._v("102")]),r("br"),r("span",{staticClass:"line-number"},[s._v("103")]),r("br"),r("span",{staticClass:"line-number"},[s._v("104")]),r("br"),r("span",{staticClass:"line-number"},[s._v("105")]),r("br"),r("span",{staticClass:"line-number"},[s._v("106")]),r("br"),r("span",{staticClass:"line-number"},[s._v("107")]),r("br"),r("span",{staticClass:"line-number"},[s._v("108")]),r("br"),r("span",{staticClass:"line-number"},[s._v("109")]),r("br"),r("span",{staticClass:"line-number"},[s._v("110")]),r("br"),r("span",{staticClass:"line-number"},[s._v("111")]),r("br"),r("span",{staticClass:"line-number"},[s._v("112")]),r("br"),r("span",{staticClass:"line-number"},[s._v("113")]),r("br"),r("span",{staticClass:"line-number"},[s._v("114")]),r("br"),r("span",{staticClass:"line-number"},[s._v("115")]),r("br"),r("span",{staticClass:"line-number"},[s._v("116")]),r("br"),r("span",{staticClass:"line-number"},[s._v("117")]),r("br"),r("span",{staticClass:"line-number"},[s._v("118")]),r("br"),r("span",{staticClass:"line-number"},[s._v("119")]),r("br"),r("span",{staticClass:"line-number"},[s._v("120")]),r("br"),r("span",{staticClass:"line-number"},[s._v("121")]),r("br"),r("span",{staticClass:"line-number"},[s._v("122")]),r("br"),r("span",{staticClass:"line-number"},[s._v("123")]),r("br"),r("span",{staticClass:"line-number"},[s._v("124")]),r("br"),r("span",{staticClass:"line-number"},[s._v("125")]),r("br"),r("span",{staticClass:"line-number"},[s._v("126")]),r("br"),r("span",{staticClass:"line-number"},[s._v("127")]),r("br"),r("span",{staticClass:"line-number"},[s._v("128")]),r("br"),r("span",{staticClass:"line-number"},[s._v("129")]),r("br"),r("span",{staticClass:"line-number"},[s._v("130")]),r("br"),r("span",{staticClass:"line-number"},[s._v("131")]),r("br"),r("span",{staticClass:"line-number"},[s._v("132")]),r("br"),r("span",{staticClass:"line-number"},[s._v("133")]),r("br"),r("span",{staticClass:"line-number"},[s._v("134")]),r("br")])]),r("h3",{attrs:{id:"五-rule-xml中常用分片算法介绍"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#五-rule-xml中常用分片算法介绍"}},[s._v("#")]),s._v(" "),r("code",[s._v("(五) rule.xml中常用分片算法介绍")])]),s._v(" "),r("ul",[r("li",[r("strong",[s._v("1: PartitionByMod：简单取模分片算法的工作原理")])])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1670),alt:"Alt text"}})]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("在图中有两个数据库，每个数据库就是一个分片，所以使用分片列的值对"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("进行取模，就能得出分片位置\n\n配置示例：\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long-2_id"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("long"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long"')]),s._v(" \n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByMod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 取模的基数，也就是分片数量 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n\n总结：\n简单，数据分布均匀，适用于整数类型的列，不能用于非整型的列\n计算方式：分片列 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" 分片基数\n实现类的全名：io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("function"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PartitionByMod\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br")])]),r("ul",[r("li",[r("strong",[s._v("2: PartitionByHashMod: 当需要取模的列为非整型时，就可以使用哈希取模分片算法。其工作原理如下图：")])])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1671),alt:"Alt text"}})]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("对分片列的值进行hash运算，得出一个整数型的数值，然后对分片数量“count”进行取模，就可以得到分片位置\n\n配置示例：\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-mod-2_login_name"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("login_name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-mod"')]),s._v("\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByHashMod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n总结：\n可以用于多种数据类型的分片列，如字符串、日期等\n分片没有简单取模算法均匀，因为存在hash重复的情况。两个相同的数据进行hash运算后的数值是一样的，那么取模后得出来的分片位置也就一样\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("计算方式：hash")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("分片列"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" 分片基数\n实现类的全名：io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("function"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PartitionByHashMod\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br")])]),r("ul",[r("li",[r("strong",[s._v("3: PartitionByFileMap：前两种分片算法都是通过算法本身去计算出分片位置，是无法人工控制的。如果需要人工控制分片位置时，就可以使用到分片枚举算法。该算法使得我们可以指定一些枚举值来对分片位置进行控制，其实也就相当于是人工指定了某些数据应该到哪个分片。例如，某张表中有个存储用户所在区域id的列，我们希望将区域id与数据库所在的区域进行映射，以实现区域id为1的数据被分片到区域1数据库中，区域id为2的数据被分片到区域2数据库中，以此类推。在这种场景下就可以使用分片枚举算法，其工作原理如下图：")])])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1672),alt:"Alt text"}})]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("通过mapFile配置一个分片关系映射，其格式为key"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("value，key为枚举，value为数据节点的索引。图中的枚举就是area_id，一个area_id对应着一个数据节点。没有配置映射关系的area_id则会被分片到"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT_NODE")]),s._v("所对应的数据节点。\n\n配置示例：\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-int_area_id"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("area_id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("int"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-int"')]),s._v("\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByFileMap"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mapFile 文件名，位于config目录下 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("int"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 指定mapFile中枚举的数据类型，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为整型；非"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("则为字符串类型 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 是否启用默认节点，大于等于"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为启用；小于等于"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为不启用 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultNode"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\nTips：数据节点的索引是从"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("开始的，在编辑mapFile时需要注意这一点\n\n总结：\n可以根据枚举值指定数据存储的位置\n需要在$"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCAT_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf目录下增加mapFile来配置枚举值同节点的映射关系\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("计算方式：hash")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("分片列"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" 分片基数\n实现类的全名：io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("function"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PartitionByFileMap\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br")])]),r("ul",[r("li",[r("strong",[s._v("4: PartitionByPrefixPattern: 以上所介绍到的分片算法都是根据列进行分片的，在实际工作中我们可能会遇到这样一个需求：需要通过字符串的前几位或后几位进行分片。例如，通过订单号的前五位进行分片计算，或按用户的姓氏进行分片。在这种场景下，就可以使用字符串范围取模分片算法。例如，需要对ABCDEFGHI这个字符串的前三位进行分片计算，其计算过程如下图：")])])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1673),alt:"Alt text"}})]),s._v(" "),r("ul",[r("li",[s._v("对指定的字符串范围分别进行ascii码计算并求和，然后对配置的求模基数进行取模计算，最后根据mapFile里配置的取值范围与数据节点索引的映射关系得出分片的数据节点。因此，mapFile需要配置所有可能的取值范围，否则找不到对应的数据节点就会报错。")])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1674),alt:"Alt text"}})]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("配置示例：\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-prefix-pattern_login_name"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("login_name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("sharding"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("by"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("prefix"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pattern"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-prefix-pattern"')]),s._v("\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByPrefixPattern"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mapFile 文件名，位于config目录下 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("prefix"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("partition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pattern"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 求模基数 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"patternValue"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 字符串范围，这里为前两位 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prefixLength"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n总结：\n\n可以根据指定字符串的前"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("N")]),s._v("个字符确定存储位置\n需要在$"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCAT_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf目录下增加mapFile来配置取模范围同节点的映射关系\n实现类的全名：io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("function"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PartitionByPrefixPattern\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br")])]),r("h3",{attrs:{id:"六-schema-xml配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#六-schema-xml配置"}},[s._v("#")]),s._v(" "),r("code",[s._v("(六) schema.xml配置")])]),s._v(" "),r("ul",[r("li",[s._v("用途")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：配置逻辑库及逻辑表\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：配置逻辑表所存储的数据节点\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：配置数据节点所对应的物理数据库服务器信息\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("schema 标签：schema 标签用于定义逻辑库，示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("schema name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TESTDB"')]),s._v(" checkSQLschema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" sqlMaxLimit"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),s._v(" randomDataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" checkSQLschema属性判断是否检查发给Mycat的"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SQL")]),s._v("是否含有库名，为"),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("时会将"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SQL")]),s._v("中的库名删除掉\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name属性定义逻辑库的名字，必须唯一不能重复\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" sqlMaxLimit属性用于限制返回结果集的行数，值为"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("时表示关闭该限制。如果没有开启限制则默认取server"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml里配置的限制\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" randomDataNode属性定义将一些随机语句发送到该数据节点中\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("ul",[r("li",[s._v("table 标签: 使用了schema 标签定义逻辑库之后，还需要使用table 标签定义逻辑表。示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("schema name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TESTDB"')]),s._v(" checkSQLschema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" sqlMaxLimit"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),s._v(" randomDataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 多表定义 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"travelrecord,address"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2,dn3"')]),s._v(" rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auto-sharding-long"')]),s._v(" splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 单表定义 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"oc_call"')]),s._v(" primaryKey"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1$0-743"')]),s._v(" rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest-month-calldate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name 属性定义逻辑表的名字，必须唯一不能重复且需要与数据库中的物理表名一致。使用逗号分割配置多个表，即多个表使用这个配置\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" primaryKey 属性指定逻辑表中的主键，也是需要与物理表的主键一致\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" dataNode 属性指定物理表所在数据节点的名称，配置多个数据节点时需按索引顺序并使用逗号分隔，或指定一个索引范围：dn1$"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("743")]),s._v("。注意数据节点定义之后，顺序不能再发生改变，否则会导致数据混乱\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" rule 属性用于指定分片规则名称，对应rule"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml中的"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("lt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("gt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("标签的name属性，如无需分片可以不指定\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" splitTableNames 属性定义是否允许多个表的定义\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("dataNode 标签: dataNode 标签用于定义数据节点，数据节点指向的是存储逻辑表的物理数据库。示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost1"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db1"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn2"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost1"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db2"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn3"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost1"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db3"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 可以配置一个范围 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1$0-743"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost1"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db$0-743"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name 属性定义数据节点的名称，必须唯一\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" dataHost 属性指定分片所在的物理主机\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" database 属性指定物理数据库的名称\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("dataHost 标签：dataHost 标签用于定义后端物理数据库主机信息，该标签内有两个子标签，可以定义一组数据库主机信息。例如，定义一组主从集群结构的数据库主机信息：")])]),s._v(" "),r("p",[r("img",{attrs:{src:t(1675),alt:"Alt text"}})]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：writeHost标签配置写实例，即主从中的master节点\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：readHost 标签配置读实例，即主从中的salve节点\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：readHost是writeHost的子标签，与writeHost有绑定关系\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("在一个dataHost内可以定义多个writeHost和readHost。但是，如果writeHost指定的后端数据库宕机，那么这个writeHost绑定的所有readHost都将不可用。另一方面，由于这个writeHost宕机系统会自动的检测到，并切换到备用的writeHost上去。配置示例：")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataHost name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost1"')]),s._v(" maxCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1000"')]),s._v(" minCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n          writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" dbType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v(" dbDriver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"native"')]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("  slaveThreshold"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("select "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 可以配置多个写实例 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("\n               password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost:3306"')]),s._v(" \n                  user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br")])]),r("ul",[r("li",[s._v("dataHost 标签属性")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name 属性用于定义主机名称，必须唯一\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" maxCon 属性指定每个读"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("写实例连接池的最大连接数。也就是说，标签内嵌套的writeHost、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" readHost 标签都会使用这个属性的值来实例化出连接池的最大连接数\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" minCon 属性指定每个读写实例连接池的最小连接数，即初始化连接池的大小\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" dbType 属性指定后端连接的数据库类型，目前支持二进制的mysql协议，还有其他使用"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JDBC")]),s._v("连接的数据库\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" dbDriver 属性指定连接后端数据库使用的驱动，目前可选的值有native和"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JDBC")]),s._v("\nslaveThreshold 属性用于定义主从复制延时阈值，当Seconds_Behind_Master ### slaveThreshold时，读写分离筛选器会过滤掉此Slave机器，防止读到很久之前的旧数据\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" balance 属性指定读写分离的负载均衡类型，目前的取值有"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 种：\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("：不开启读写分离机制，所有读操作都发送到当前可用的 writeHost 上\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：全部的readHost与stand by writeHost参与select语句的负载均衡\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：所有读操作都随机在writeHost、readhost 上分发\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：所有读请求随机分发到 wiriterHost 对应的readhost 执行。即 writerHost 不负担读压力，全部读请求由 readhost 执行。注意该取值只在"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v("及其以后版本有，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v("没有\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("：writeType 属性指定写实例的负载均衡类型，目前的取值有"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 种：\n\t"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：表示不自动切换\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("：所有写操作发送到配置的第一个writeHost，第一个挂了切到还生存的第二个writeHost。重新启动后以切换后的为准，切换记录在配置文件中：dnindex"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("properties\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：所有写操作都随机的发送到配置的writeHost，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(" 以后废弃不推荐使用\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：基于MySQL主从同步的状态决定是否切换（"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(" 新增）\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("：switchType 属性用于指定主从切换的方式：\n\t"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：表示不自动切换\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：默认值，自动切换\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：基于MySQL主从同步的状态决定是否切换，心跳检测语句为：show slave status\n\t"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：基于MySQL galary cluster的切换机制（适合集群，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("新增），心跳检测语句为show status like "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wsrep%'")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br")])]),r("ul",[r("li",[s._v("heartbeat 标签")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("heartbeat 标签内指明用于和后端数据库进行心跳检查的语句。例如，MySQL可以使用select "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，Oracle可以使用select "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" from dual 等。\n\n这个标签还有一个connectionInitSql属性，主要是当使用Oracla数据库时，需要执行的初始化"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SQL")]),s._v("语句就这个放到这里面来。例如：alter session "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" nls_date_format"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yyyy-mm-dd hh24:mi:ss'")]),s._v("\n\n注：如果是配置主从切换的语句在"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v("之后必须是：show slave status\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("writehost 标签、readHost标签")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("这两个标签都用于配置一组主从数据库的相关信息，Mycat用这两个标签配置的连接信息实例化后端连接池。唯一不同的是，writeHost 配置写实例（master）、readHost 配置读实例（salve），并且readHost 为writeHost 的子标签。通过这两个标签可以组合读"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("写实例以满足系统的要求。\n\n在一个dataHost内可以定义多个writeHost和readHost。但是，如果writeHost指定的后端数据库宕机，那么这个writeHost绑定的所有readHost都将不可用。另一方面，当一个writeHost宕机时系统会自动检测到，并切换到备用的writeHost 上去。\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("writehost 标签及readHost标签的属性")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" host 属性用于标识不同实例名称，一般writeHost名称使用"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M1")]),s._v("作为后缀，readHost则使用"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("S1")]),s._v("作为后缀\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" url 属性用于配置数据库的连接地址，如果是使用native的dbDriver，则一般为address"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("port这种形式。用"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JDBC")]),s._v("或其他的dbDriver，则需要特殊指定。例如，当使用"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JDBC")]),s._v(" 时则可以这么写：jdbc"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token regex"}},[r("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("localhost:3306")]),r("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" user 属性配置数据库用户名\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" password 属性配置数据库密码\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" weight 属性配置某个数据库在 readhost 中作为读节点的权重\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" usingDecrypt 属性指定是否对密码加密，默认为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("， 若需要开启则配置为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("ul",[r("li",[s._v("schema.xml 配置文件示例")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("xml version"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"schema.dtd"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema xmlns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://io.mycat/"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" schema 标签用于定义逻辑库 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("schema name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" checkSQLschema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" sqlMaxLimit"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),s._v(" randomDataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 数据库创建了逻辑表t_user"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 这个表保存在dn1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dn2两个分片中，分片规则使用取模算法，"),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("表示允许多个表定义"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 如果这个表不需要做策略，那么可以不写rule规则 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t_user"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v(" rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long"')]),s._v(" splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" dataNode标签定义的是分片，有两个分片，因此有两个dataNode标签 ，分片名称需要与dataHost一一对应，逻辑库是test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster1"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn2"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster2"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 由于配置了两个"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PXC")]),s._v("集群，那么就需要有两个分配，两个dataHost标签，一个dataHost是定义一个分片的读写 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataHost name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster1"')]),s._v(" maxCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000"')]),s._v(" minCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" dbType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v(" dbDriver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"native"')]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("  slaveThreshold"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("select "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 在第一个分片中，定义写节点为yw4"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.245:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.244:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1R2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.242:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 为了防止宕机可以再定义一个写节点yw4"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.244:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.245:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2R2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.242:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataHost name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster2"')]),s._v(" maxCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000"')]),s._v(" minCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" dbType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v(" dbDriver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"native"')]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("  slaveThreshold"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("select "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 在第一个分片中，定义写节点为yw1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.251:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.250:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1R2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.247:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 为了防止宕机可以再定义一个写节点yw1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.250:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.251:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2R2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.201.242:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yhy3426356"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    \n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br")])]),r("h2",{attrs:{id:"三-启动和关闭mycat"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-启动和关闭mycat"}},[s._v("#")]),s._v(" 三：启动和关闭MyCat")]),s._v(" "),r("h3",{attrs:{id:"一-启动"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-启动"}},[s._v("#")]),s._v(" "),r("code",[s._v("(一) 启动")])]),s._v(" "),r("ul",[r("li",[s._v("在mycat的bin目录下，有很多可执行脚本")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("# 启动是执行startup_nowrap"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh脚本，由于执行的时候，脚本里面有特殊字符，因此复制出来，重新写了一个new_startup_nowrap"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh脚本，执行new_startup_nowrap"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh脚本\nroot@yw5"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin# bash new_startup_nowrap"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n"),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/lib/jvm/java-8-openjdk-amd64/bin/java"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DMYCAT_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/mycat"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("classpath "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/mycat/conf:/usr/local/mycat/lib/classes:/usr/local/mycat/lib/annotations-13.0.jar:/usr/local/mycat/lib/asm-4.0.jar:/usr/local/mycat/lib/commons-collections-3.2.1.jar:/usr/local/mycat/lib/commons-lang-2.6.jar:/usr/local/mycat/lib/curator-client-2.11.0.jar:/usr/local/mycat/lib/curator-framework-2.11.0.jar:/usr/local/mycat/lib/curator-recipes-2.11.0.jar:/usr/local/mycat/lib/disruptor-3.3.4.jar:/usr/local/mycat/lib/dom4j-1.6.1.jar:/usr/local/mycat/lib/druid-1.0.26.jar:/usr/local/mycat/lib/ehcache-core-2.6.11.jar:/usr/local/mycat/lib/fastjson-1.2.58.jar:/usr/local/mycat/lib/guava-19.0.jar:/usr/local/mycat/lib/hamcrest-core-1.3.jar:/usr/local/mycat/lib/hamcrest-library-1.3.jar:/usr/local/mycat/lib/jline-0.9.94.jar:/usr/local/mycat/lib/joda-time-2.9.3.jar:/usr/local/mycat/lib/jsr305-2.0.3.jar:/usr/local/mycat/lib/kotlin-stdlib-1.3.50.jar:/usr/local/mycat/lib/kotlin-stdlib-common-1.3.50.jar:/usr/local/mycat/lib/kryo-2.10.jar:/usr/local/mycat/lib/leveldb-0.7.jar:/usr/local/mycat/lib/leveldb-api-0.7.jar:/usr/local/mycat/lib/log4j-1.2.17.jar:/usr/local/mycat/lib/log4j-1.2-api-2.5.jar:/usr/local/mycat/lib/log4j-api-2.5.jar:/usr/local/mycat/lib/log4j-core-2.5.jar:/usr/local/mycat/lib/log4j-slf4j-impl-2.5.jar:/usr/local/mycat/lib/mapdb-1.0.7.jar:/usr/local/mycat/lib/minlog-1.2.jar:/usr/local/mycat/lib/mongo-java-driver-3.11.0.jar:/usr/local/mycat/lib/Mycat-server-1.6.7.4-release.jar:/usr/local/mycat/lib/mysql-binlog-connector-java-0.16.1.jar:/usr/local/mycat/lib/mysql-connector-java-5.1.35.jar:/usr/local/mycat/lib/netty-3.7.0.Final.jar:/usr/local/mycat/lib/netty-buffer-4.1.9.Final.jar:/usr/local/mycat/lib/netty-common-4.1.9.Final.jar:/usr/local/mycat/lib/objenesis-1.2.jar:/usr/local/mycat/lib/okhttp-4.2.2.jar:/usr/local/mycat/lib/okio-2.2.2.jar:/usr/local/mycat/lib/reflectasm-1.03.jar:/usr/local/mycat/lib/sequoiadb-driver-1.12.jar:/usr/local/mycat/lib/slf4j-api-1.6.1.jar:/usr/local/mycat/lib/univocity-parsers-2.2.1.jar:/usr/local/mycat/lib/velocity-1.7.jar:/usr/local/mycat/lib/wrapper.jar:/usr/local/mycat/lib/zookeeper-3.4.6.jar"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Xms2G "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Xmx2G "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XX")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("AggressiveOpts "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XX")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("MaxDirectMemorySize"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("G io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MycatStartup "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("### "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/mycat/logs/console.log"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("基于ps可以看到mycat正在运行")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("root@yw5"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin# ps aux "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" grep mycat\nroot     "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3410557")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.3")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16780340")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2129156")]),s._v(" pts"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Sl  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v("   "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("04")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jvm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("openjdk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("amd64"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DMYCAT_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("classpath "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("classes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("annotations"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("asm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("commons"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("collections"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("commons"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("lang"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("curator"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.11")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("curator"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("framework"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.11")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("curator"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("recipes"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.11")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("disruptor"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dom4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("druid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".26")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ehcache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("fastjson"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".58")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("guava"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hamcrest"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hamcrest"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("library"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jline"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".94")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("joda"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("time"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.9")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jsr305"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kotlin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("stdlib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kotlin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("stdlib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kryo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("leveldb"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("leveldb"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".17")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slf4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("impl"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mapdb"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("minlog"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mongo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("driver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.11")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".7")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("binlog"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("connector"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.16")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("connector"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("java"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.1")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".35")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("netty"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.7")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Final"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("netty"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("buffer"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".9")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Final"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("netty"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".9")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Final"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("objenesis"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("okhttp"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.2")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("okio"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("reflectasm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.03")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sequoiadb"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("driver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.12")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("slf4j"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("univocity"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("parsers"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("velocity"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wrapper"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".6")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Xms2G "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Xmx2G "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XX")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("AggressiveOpts "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XX")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("MaxDirectMemorySize"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("G io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MycatStartup\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("查看console.log日志， 表明MyCAT启动成功")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("MyCAT Server startup successfully"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" see logs "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" logs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ul",[r("li",[s._v("再查看mycat.log日志，发现无法再yw5-1主机连接到其他主机的MySQL，因为没有授权远程访问，因此在每一个节点上授权root可以远程访问")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("grant all on "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" to root@"),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified by "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yhy3426356'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("停止MyCat后，再次启动，发现MyCAT运行正常，使用mysql命令行连接MyCat")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("# 停止MyCat\nkill "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("ps aux | grep mycat | grep -v grep | awk '{print $2}'")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n\n# ip是yw5"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("的"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("\nmysql "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h192"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("168.201")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".243")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("P8066")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p123456\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v("向t_user表插入数据")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("use test\n# 这里密码使用"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AES_ENCRYPT")]),s._v("加密，原始密码是"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("，随机数是HelloWorld，再再以"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("进制表示\ninsert into "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("t_user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tel"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locked"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("values")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Robby'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEX")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AES_ENCRYPT")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HelloWorld'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'18670236750'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ul",[r("li",[s._v("插入数据之后，访问第一个分片，发现没有数据。访问第二个分片发现有数据")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("# 第一个分片\nmysql### show tables"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Tables_in_test "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" t_user         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" row "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql### select "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" from t_user"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nEmpty "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n# 第二个分片\nmysql### select "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" from t_user"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" username "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" password                         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" tel         "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" locked "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Robby    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3E6")]),s._v("BC27A781F0AC08BCFD78CC3DCE4CA "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("18670236750")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" row "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br")])]),r("ul",[r("li",[s._v("在Mycat中再执行一条SQL，可以发现第一个分片上有数据了，这就是取模算法")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("insert into "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("t_user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tel"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locked"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("values")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Marry'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEX")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AES_ENCRYPT")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'654321'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HelloWorld'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'18670236751'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h2",{attrs:{id:"四-如何使用mycat代理一个pxc集群方案-django项目可用-已经实践证明"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四-如何使用mycat代理一个pxc集群方案-django项目可用-已经实践证明"}},[s._v("#")]),s._v(" 四："),r("code",[s._v("如何使用MyCat代理一个PXC集群方案（Django项目可用，已经实践证明）")])]),s._v(" "),r("h3",{attrs:{id:"一-需要满足的需求"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-需要满足的需求"}},[s._v("#")]),s._v(" "),r("code",[s._v("(一) 需要满足的需求")])]),s._v(" "),r("ul",[r("li",[r("p",[s._v("1：写请求只打到主节点(dnindex.properties中记录主节点序号，初始0)，读请求在三个readHost上负载均衡")])]),s._v(" "),r("li",[r("p",[s._v("2：如果主节点挂了，会通过心跳语句返回的集群信息判断是否需要切换主节点，切换主节点的话会将主节点序号写入dnindex.properties中(0-2)")])]),s._v(" "),r("li",[r("p",[s._v("3：通常只要还剩一个节点，都能正常工作，除非是当前主节点挂了并且因为心跳语句返回的集群信息有问题不切换主节点，此时不可写(因为只能主节点写)，但还是可以在其他节点读的")])])]),s._v(" "),r("h3",{attrs:{id:"二-schema-xml配置如下"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-schema-xml配置如下"}},[s._v("#")]),s._v(" "),r("code",[s._v("(二) schema.xml配置如下")])]),s._v(" "),r("ul",[r("li",[s._v("配置示例")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("xml version"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"schema.dtd"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema xmlns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://io.mycat/"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("schema name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lfz_schema"')]),s._v(" checkSQLschema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost1"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lfz"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataHost name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost1"')]),s._v(" maxCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),s._v(" minCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v(" writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v(" dbType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v(" dbDriver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"native"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("show status like "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wsrep%'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostM1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:4000"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostS1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:4000"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostM2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:5000"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostS2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:5000"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostM3"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:6000"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostS3"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:6000"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br")])]),r("ul",[r("li",[s._v('writeType="0"代表写请求只发到当前主节点')])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("″"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 所有写操作发送到配置的第一个writeHost。\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("″，所有写操作都随机的发送到配置的writeHost，mycat1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 以后废弃不推荐。\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("″，不执行写操作。\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ul",[r("li",[s._v('balance="3"代表读请求随机打到所有活着的readHost上，所以设置了和writeHost一样的readHost。设成2，删去所有的readHost也能达到一样的效果，但是3的作用更高级、更符合语义')])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("mycat手册对balance的说明：\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 不开启读写分离机制，所有读操作都发送到当前可用的 writeHost 上。\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("，全部的 readHost 与 stand by writeHost 参与 select "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("语句的负载均衡，简单的说，当双主双从模式")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("S1")]),s._v("，"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("S2")]),s._v("，并且 "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M1")]),s._v(" 与 "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M2")]),s._v(" 互为主备"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，正常情况下，"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("S1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("S2")]),s._v(" 都参与 select 语句的负载 均衡。\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v("，所有读操作都随机的在 writeHost、readhost 上分发。\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v("，所有读请求随机的分发到 wiriterHost 对应的 readhost 执行，writerHost 不负担读压力， 注意 balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 只在 "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(" 及其以后版本有，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v(" 没有。\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br")])]),r("ul",[r("li",[s._v('switchType="3"代表根据pxc集群状态判断是否切换主节点')])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("mycat手册对switchType的说明：\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 表示不自动切换\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 自动切换\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 基于MySQL主从同步的状态决定是否切换，需要配置"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("show slave status"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" mycat1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),s._v("开始支持galary cluster集群的配置，根据集群状态决定是否切换，需要配置"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("show status like "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wsrep%'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br")])]),r("h2",{attrs:{id:"四-需求实践"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四-需求实践"}},[s._v("#")]),s._v(" 四：需求实践")]),s._v(" "),r("p",[r("img",{attrs:{src:t(1676),alt:"Alt text"}})]),s._v(" "),r("h3",{attrs:{id:"一-pxc集群配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-pxc集群配置"}},[s._v("#")]),s._v(" "),r("code",[s._v("(一) PXC集群配置")])]),s._v(" "),r("ul",[r("li",[s._v("/etc/my.cnf配置文件如下(centos版本)")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nport"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nserver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ndatadir"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql\nsocket"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\nlog"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("error"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\npid"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysqld"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid\nlog"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin\nlog_slave_updates\nexpire_logs_days"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\nsymbolic"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("links"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n# 自定义添加\ncharacter_set_server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\nbind"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("address"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nskip"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("resolve\n\n# galera同步依赖库\nwsrep_provider"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib64"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libgalera_smm"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so\n# 集群名称\nwsrep_cluster_name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pxc"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster\n# 集群节点\nwsrep_cluster_address"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcomm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".231")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".107")]),s._v("\n# 当前节点名称（各节点需要修改）\nwsrep_node_name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node1\n# 当前节点"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("（各节点需要修改）\nwsrep_node_address"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".231")]),s._v("\n# 集群内数据同步方法\nwsrep_sst_method"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xtrabackup"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v2 \n# 同步数据使用的用户和密码\nwsrep_sst_auth"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sstuser"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("passw0rd\n# 同步严厉模式\npxc_strict_mode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ENFORCING")]),s._v("\n# 基于"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ROW")]),s._v("复制\nbinlog_format"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ROW")]),s._v(" \n# 默认引擎\ndefault_storage_engine"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("InnoDB \n# 主键自增不锁表\ninnodb_autoinc_lock_mode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n# 设置默认的同步线程数（"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CPU")]),s._v("逻辑线程的"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("倍）\nwsrep_slave_threads"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br")])]),r("h3",{attrs:{id:"二-mycat配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-mycat配置"}},[s._v("#")]),s._v(" "),r("code",[s._v("(二) Mycat配置")])]),s._v(" "),r("ul",[r("li",[s._v("server.xml配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("xml version"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v(" encoding"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTF-8"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server.dtd"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("server xmlns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://io.mycat/"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 这里是系统的相关参数属性 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 服务连接端口 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serverPort"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8066")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 服务管理端口 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"managerPort"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9066")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 服务监听的ip "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bindIp"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为需要密码登陆、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为不需要密码登陆；默认为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("，设置为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("则需要指定默认账户"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nonePasswordLogin"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 前端连接的写队列大小 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"frontWriteQueueSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 设置字符集编码 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"charset"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("utf8"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" mycat 的进程数量 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"processors"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 闲置连接超时时间，单位：毫秒 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"idleTimeout"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800000")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 默认最大返回的数据集大小 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultMaxLimit"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 允许的最大包大小 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxPacketSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("104857600")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" \n        "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("遇上没有实现的报文")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unknown command"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("就会报错、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为忽略该报文，返回ok报文。\n        在某些mysql客户端存在客户端已经登录的时候还会继续发送登录报文"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mycat会报错"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("该设置可以绕过这个错误\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ignoreUnknownCommand"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useHandshakeV10"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"removeGraveAccent"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为开启实时统计、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为关闭 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useSqlStat"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property###  \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为开启全加班一致性检测、"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为关闭 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useGlobleTableCheck"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SQL")]),s._v(" 执行超时 单位"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("秒"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sqlExecuteTimeout"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sequnceHandlerType"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("必须带有"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCATSEQ_")]),s._v("或者 mycatseq_进入序列匹配流程 注意"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCATSEQ_")]),s._v("有空格的情况"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sequnceHandlerPattern"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("next\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("value\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v("\\s"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCATSEQ_")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\\w"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\\"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\\s"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 子查询中存在关联查询的情况下"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("检查关联字段中是否有分片字段 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("默认 "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"subqueryRelationshipCheck"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property### \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sequenceHanlderClass"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("io"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("route"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sequence"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("handler"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("HttpIncrSequenceHandler"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("默认为type "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" DirectByteBufferPool "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" type "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" ByteBufferArena "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" type "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" NettyBufferPool "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"processorBufferPoolType"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("分布式事务开关，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("为不过滤分布式事务，"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("为过滤分布式事务（如果分布式事务内只涉及全局表，则不过滤），"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("为不过滤分布式事务"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("但是记录分布式事务日志"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"handleDistributedTransactions"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" off heap "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" merge"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("order"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("group"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("limit  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("开启；"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("关闭 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useOffHeapForMerge"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"memoryPageSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("k"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spillsFileBufferSize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("k"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useStreamOutput"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"systemReserveMemorySize"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("384")]),s._v("m"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("是否采用zookeeper协调切换  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useZKSwitch"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("如果为 "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("的话 严格遵守隔离级别"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("不会在仅仅只有select语句的时候在事务中切换连接"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"strictTxIsolation"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Mycat连接数据库时使用的隔离级别\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 读未提交\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 读已提交\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 可重复读\n         "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 串行化\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"txIsolation"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useZKSwitch"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("如果为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("的话"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("涉及多个DataNode的catlet任务不会跨线程执行"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"parallExecute"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("system"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 用户名root "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" defaultAccount"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 密码 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 运行该用户访问的逻辑库，可配置多个允许访问的逻辑库，使用逗号分隔 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"schemas"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 是否只读 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"readOnly"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultSchema"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("server"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br")])]),r("ul",[r("li",[s._v("rule.xml 配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("xml version"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v(" encoding"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTF-8"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("rule "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule.dtd"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("rule xmlns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://io.mycat/"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule1"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("func1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-date"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("createTime"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partbyday"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rule2"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("user_id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("func1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-intfile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("sharding_id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("int"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auto-sharding-long"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("rang"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("long"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("long"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-murmur"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("murmur"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"crc32slot"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("crc32slot"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sharding-by-month"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("create_time"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partbymonth"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest-month-calldate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("calldate"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("latestMonth"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auto-sharding-rang-mod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("rang"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tableRule name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jch"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("columns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("jump"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("consistent"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("algorithm"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tableRule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"murmur"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByMurmurHash"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"seed"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"virtualBucketTimes"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("160")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"crc32slot"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByCRC32PreSlot"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 要分片的数据库节点数量，必须指定，否则没法分片 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-int"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByFileMap"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hash"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("int"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rang-long"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.AutoPartitionByLong"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("autopartition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("long"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 由于使用了取模算法，且分片为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("，因此count为"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByMod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"func1"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByLong"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partitionCount"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partitionLength"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latestMonth"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.LatestMonthPartion"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"splitOneDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partbymonth"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByMonth"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dateFormat"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("yyyy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MM")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dd"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sBeginDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"partbyday"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dateFormat"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("yyyy"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MM")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dd"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sNaturalDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sBeginDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sEndDate"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2014")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sPartionDay"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rang-mod"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByRangeMod"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapFile"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("partition"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("range"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jump-consistent-hash"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"io.mycat.route.function.PartitionByJumpConsistentHash"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"totalBuckets"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br"),r("span",{staticClass:"line-number"},[s._v("84")]),r("br"),r("span",{staticClass:"line-number"},[s._v("85")]),r("br"),r("span",{staticClass:"line-number"},[s._v("86")]),r("br"),r("span",{staticClass:"line-number"},[s._v("87")]),r("br"),r("span",{staticClass:"line-number"},[s._v("88")]),r("br"),r("span",{staticClass:"line-number"},[s._v("89")]),r("br"),r("span",{staticClass:"line-number"},[s._v("90")]),r("br"),r("span",{staticClass:"line-number"},[s._v("91")]),r("br"),r("span",{staticClass:"line-number"},[s._v("92")]),r("br"),r("span",{staticClass:"line-number"},[s._v("93")]),r("br"),r("span",{staticClass:"line-number"},[s._v("94")]),r("br"),r("span",{staticClass:"line-number"},[s._v("95")]),r("br"),r("span",{staticClass:"line-number"},[s._v("96")]),r("br"),r("span",{staticClass:"line-number"},[s._v("97")]),r("br"),r("span",{staticClass:"line-number"},[s._v("98")]),r("br"),r("span",{staticClass:"line-number"},[s._v("99")]),r("br"),r("span",{staticClass:"line-number"},[s._v("100")]),r("br"),r("span",{staticClass:"line-number"},[s._v("101")]),r("br"),r("span",{staticClass:"line-number"},[s._v("102")]),r("br"),r("span",{staticClass:"line-number"},[s._v("103")]),r("br"),r("span",{staticClass:"line-number"},[s._v("104")]),r("br"),r("span",{staticClass:"line-number"},[s._v("105")]),r("br"),r("span",{staticClass:"line-number"},[s._v("106")]),r("br"),r("span",{staticClass:"line-number"},[s._v("107")]),r("br"),r("span",{staticClass:"line-number"},[s._v("108")]),r("br"),r("span",{staticClass:"line-number"},[s._v("109")]),r("br"),r("span",{staticClass:"line-number"},[s._v("110")]),r("br"),r("span",{staticClass:"line-number"},[s._v("111")]),r("br"),r("span",{staticClass:"line-number"},[s._v("112")]),r("br"),r("span",{staticClass:"line-number"},[s._v("113")]),r("br"),r("span",{staticClass:"line-number"},[s._v("114")]),r("br"),r("span",{staticClass:"line-number"},[s._v("115")]),r("br"),r("span",{staticClass:"line-number"},[s._v("116")]),r("br"),r("span",{staticClass:"line-number"},[s._v("117")]),r("br"),r("span",{staticClass:"line-number"},[s._v("118")]),r("br"),r("span",{staticClass:"line-number"},[s._v("119")]),r("br"),r("span",{staticClass:"line-number"},[s._v("120")]),r("br"),r("span",{staticClass:"line-number"},[s._v("121")]),r("br"),r("span",{staticClass:"line-number"},[s._v("122")]),r("br"),r("span",{staticClass:"line-number"},[s._v("123")]),r("br"),r("span",{staticClass:"line-number"},[s._v("124")]),r("br"),r("span",{staticClass:"line-number"},[s._v("125")]),r("br"),r("span",{staticClass:"line-number"},[s._v("126")]),r("br"),r("span",{staticClass:"line-number"},[s._v("127")]),r("br"),r("span",{staticClass:"line-number"},[s._v("128")]),r("br"),r("span",{staticClass:"line-number"},[s._v("129")]),r("br"),r("span",{staticClass:"line-number"},[s._v("130")]),r("br"),r("span",{staticClass:"line-number"},[s._v("131")]),r("br"),r("span",{staticClass:"line-number"},[s._v("132")]),r("br"),r("span",{staticClass:"line-number"},[s._v("133")]),r("br"),r("span",{staticClass:"line-number"},[s._v("134")]),r("br")])]),r("ul",[r("li",[s._v("schema.xml 配置文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("xml version"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DOCTYPE")]),s._v(" mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"schema.dtd"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema xmlns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://io.mycat/"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" schema 标签用于定义逻辑库 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("schema name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" checkSQLschema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" sqlMaxLimit"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),s._v(" randomDataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 数据库创建了逻辑表t_user"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 这个表保存在dn1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dn2两个分片中，分片规则使用取模算法，"),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("表示允许多个表定义 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" \n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t_user"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v(" rule"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mod-long"')]),s._v(" splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth_group"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth_group_permissions"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth_permission"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth_user"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth_user_groups"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth_user_user_permissions"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"check_asset"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"check_assetagent"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"check_tootherserverrecord"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"django_admin_log"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"django_content_type"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"django_migrations"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"django_session"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t_user"')]),s._v(" dataNode"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1,dn2"')]),s._v("  splitTableNames "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    \n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" dataNode标签定义的是分片，有两个分片，因此有两个dataNode标签 ，分片名称需要与dataHost一一对应，逻辑库是test"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn1"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster1"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataNode name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dn2"')]),s._v(" dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster2"')]),s._v(" database"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 由于配置了两个"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PXC")]),s._v("集群，那么就需要有两个分配，两个dataHost标签 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataHost name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster1"')]),s._v(" maxCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000"')]),s._v(" minCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" dbType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v(" dbDriver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"native"')]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("  slaveThreshold"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("select "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 在第一个分片中，定义写节点为yw4"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.231:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.107:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 为了防止宕机可以再定义一个写节点yw4"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.107:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.231:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    \n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataHost name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster2"')]),s._v(" maxCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000"')]),s._v(" minCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" dbType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v(" dbDriver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"native"')]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("  slaveThreshold"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("select "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("heartbeat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 在第一个分片中，定义写节点为yw1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.202:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.145:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 为了防止宕机可以再定义一个写节点yw1"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.145:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("readHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W2R1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.100.202:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("readHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("writeHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dataHost"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mycat"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("schema"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br")])]),r("ul",[r("li",[s._v("修改bin/startup_nowrap.sh启动文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token hashbang comment"}},[s._v("#!/bin/bash")]),s._v("\nnoJavaHome"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("z "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_HOME"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    noJavaHome"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nfi\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_HOME/bin/java"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    noJavaHome"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nfi\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" $noJavaHome "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    echo\n    echo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error: JAVA_HOME environment variable is not set."')]),s._v("\n    echo\n    exit "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nfi\n#"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-server -Xms2G -Xmx2G -XX:+AggressiveOpts -XX:MaxDirectMemorySize=2G"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-server -Xms4G -Xmx4G -XX:+AggressiveOpts -XX:MaxDirectMemorySize=6G"')]),s._v("\n#performance Options\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -Xss256k"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+AggressiveOpts"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+UseBiasedLocking"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+UseFastAccessorMethods"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+DisableExplicitGC"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+UseParNewGC"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+UseConcMarkSweepGC"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+CMSParallelRemarkEnabled"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+UseCMSCompactAtFullCollection"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+UseCMSInitiatingOccupancyOnly"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:CMSInitiatingOccupancyFraction=75"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:CMSInitiatingOccupancyFraction=75"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GC")]),s._v(" Log Options\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+PrintGCApplicationStoppedTime"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+PrintGCTimeStamps"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -XX:+PrintGCDetails"')]),s._v("\n#debug Options\n#"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_OPTS -Xdebug -Xrunjdwp:transport=dt_socket,address=8065,server=y,suspend=n"')]),s._v("\n#"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v("\n\n#"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HOME")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CURR_DIR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("pwd")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\ncd "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('dirname "$0"')]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCAT_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("pwd")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\ncd $"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CURR_DIR")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("z "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$MYCAT_HOME"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    echo\n    echo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error: MYCAT_HOME environment variable is not defined correctly."')]),s._v("\n    echo\n    exit "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nfi\n#"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v("\n\n#"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CLASSPATH")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCAT_CLASSPATH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$MYCAT_HOME/conf:$MYCAT_HOME/lib/classes"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$MYCAT_HOME"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/*.jar\ndo\n    MYCAT_CLASSPATH="$MYCAT_CLASSPATH:$i"\ndone\n#==============================================================================\n\n#startup Server\nRUN_CMD="\\"$JAVA_HOME/bin/java\\""\nRUN_CMD="$RUN_CMD -DMYCAT_HOME=\\"$MYCAT_HOME\\""\nRUN_CMD="$RUN_CMD -classpath \\"$MYCAT_CLASSPATH\\""\nRUN_CMD="$RUN_CMD $JAVA_OPTS"\nRUN_CMD="$RUN_CMD io.mycat.MycatStartup  $@"\nRUN_CMD="$RUN_CMD >### \\"$MYCAT_HOME/logs/console.log\\" 2>&1 &"\necho $RUN_CMD\neval $RUN_CMD\n#==============================================================================\n')])])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br")])]),r("ul",[r("li",[s._v("创建bin/stop_nowrap.sh停止文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token hashbang comment"}},[s._v("#!/bin/bash")]),s._v("\nkill "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("ps aux | awk '{ if( $0~/mycat/ && $0!~/awk/ )  print $2 }'")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("ul",[r("li",[s._v("创建bin/restart.sh文件")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token hashbang comment"}},[s._v("#!/bin/bash")]),s._v("\n\nkill "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("ps aux | awk '{ if( $0~/mycat/ && $0!~/awk/ )  print $2 }'")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\nsleep "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\nnoJavaHome"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("z "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_HOME"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    noJavaHome"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nfi\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$JAVA_HOME/bin/java"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    noJavaHome"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nfi\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" $noJavaHome "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    echo\n    echo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error: JAVA_HOME environment variable is not set."')]),s._v("\n    echo\n    exit "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nfi\n\n#"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JAVA_OPTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-server -Xms2G -Xmx2G -XX:+AggressiveOpts -XX:MaxDirectMemorySize=2G"')]),s._v("\n\n\n#"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HOME")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CURR_DIR")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("pwd")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\ncd "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('dirname "$0"')]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCAT_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("pwd")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\ncd $"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CURR_DIR")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("z "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$MYCAT_HOME"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" then\n    echo\n    echo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error: MYCAT_HOME environment variable is not defined correctly."')]),s._v("\n    echo\n    exit "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nfi\n\n\n#"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CLASSPATH")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYCAT_CLASSPATH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$MYCAT_HOME/conf:$MYCAT_HOME/lib/classes"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$MYCAT_HOME"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/*.jar\ndo\n    MYCAT_CLASSPATH="$MYCAT_CLASSPATH:$i"\ndone\n\n#startup Server\nRUN_CMD="\\"$JAVA_HOME/bin/java\\""\nRUN_CMD="$RUN_CMD -DMYCAT_HOME=\\"$MYCAT_HOME\\""\nRUN_CMD="$RUN_CMD -classpath \\"$MYCAT_CLASSPATH\\""\nRUN_CMD="$RUN_CMD $JAVA_OPTS"\nRUN_CMD="$RUN_CMD io.mycat.MycatStartup  $@"\nRUN_CMD="$RUN_CMD >### \\"$MYCAT_HOME/logs/console.log\\" 2>&1 &"\necho $RUN_CMD\neval $RUN_CMD\n')])])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br")])]),r("ul",[r("li",[s._v("连接到Mycat")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("# ip是yw5"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("的"),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("\nmysql "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h192"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("168.201")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".243")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token constant"}},[s._v("P8066")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p123456\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("h3",{attrs:{id:"三-mycat故障优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-mycat故障优化"}},[s._v("#")]),s._v(" "),r("code",[s._v("(三) Mycat故障优化")])]),s._v(" "),r("ul",[r("li",[s._v("1：mycat出现卡死的故障解决")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 在schema"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml文件中，将dbDriver改为jdbc"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 且url中也修改\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dataHost name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster1"')]),s._v(" maxCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000"')]),s._v(" minCon"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v(" balance"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" writeType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" dbType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v(" dbDriver"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdbc"')]),s._v(" switchType"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("  slaveThreshold"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("writeHost host"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"W1"')]),s._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdbc:mysql://192.168.100.231:3306"')]),s._v(" user"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(" password"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("ul",[r("li",[s._v("2：长时间没有查询数据，再次查询，出现"),r("code",[s._v("ERROR 2006 (HY000): MySQL server has gone away, No connection. Trying to reconnect")]),s._v("(明天补充完整)")])]),s._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[s._v("这是数据库的连接池的问题，需要设置下空闲检查\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);