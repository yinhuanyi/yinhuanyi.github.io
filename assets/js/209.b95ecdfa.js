(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{1567:function(a,s,n){a.exports=n.p+"assets/img/k1.f488366e.png"},1568:function(a,s,n){a.exports=n.p+"assets/img/kaf2.ea99fa4e.jpg"},2591:function(a,s,n){"use strict";n.r(s);var e=n(9),t=Object(e.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"一-kafka架构原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-kafka架构原理"}},[a._v("#")]),a._v(" 一：Kafka架构原理")]),a._v(" "),e("h3",{attrs:{id:"一-架构原理-下载地址-http-archive-apache-org-dist-kafka"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-架构原理-下载地址-http-archive-apache-org-dist-kafka"}},[a._v("#")]),a._v(" (一)架构原理: 下载地址：http://archive.apache.org/dist/kafka/")]),a._v(" "),e("p",[e("img",{attrs:{src:n(1567),alt:"Alt text"}})]),a._v(" "),e("p",[e("img",{attrs:{src:n(1568),alt:"Alt text"}})]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("1：Kafka它是一个分布式消息系统，由linkedin使用scala编写，用作LinkedIn的活动流（Activity Stream）和运营数据处理管道（Pipeline）的基础。具有高水平扩展和高吞吐量,Kafka支持仿AMQP协议，Kafka增加和减少服务器都会在Zookeeper节点上触发相应的事件kafka系统会捕获这些事件，进行新一轮的负载均衡，客户端也会捕获这些事件来进行新一轮的处理。\n\n2：Kafka相当于是一个broker集群，发送到每个topic的消息会在不同的分区上有副本， 保证了kafka消息的高可用\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h2",{attrs:{id:"二-kafka配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-kafka配置"}},[a._v("#")]),a._v(" 二：Kafka配置")]),a._v(" "),e("h3",{attrs:{id:"一-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-配置"}},[a._v("#")]),a._v(" (一)配置")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("1: 添加环境变量\nvi /etc/profile.d/kafka.sh\nexport PATH=/opt/modules/kafka_2.11-2.1.1/bin:$PATH\n. /etc/profile.d/kafka.sh\n\n2：vi /opt/modules/kafka_2.11-2.1.1/config/server.properties\n\nbroker.id=0\nport=9092\nhost.name=node1\nzookeeper.connect=node1:2181,node2:2181,node3:2181\n\n3: vi /opt/modules/kafka_2.11-2.1.1/config/producer.properties\nmetadata.broker.list=node1:9092\n\n4: 将node1的kafka分发到node2、node3\n\n5: 修改node2和node3的server.properties中的broker.id=2和host.name=node3两个属性\n\n6：3个节点都启动kafka\nkafka-server-start.sh -daemon /opt/modules/kafka_2.11-2.1.1/config/server.properties\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br")])]),e("h2",{attrs:{id:"三-kafka创建topic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三-kafka创建topic"}},[a._v("#")]),a._v(" 三：Kafka创建topic")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("1: Kafka创建topic\nkafka-topics.sh --create --zookeeper node1:2181,node2:2181,node3:2181 --replication-factor 3 --partitions 1 --topic valor\n\n2: 生产数据\nkafka-console-producer.sh --broker-list node1:9092,node2:9092,node3:9092 --topic valor\n\n3: 查看所有的topic\nkafka-topics.sh --list --zookeeper node1:2181,node2:2181,node3:2181\n\n4: 消费数据\nkafka-console-consumer.sh --bootstrap-server node1:9092,node2:9092,node3:9092 --topic valor --from-beginning \n\n5: 删除某个topic\nkafka-topics.sh  --delete --zookeeper node1:2181,node2:2181,node3:2181  --topic valor\n且配置文件server.properties中：\ndelete.topic.enable=true\nauto.create.topics.enable = false\n基于zkCli.sh删除topic\n删除kafka的日志目录\n重启kafka\n\n6： 设置全局过期数据自动删除\n# 全局自动清理策略\nlog.retention.hours=1\nlog.cleanup.policy=delete\n\n7：单独对valor这个topic设置过期时间为一天\n./kafka-configs.sh --zookeeper node1:2181,node2:2181,node3:2181 --alter --entity-name valor --entity-type topics --add-config retention.ms=86400000\n\n8: 查看valor这个topic的过期时间\n$ ./kafka-configs.sh --zookeeper node1:2181,node2:2181,node3:2181 --describe --entity-name valor --entity-type topics\n\n9：立即删除valor这个topic下的数据\n./kafka-topics.sh --zookeeper node1:2181,node2:2181,node3:2181 --alter --topic valor --config cleanup.policy=delete\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br"),e("span",{staticClass:"line-number"},[a._v("30")]),e("br"),e("span",{staticClass:"line-number"},[a._v("31")]),e("br"),e("span",{staticClass:"line-number"},[a._v("32")]),e("br"),e("span",{staticClass:"line-number"},[a._v("33")]),e("br"),e("span",{staticClass:"line-number"},[a._v("34")]),e("br"),e("span",{staticClass:"line-number"},[a._v("35")]),e("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);