(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1804:function(s,n,a){s.exports=a.p+"assets/img/2021-08-0310.25.11.06c7be61.png"},1805:function(s,n,a){s.exports=a.p+"assets/img/2021-07-2711.00.43.d5daef0e.png"},1806:function(s,n,a){s.exports=a.p+"assets/img/2021-07-2711.06.17.1bf86dbc.png"},1807:function(s,n,a){s.exports=a.p+"assets/img/2021-08-033.47.29.a56fe4e6.png"},1808:function(s,n){s.exports="data:image/png;base64,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"},1809:function(s,n,a){s.exports=a.p+"assets/img/2021-07-274.16.35.300a98d0.png"},1810:function(s,n,a){s.exports=a.p+"assets/img/2021-07-273.43.33.a58d5224.png"},1811:function(s,n,a){s.exports=a.p+"assets/img/2021-07-274.03.39.93fcd07c.png"},1812:function(s,n,a){s.exports=a.p+"assets/img/2021-07-275.13.21.3f0aa29f.png"},1813:function(s,n,a){s.exports=a.p+"assets/img/2021-08-034.25.44.4496c1e9.png"},2707:function(s,n,a){"use strict";a.r(n);var t=a(9),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一-rabbitmq工作原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-rabbitmq工作原理"}},[s._v("#")]),s._v(" 一：RabbitMQ工作原理")]),s._v(" "),t("h3",{attrs:{id:"一-定义和特征"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-定义和特征"}},[s._v("#")]),s._v(" (一)：定义和特征")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("RabbitMQ是消息中间件，用于组件之间的解耦，主要解决发布者和订阅者之间无强依赖关系")])]),s._v(" "),t("li",[t("p",[s._v("RabbitMQ特点：高可用，扩展性，管理界面")])]),s._v(" "),t("li",[t("p",[s._v("主要使用场景：流量消峰，异步处理，应用解耦。在我们秒杀抢购商品的时候，系统会提醒我们稍等排队中。像这种排队结算就用到了消息队列机制，放入通道里面一个一个结算处理，而不是某个时间断突然涌入大批量的查询新增把数据库给搞宕机，所以 RabbitMQ 本质上起到的作用就是削峰填谷，为业务保驾护航。")])]),s._v(" "),t("li",[t("p",[s._v("消息发送原理")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t你的应用程序和 Rabbit Server 之间会创建一个 TCP 连接，一旦 TCP 打开，并通过了认证，你的应用程序和 Rabbit 就创建了一条 AMQP 信道（Channel）。\n\t信道channel是创建在 “真实” TCP 上的虚拟连接，AMQP 命令都是通过信道发送出去的，每个信道都会有一个唯一的 ID，不论是发布消息，订阅队列或者介绍消息都是通过信道完成的。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("为什么RabbitMQ不通过 TCP 直接发送命令？")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1804),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t对于操作系统来说创建和销毁 TCP 会话是非常昂贵的开销，假设高峰期每秒有成千上万条连接，每个连接都要创建一条 TCP 会话，这就造成了 TCP 连接的巨大浪费，而且操作系统每秒能创建的 TCP 也是有限的，因此很快就会遇到系统瓶颈。\n\t如果我们每个请求都使用一条 TCP 连接，既满足了性能的需要，又能确保每个连接的私密性，这就是引入信道概念的原因\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"二-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-安装"}},[s._v("#")]),s._v(" (二)：安装")]),s._v(" "),t("ul",[t("li",[s._v("Ubuntu安装rabbitmq")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("apt-get install erlang-nox  # 安装erlang\n\napt-get install rabbitmq-server # 安装rabbitmq-server\n\nsystemctl start rabbitmq-server # 启动\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("启用管理插件，才能访问web控制台")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rabbitmq-plugins enable rabbitmq_management\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("rabbitmq控制台默认密码是guest、密码也是guest，但是无法远程访问，需要修改配置")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 修改rabbit.app\nvi /usr/lib/rabbitmq/lib/rabbitmq_server-3.6.10/ebin/rabbit.app\n\n将{loopback_users, [<<"guest">>]} 改为 {loopback_users, []}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("重启rabbitmq后，就可以使用guest登录了，guest是管理员用户")])]),s._v(" "),t("h3",{attrs:{id:"三-rabbitmq的基础命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-rabbitmq的基础命令"}},[s._v("#")]),s._v(" (三)：rabbitmq的基础命令")]),s._v(" "),t("ul",[t("li",[s._v("rabbitmqctl 的常用命令")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 查看服务器的状态\nrabbitmqctl status\n\n# 查看环境变量\nrabbitmqctl  environment\n\n# 停止rabbitmq的应用\nrabbitmqctl stop_app\n\n# 启动rabbitmq的应用\nrabbitmqctl start_app\n\n# 添加用户\nrabbitmqctl add_user <username> <password>\nrabbitmqctl add_user uplooking 123456\n\n# 列出所有的用户\nrabbitmqctl list_users\n\n# 将用户设置为管理员用户\nrabbitmqctl set_user_tags uplooking administrator\n\n\n# 查看虚拟主机\nrabbitmqctl list_vhosts\n\n# 添加虚拟主机\nrabbitmqctl add_vhost /uplooking\nrabbitmqctl add_vhost /uplooking/ops\nrabbitmqctl add_vhost /uplooking/java\n\n# 删除虚拟主机\nrabbitmqctl delete_vhost /uplooking/java\n\n# 查看默认虚拟主机的权限\nrabbitmqctl list_permissions\n\n# 设置用户的权限，.* 表示分别对 组件的配置文件、读权限、写权限\nrabbitmqctl set_permissions -p /uplooking uplooking ".*" ".*" ".*"\n\n# 查看虚拟主机的权限\nrabbitmqctl list_permissions -p /uplooking\n\n# 组件查看\nrabbitmqctl list_queues -p /uplooking\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("h2",{attrs:{id:"三-rabbitmq关键名词"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-rabbitmq关键名词"}},[s._v("#")]),s._v(" 三：RabbitMQ关键名词")]),s._v(" "),t("ul",[t("li",[s._v("ConnectionFactory（连接管理器）、Channel（信道）、Exchange（交换器）、Queue（队列）、RoutingKey（路由键）、BindingKey（绑定键)")])]),s._v(" "),t("h3",{attrs:{id:"一-virtual-hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-virtual-hosts"}},[s._v("#")]),s._v(" (一)：Virtual Hosts")]),s._v(" "),t("ul",[t("li",[s._v("Virtual Hosts作用")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\tVirtual Hosts在rabbitmq中，可以起到数据隔离的作用，每个 Rabbit 都能创建很多 vhost，我们称之为虚拟主机，每个虚拟主机其实都是 mini 版的 RabbitMQ，拥有自己的队列，交换器和绑定，拥有自己的权限机制。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("在管理页面添加一个"),t("code",[s._v("virtual host")])])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1805),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("此时新建的virtual host是没有用户的，可以将guest绑定到这个新建的virtual host中，也可以新建一个用户绑定，这里选择新建一个用户绑定")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1806),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("然后点击这个用户，将用户绑定到Virtual Host上")])]),s._v(" "),t("li",[t("p",[s._v("此时点击Exchanges可以发现，就会有Exchanges绑定的Virtual Host")])])]),s._v(" "),t("h3",{attrs:{id:"二-rabbitmq控制面板中其他导航栏作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-rabbitmq控制面板中其他导航栏作用"}},[s._v("#")]),s._v(" (二)：RabbitMQ控制面板中其他导航栏作用")]),s._v(" "),t("ul",[t("li",[s._v("Connections")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("当rabbitmq订阅了消息后，就会在这里进行展示\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Exchanges")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Exchanges是交换机，让生产者发送一个消息后，会首先进入到Exchanges中，然后根据交换机指定的规则绑定对应的queue，将消息发送到queue中\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Channel")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("在Connections中会有很多Channel，进行通信\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Queue")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("queue是需要绑定到指定的Exchanges的，然后没有消费者消费消息，消息就会一直存储在queue中\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Binding")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Binding解决的是queue如何绑定到Exchanges上，\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"三-rabbitmq内部工作原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-rabbitmq内部工作原理"}},[s._v("#")]),s._v(" (三)：RabbitMQ内部工作原理")]),s._v(" "),t("p",[t("img",{attrs:{src:a(1807),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ConnectionFactory（连接管理器）：应用程序与 Rabbit 之间建立连接的管理器，程序代码中使用；\n\nChannel（信道）：消息推送使用的通道；\n\nExchange（交换器）：用于接受、分配消息；\n\nQueue（队列）：用于存储生产者的消息；\n\nRoutingKey（路由键）：用于把生成者的数据分配到交换器上；\n\nBindingKey（绑定键）：用于把交换器的消息绑定到队列上；\n\nVirtualHost (虚拟机)：将用户绑定到虚拟机上，默认就会生成一个Exchange绑定到虚拟机上\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h2",{attrs:{id:"四-rabbitmq的工作模式-目前有7种"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-rabbitmq的工作模式-目前有7种"}},[s._v("#")]),s._v(" 四：RabbitMQ的工作模式 (目前有7种)")]),s._v(" "),t("h3",{attrs:{id:"一-simple模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-simple模式"}},[s._v("#")]),s._v(" (一)：Simple模式")]),s._v(" "),t("ul",[t("li",[s._v("简单模式")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1808),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("代码演示")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1809),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("base.go代码：主要是封装rabbitmq的构造函数")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package rabbitmq\n\nimport (\n\t"fmt"\n\t"github.com/streadway/amqp"\n\t"log"\n)\n\n// Mqurl ipfsmain_user 是用户名和密码，ipfsmain是vhost\nconst Mqurl = "amqp://ipfsmain_user:ipfsmain_user@192.168.100.203:5672/ipfsmain"\n\ntype RabbitMQ struct {\n\t// 连接\n\tconn *amqp.Connection\n\t// 隧道\n\tchannel *amqp.Channel\n\t// 队列名称\n\tQueueName string\n\t// 交换机\n\tExchange string\n\t// key\n\tKey string\n\t// 连接信息\n\tMqurl string\n}\n\n// NewRabbitMQ 构造函数\nfunc NewRabbitMQ(queueName string, exchange string, key string) *RabbitMQ {\n\trabbitmq := &RabbitMQ{\n\t\tQueueName: queueName,\n\t\tExchange: exchange,\n\t\tKey: key,\n\t\tMqurl: Mqurl,\n\t}\n\tvar err error\n\t// 创建rabbitmq连接\n\trabbitmq.conn, err = amqp.Dial(rabbitmq.Mqurl)\n\trabbitmq.failOnErr(err, "创建连接错误")\n\t// 创建channel\n\trabbitmq.channel, err = rabbitmq.conn.Channel()\n\trabbitmq.failOnErr(err, "获取channel失败")\n\treturn rabbitmq\n}\n\n// Destroy 断开channel和conn\nfunc (r *RabbitMQ) Destroy () {\n\terr := r.channel.Close()\n\tif err != nil {\n\t\tfmt.Println("断开channel失败")\n\t}\n\terr = r.conn.Close()\n\tif err != nil {\n\t\tfmt.Println("断开conn失败")\n\t}\n}\n\n// 自定义错误输出\nfunc (r *RabbitMQ) failOnErr (err error, message string){\n\tif err != nil {\n\t\tlog.Fatalf("%s:%s", err, message)\n\t}\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br")])]),t("ul",[t("li",[s._v("rabbitmq.go代码：主要是对rabbitmq进行封装，封装了simple消息发送模式")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package rabbitmq\n\nimport (\n\t"fmt"\n\t"github.com/streadway/amqp"\n\t"log"\n)\n\n\n// NewRabbitMQSimple 创建simple rabbitmq\nfunc NewRabbitMQSimple(queueName string) *RabbitMQ {\n\treturn NewRabbitMQ(queueName, "", "")\n}\n\n// PublishSimple 发送消息\nfunc (r *RabbitMQ) PublishSimple (message string) {\n\t// 1：申请队列: 如果队列存在那么跳过，如果不存在就创建\n\t// name：队列名称, durable:消息是否持久化, autoDelete:队列是否自动删除, exclusive:是否具有排他性, noWait:是否阻塞, args:其他参数\n\t_, err := r.channel.QueueDeclare(r.QueueName, false, false, false, false, nil)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\n\t// 2：发送消息: exchange, key：这里传递的是队列名称, mandatory: 如果为true，根据exchange或者routekey规则找不到队列，那么会将消息回传, immediate：如果为true，当队列没有绑定消费者，那么会将消息回传, msg：发送的消息\n\terr = r.channel.Publish(r.Exchange, r.QueueName, false, false, amqp.Publishing{ContentType: "text/plain", Body: []byte(message)})\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n}\n\n// ConsumeSimple 接收消息\nfunc (r *RabbitMQ) ConsumeSimple () {\n\n\t_, err := r.channel.QueueDeclare(r.QueueName, false, false, false, false, nil)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\t// queue：队列名称, consumer 消费者名称, autoAck：是否自动应答, exclusive：是否具有排他性, noLocal：如果为true，表示不能将同一个connection中发送的消息传递给这个connection中的消费者, noWait：是否阻塞, args：其他参数\n\tmsgs, err := r.channel.Consume(r.QueueName, "", true, false, false, false, nil)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\n\tforever := make(chan bool)\n\n\t// 启用协程处理消息\n\tgo func() {\n\t\tfor msg := range msgs {\n\t\t\tlog.Printf("received message")\n\t\t\tfmt.Println(string(msg.Body))\n\t\t}\n\t}()\n\n\tlog.Printf("等待接收消息")\n\t<- forever\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br")])]),t("ul",[t("li",[s._v("simple_consume.go代码：调用rabbitmq封装的消费函数")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport "easy-kill/rabbitmq"\n\nfunc main() {\n\trabbitmqSimple := rabbitmq.NewRabbitMQSimple("ipfsmainSimple")\n\trabbitmqSimple.ConsumeSimple()\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("simple_publish.go代码：调用rabbitmq封装的生产函数")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport (\n\t"easy-kill/rabbitmq"\n\t"fmt"\n)\n\nfunc main() {\n\trabbitmqSimple := rabbitmq.NewRabbitMQSimple("ipfsmainSimple")\n\trabbitmqSimple.PublishSimple("hello")\n\tfmt.Println("消息发送成功")\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"二-worker模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-worker模式"}},[s._v("#")]),s._v(" (二)：Worker模式")]),s._v(" "),t("ul",[t("li",[s._v("工作模式：消息只能被一个消费者获取，目的是用于减轻负载")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1810),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("代码与Simple模式一样，主要是需要多启动几个消费者")])]),s._v(" "),t("li",[t("p",[s._v("生产者代码，主要是模拟连续发送消息")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport (\n\t"easy-kill/rabbitmq"\n\t"fmt"\n\t"strconv"\n\t"time"\n)\n\nfunc main() {\n\trabbitmqSimple := rabbitmq.NewRabbitMQSimple("ipfsmainSimple")\n\n\tfor i:=0; i<100; i++ {\n\t\trabbitmqSimple.PublishSimple("ipfsmain" + strconv.Itoa(i))\n\t\ttime.Sleep(time.Second)\n\t\tfmt.Println(i)\n\t}\n\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("ul",[t("li",[t("strong",[t("code",[s._v("Worker模式中的【多劳多得】模型")])]),s._v(" 这个很重要")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t默认情况下，rabbitmq在worker模式下，是基于轮询调度的。也就是说，如果有两个消费者，一个消费者消费的很快，一个消费的很慢，但是两个消费者消费的消息数量是一样的，这明显不是我们想要的\n\n\t为了实现消费速度快的消费者多消费的，需要在simple模式下，设置channel的Qos、consumer的autoAck、且每次成功消费消息后，手动提交确认消息msg.Ack、或者重新消费msg.Nack、或者丢弃消息msg.Reject\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("那么此时在"),t("code",[s._v("ConsumeSimple")]),s._v("基础上，创建一个"),t("code",[s._v("ConsumeWorker")]),s._v("，将worker模式改为【多劳多得】模型（需要修改的地方有三个）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// ConsumeWorker worker多劳多得模型\nfunc (r *RabbitMQ) ConsumeWorker () {\n\t_, err := r.channel.QueueDeclare(r.QueueName, false, false, false, false, nil)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\n\t// 每次只能向消费者发送一条信息,在消费者未确认之前,不再向他发送信息\n\t_ = r.channel.Qos(\n\t\t1,     //消费者1次消费的最大数量\n\t\t0,     //服务器传递的最大容量\n\t\tfalse, //是否全局可用\n\t)\n\t\n\t// 设置autoAck为false\n\tmsgs, err := r.channel.Consume(r.QueueName, "", false, false, false, false, nil)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\n\tforever := make(chan bool)\n\n\t// 启用协程处理消息\n\tgo func() {\n\t\tfor msg := range msgs {\n\t\t\ttime.Sleep(5*time.Second)\n\t\t\trawMsg := string(msg.Body)\n\t\t\tfmt.Println(rawMsg)\n\t\t\t// 手动确认消息\n\t\t\terr = msg.Ack(false)\n\t\t\tif err != nil {\n\t\t\t\t// 让此消息重新排队被消费\n\t\t\t\t_ = msg.Nack(false, true) // 让此消息重新排队\n\t\t\t}\n\t\t}\n\t}()\n\n\tlog.Printf("等待接收消息")\n\t<- forever\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br")])]),t("h3",{attrs:{id:"三-publish-subscribe模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-publish-subscribe模式"}},[s._v("#")]),s._v(" (三)：Publish/Subscribe模式")]),s._v(" "),t("ul",[t("li",[s._v("消息被路由给多个消费者，一个消息可以被多个消费者消费 。也就是说，消费者消费的数据是一样的")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1811),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("生产者首先将消息发送到exchange交换机，exchange基于规则将消息发送到队列上，消费者基于绑定的队列进行消费")])]),s._v(" "),t("li",[t("p",[s._v("在rabbitmq.go中，添加一个Publish/Subscribe的构造函数、发布方法、订阅方法")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// NewRabbitMQPubSub 创建一个Publish/Subscribe的rabbitmq\nfunc NewRabbitMQPubSub(exchangeName string) *RabbitMQ {\n\treturn NewRabbitMQ("", exchangeName, "")\n}\n\n// PublishPub 发布\nfunc (r *RabbitMQ) PublishPub (message string) {\n\t// 1：尝试创建交换机\n\t// fanout类型是是将接收到的所有消息广播到它知道的所有队列中, internal如果设置为true，那不可用被client推送消息，只能用于exchange之间的绑定\n\terr := r.channel.ExchangeDeclare(r.Exchange, "fanout", true, false, false, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 2：发送消息\n\t// 注意这里的key不能指定，\n\terr = r.channel.Publish(r.Exchange, "", false, false, amqp.Publishing{ContentType: "text/plain", Body: []byte(message)})\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n}\n\n// ReceiveSub 订阅\nfunc (r *RabbitMQ) ReceiveSub () {\n\t// 1：创建交换机\n\terr := r.channel.ExchangeDeclare(r.Exchange, "fanout", true, false, false, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\t// 2：创建队列, exclusive设置为true\n\tq, err := r.channel.QueueDeclare("", false, false, true, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 3：将队列绑定到exchange中\n\t// 这里的q.Name是创建成功的队列名称， key为空\n\terr = r.channel.QueueBind(q.Name, "", r.Exchange, false, nil)\n\n\t// 4：消费消息\n\tmsgs, err := r.channel.Consume(q.Name, "", true, false, false, false, nil)\n\n\tforever := make(chan bool)\n\tgo func() {\n\t\tfor msg := range msgs {\n\t\t\tfmt.Println(string(msg.Body))\n\t\t}\n\t}()\n\n\tlog.Printf("等待接收消息")\n\t<- forever\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br")])]),t("ul",[t("li",[s._v("publish.go代码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport (\n\t"easy-kill/rabbitmq"\n\t"fmt"\n\t"strconv"\n\t"time"\n)\n\nfunc main() {\n\n\trabbitmqPubSub := rabbitmq.NewRabbitMQPubSub("newProduct")\n\n\tfor i:=0; i<100; i++ {\n\t\trabbitmqPubSub.PublishPub("发布者发布第" + strconv.Itoa(i) + "条数据")\n\t\ttime.Sleep(time.Second)\n\t\tfmt.Println(i)\n\t}\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("ul",[t("li",[s._v("consumer.go代码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport "easy-kill/rabbitmq"\n\nfunc main() {\n\trabbitmqPubSub := rabbitmq.NewRabbitMQPubSub("newProduct")\n\trabbitmqPubSub.ReceiveSub()\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"四-routing模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-routing模式"}},[s._v("#")]),s._v(" (四)：Routing模式")]),s._v(" "),t("ul",[t("li",[s._v("一个消息被多个消费者获取，并且消息的目标队列是生产者指定的")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(1812),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("由上图可以知道，Exchange将消息发送给队列的时候，指定了routingkey，不同的消息发送给不同的队列，且不同的消费者消费不同队列中的数据，此时Exchange的类型是direct类型")])]),s._v(" "),t("li",[t("p",[s._v("在rabbitmq.go中，添加一个routing模式的构造函数、发布方法、订阅方法。因此，代码中会创建两个publisher实例，不同的publisher给不同的queue发送消息")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// NewRabbitMQRouting routing模式的构造函数\nfunc NewRabbitMQRouting(exchangeName, routingKey string) *RabbitMQ {\n\t// 创建Rabbitmq实例\n\trabbitmq := NewRabbitMQ("", exchangeName, routingKey)\n\treturn rabbitmq\n}\n\n// PublishRouting 路由模式发送消息\nfunc (r *RabbitMQ) PublishRouting (message string) {\n\t// 1：创建交换机\n\terr := r.channel.ExchangeDeclare(r.Exchange, "direct", true, false, false, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 2：发送消息，指定了key\n\terr = r.channel.Publish(r.Exchange, r.Key, false, false, amqp.Publishing{ContentType: "text/plain", Body: []byte(message)})\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n}\n\n// ReceiveRouting  路由模式接收消息\nfunc (r *RabbitMQ) ReceiveRouting () {\n\t// 1：创建交换机\n\terr := r.channel.ExchangeDeclare(r.Exchange, "direct", true, false, false, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 2：创建队列, exclusive设置为true\n\tq, err := r.channel.QueueDeclare("", false, false, true, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 3：将队列绑定到exchange中\n\t// 这里的q.Name是创建成功的队列名称, r.key是key的名称, 指定从key对应的队列消费消息\n\terr = r.channel.QueueBind(q.Name, r.Key, r.Exchange, false, nil)\n\n\t// 4：消费消息\n\tmsgs, err := r.channel.Consume(q.Name, "", true, false, false, false, nil)\n\n\tforever := make(chan bool)\n\tgo func() {\n\t\tfor msg := range msgs {\n\t\t\tfmt.Println(string(msg.Body))\n\t\t}\n\t}()\n\n\tlog.Printf("等待接收消息")\n\t<- forever\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("这里的exchange一旦定义了类型，那么就无法更改，如果需要更改，必须在web上将这个exchange删除")])]),s._v(" "),t("li",[t("p",[s._v("publish.go代码")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport (\n\t"easy-kill/rabbitmq"\n\t"fmt"\n\t"strconv"\n\t"time"\n)\n\nfunc main() {\n\n\tipfsmain1 := rabbitmq.NewRabbitMQRouting("ipfsmain", "one")\n\tipfsmain2 := rabbitmq.NewRabbitMQRouting("ipfsmain", "two")\n\n\tfor i:=0;i<100;i++ {\n\t\tipfsmain1.PublishRouting("hello one! " + strconv.Itoa(i))\n\t\tipfsmain2.PublishRouting("hello two " + strconv.Itoa(i))\n\t\ttime.Sleep(time.Second)\n\t\tfmt.Println(i)\n\t}\n\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("ul",[t("li",[s._v("consumer.go代码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport "easy-kill/rabbitmq"\n\nfunc main() {\n\trabbitmqRoutingOne := rabbitmq.NewRabbitMQRouting("ipfsmain", "two")\n\trabbitmqRoutingOne.ReceiveRouting()\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"五-topics模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五-topics模式"}},[s._v("#")]),s._v(" (五)：Topics模式")]),s._v(" "),t("p",[t("img",{attrs:{src:a(1813),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Topic模式是基于Routing模式的，与Routing模式不同的是："),t("code",[s._v("消费者选择队列绑定时候，可以使用模糊匹配进行匹配")])])]),s._v(" "),t("li",[t("p",[s._v("在rabbitmq.go中，添加一个topic模式的构造函数、发布方法、订阅方法。因此，代码中会创建两个publisher实例，不同的publisher给不同的queue发送消息，消费者可以通过模糊匹配到key，从而可以读取一个或多个队列中的消息")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// NewRabbitMQTopic Topic模式构造函数\nfunc NewRabbitMQTopic(exchangeName, routingKey string) *RabbitMQ {\n\trabbitmq := NewRabbitMQ("", exchangeName, routingKey)\n\treturn rabbitmq\n}\n\n// PublishTopic 主题模式发送消息\nfunc (r *RabbitMQ) PublishTopic(message string) {\n\t// 1：创建交换机\n\terr := r.channel.ExchangeDeclare(r.Exchange, "topic", true, false, false, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 2：发送消息，指定了key\n\terr = r.channel.Publish(r.Exchange, r.Key, false, false, amqp.Publishing{ContentType: "text/plain", Body: []byte(message)})\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n}\n\n// ReceiveTopic 主题模式接收消息\nfunc (r *RabbitMQ) ReceiveTopic () {\n\n\t// 1：创建交换机\n\terr := r.channel.ExchangeDeclare(r.Exchange, "topic", true, false, false, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 2：创建队列, exclusive设置为true\n\tq, err := r.channel.QueueDeclare("", false, false, true, false, nil)\n\tif err != nil {\n\t\tlog.Fatalf("%s", err)\n\t}\n\n\t// 3：将队列绑定到exchange中\n\terr = r.channel.QueueBind(q.Name, r.Key, r.Exchange, false, nil)\n\n\t// 4：消费消息\n\tmsgs, err := r.channel.Consume(q.Name, "", true, false, false, false, nil)\n\n\n\tforever := make(chan bool)\n\tgo func() {\n\t\tfor msg := range msgs {\n\t\t\tfmt.Println(string(msg.Body))\n\t\t}\n\t}()\n\n\tlog.Printf("等待接收消息")\n\t<- forever\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br")])]),t("ul",[t("li",[s._v("publish.go代码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport (\n\t"fmt"\n\t"rabbitmqfortest/rabbitmq"\n\t"strconv"\n\t"time"\n)\n\nfunc main() {\n\n\tipfsmain1 := rabbitmq.NewRabbitMQTopic("ipfsmain", "ipfsmain.one")\n\tipfsmain2 := rabbitmq.NewRabbitMQTopic("ipfsmain", "ipfsmain.two.cs")\n\n\tfor i:=0;i<100;i++ {\n\t\tipfsmain1.PublishTopic("hello one! " + strconv.Itoa(i))\n\t\tipfsmain2.PublishTopic("hello two " + strconv.Itoa(i))\n\t\ttime.Sleep(time.Second)\n\t\tfmt.Println(i)\n\t}\n\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("ul",[t("li",[s._v("consumer1.go代码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport "rabbitmqfortest/rabbitmq"\n\nfunc main() {\n\t// 这里的#号表示匹配exchange中的所有的消息\n\trabbitmqTopicOne := rabbitmq.NewRabbitMQTopic("ipfsmain", "#")\n\trabbitmqTopicOne.ReceiveTopic()\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("consumer2.go代码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package main\n\nimport "rabbitmqfortest/rabbitmq"\n\nfunc main() {\n\t// 这里的ipfsmain.*.cs表示匹配第二个队列中的消息\n\trabbitmqTopicOne := rabbitmq.NewRabbitMQTopic("ipfsmain", "ipfsmain.*.cs")\n\trabbitmqTopicOne.ReceiveTopic()\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"六-rpc模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六-rpc模式"}},[s._v("#")]),s._v(" (六)：RPC模式")]),s._v(" "),t("ul",[t("li",[s._v("暂时用不到")])]),s._v(" "),t("h3",{attrs:{id:"七-publisher-confirms模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七-publisher-confirms模式"}},[s._v("#")]),s._v(" (七)：Publisher Confirms模式")]),s._v(" "),t("ul",[t("li",[s._v("暂时用不到")])]),s._v(" "),t("h2",{attrs:{id:"五-rabbitmq的消息确认、限流、消息持久化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五-rabbitmq的消息确认、限流、消息持久化"}},[s._v("#")]),s._v(" 五：RabbitMQ的消息确认、限流、消息持久化")]),s._v(" "),t("h3",{attrs:{id:"一-消息确认ack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-消息确认ack"}},[s._v("#")]),s._v(" (一)：消息确认ack")]),s._v(" "),t("ul",[t("li",[s._v("消息确认在前面的worker模式中已经说明了")])]),s._v(" "),t("h3",{attrs:{id:"二-消费者限流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-消费者限流"}},[s._v("#")]),s._v(" (二)：消费者限流")]),s._v(" "),t("ul",[t("li",[s._v("限流也就是消费者消费的时候设置的Qos")])]),s._v(" "),t("h3",{attrs:{id:"三-消息持久化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-消息持久化"}},[s._v("#")]),s._v(" (三)：消息持久化")]),s._v(" "),t("ul",[t("li",[s._v("1：创建交换机时，设置持久化")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# durable为true\nerr := r.channel.ExchangeDeclare(r.Exchange, "topic", true, false, false, false, nil)\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("2：队列持久化")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# durable为true\nq, err := r.channel.QueueDeclare("", false, false, true, false, nil)\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("3：队里里面的消息持久化")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 发送消息到队列的时候，指定消息持久化：amqp.Persistent\nerr = r.channel.Publish(r.Exchange, r.Key, false, false, amqp.Publishing{DeliveryMode: amqp.Persistent, ContentType: "text/plain", Body: []byte(message)})\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);