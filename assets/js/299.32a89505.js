(window.webpackJsonp=window.webpackJsonp||[]).push([[299],{2588:function(s,a,e){"use strict";e.r(a);var n=e(9),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一-hbase架构原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-hbase架构原理"}},[s._v("#")]),s._v(" 一：Hbase架构原理")]),s._v(" "),n("h3",{attrs:{id:"一-架构原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-架构原理"}},[s._v("#")]),s._v(" (一)架构原理")]),s._v(" "),n("ul",[n("li",[s._v("知识点说明：")])]),s._v(" "),n("p",[n("img",{attrs:{src:e(524),alt:"Alt text"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1: hbase依赖于zookeeper和HDFS, hbase数据存放于hdfs文件系统之上，因此hbase可以无限的增加datanode节点，实现数据扩容。\n\n2：数据存放管理基于RegionServer来管理的，Region相当于表的一个分区，Master管理RegionServer节点，RegionServer会向Master报告心跳和管理的region，如果一个RegionServer宕机，Master能够完成宕机的数据迁移\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"二-hbase配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-hbase配置"}},[s._v("#")]),s._v(" (二)hbase配置")]),s._v(" "),n("ul",[n("li",[s._v("知识点说明：\n"),n("ul",[n("li",[s._v("1：node1: Master服务")]),s._v(" "),n("li",[s._v("2：node1、node2、node3：regionserver")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:e(524),alt:"Alt text"}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1: 将hbase命令添加到环境变量\nvi /etc/profile.d/hbase.sh\nexport PATH=/opt/modules/hbase-0.98.6-cdh5.3.5/bin:$PATH\n. /etc/profile.d/hbase.sh\n\n2: vi hbase-env.sh\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.222.b10-0.el7_6.x86_64\nexport HBASE_MANAGES_ZK=false\n\n3: vi hbase-site.xml \n<configuration>\n    <property>\n        <name>hbase.rootdir</name>\n        <value>hdfs://node1:9000/hbase</value>\n    </property>\n    <property>\n        <name>hbase.cluster.distributed</name>\n        <value>true</value>\n    </property>\n    <property>\n        <name>hbase.zookeeper.quorum</name>\n        <value>node1,node2,node3</value>\n    </property>\n</configuration>\n\n4:  vi regionservers \nnode1\nnode2\nnode3\n\n5： 将node1上的hbase拷贝到node2、node3\nscp -r hbase-0.98.6-cdh5.3.5 node2:/opt/modules/\nscp -r hbase-0.98.6-cdh5.3.5 node3:/opt/modules/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("h2",{attrs:{id:"二-将ha的配置还原"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-将ha的配置还原"}},[s._v("#")]),s._v(" 二：将HA的配置还原")]),s._v(" "),n("h3",{attrs:{id:"一-ha的配置还原"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-ha的配置还原"}},[s._v("#")]),s._v(" (一)HA的配置还原")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("3个节点都完成如下操作：\n1: 停止掉所有的服务\n\n2：备份ha配置\nmv hadoop hadoop_ha\n\n3：还原备份配置\nmv hadoop_backup hadoop\n\n4: 备份data下的tmp目录\nmv tmp tmp_ha\n\n5: namenode格式化\nhdfs namenode -format\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"三-启动hbase"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-启动hbase"}},[s._v("#")]),s._v(" 三：启动Hbase")]),s._v(" "),n("h3",{attrs:{id:"一-启动hbase"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-启动hbase"}},[s._v("#")]),s._v(" (一)启动Hbase")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1：启动hdfs\nstart-dfs.sh \n\n2: 3台节点启动zookeeper\nzkServer.sh start\n\n3：node1启动Master, node1、node2、node3启动regionserver\nhbase-daemon.sh start master\nhbase-daemon.sh start regionserver\n\n4: hbase的web页面为：http://node1:60010/master-status?filter=all#baseStats\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"四-验证hbase"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-验证hbase"}},[s._v("#")]),s._v(" 四：验证Hbase")]),s._v(" "),n("h3",{attrs:{id:"一-shell验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-shell验证"}},[s._v("#")]),s._v(" (一)shell验证")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1: shell连接hbase\nhbase shell\n\n2: 创建表\ncreate 'table1', 'field1'\n\n3：添加数据(table1是表，0001是行，field1:userName列的字段，Robby是值)\n put 'table1' , '0001', 'field1:userName', 'Robby'\n put 'table1' , '0001', 'field1:age', '28'\n put 'table1' , '0001', 'field1:tel', '1388383836273'\n put 'table1' , '0002', 'field1:tel', '1389383836273'\n \n4: 查看数据\nscan 'table1'\n\n5： 查看表的描述\ndescribe 'table1'\n\n6：禁用表\ndisable 'table1'\n\n7：删除表\ndrop 'table1'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h2",{attrs:{id:"五-下载用户日志数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五-下载用户日志数据"}},[s._v("#")]),s._v(" 五：下载用户日志数据")]),s._v(" "),n("h3",{attrs:{id:"一-下载搜狗lab用户查询日志-进行分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-下载搜狗lab用户查询日志-进行分析"}},[s._v("#")]),s._v(" (一)下载搜狗lab用户查询日志,进行分析")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1: 每一行日志字段说明：\n访问时间 用户ID [查询词] 该URL在返回结果中的排名 用户点击的顺序号 用户点击的URL\n00:00:00  2982199073774412    [360安全卫士]   8 3     download.it.com.cn/softweb/software/firewall/antivirus/20067/17938.html\n\n2: 基于日志字段描述，在Hbase中创建表\ncreate 'searchlogs', 'info'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports},524:function(s,a,e){s.exports=e.p+"assets/img/1w.1c79e567.png"}}]);