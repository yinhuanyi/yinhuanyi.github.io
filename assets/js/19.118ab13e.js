(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1041:function(s,n,e){s.exports=e.p+"assets/img/2019-07-0811.49.01.d83ddef8.png"},1042:function(s,n,e){s.exports=e.p+"assets/img/2019-07-0811.49.46.7c64425f.png"},1043:function(s,n,e){s.exports=e.p+"assets/img/2019-07-0811.53.01.5d7f738a.png"},1044:function(s,n,e){s.exports=e.p+"assets/img/2019-07-0811.55.14.d95a6539.png"},1045:function(s,n,e){s.exports=e.p+"assets/img/2019-07-081.48.36.82090394.png"},1046:function(s,n,e){s.exports=e.p+"assets/img/2019-07-081.48.17.63209869.png"},1047:function(s,n,e){s.exports=e.p+"assets/img/2019-07-082.17.16.3c794818.png"},1048:function(s,n,e){s.exports=e.p+"assets/img/2019-07-082.21.25.7d81b131.png"},1049:function(s,n,e){s.exports=e.p+"assets/img/2019-07-082.22.42.332c0eb1.png"},1050:function(s,n,e){s.exports=e.p+"assets/img/2019-07-082.24.40.32f6b95f.png"},1051:function(s,n,e){s.exports=e.p+"assets/img/2019-07-084.15.58.6737a431.png"},1052:function(s,n,e){s.exports=e.p+"assets/img/2019-07-084.24.55.7e23c043.png"},1053:function(s,n,e){s.exports=e.p+"assets/img/2019-07-084.25.43.33a1c6b6.png"},1054:function(s,n,e){s.exports=e.p+"assets/img/2019-07-084.26.20.566a6276.png"},1055:function(s,n,e){s.exports=e.p+"assets/img/2019-07-084.31.35.bd458e52.png"},2410:function(s,n,e){"use strict";e.r(n);var t=e(9),a=Object(t.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("ul",[t("li",[s._v("概念")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("精准率\n\t精准率说明判断为真的正例占所有判断为真的样例比重\n\t也就是说：所有分类为1的预测中，有多少是正确的\n\n召回率\n\t召回率又被称为查全率，用来说明分类器中判定为真的正例占总正例的比率\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"一-准确度的缺陷和混淆矩阵"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-准确度的缺陷和混淆矩阵"}},[s._v("#")]),s._v(" "),t("code",[s._v("(一)准确度的缺陷和混淆矩阵")])]),s._v(" "),t("ul",[t("li",[s._v("分类准确度的问题")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t对于极度偏斜的数据，只使用分类准确度是远远不够的，之前使用的数据集都是均衡的数据集\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("混淆矩阵 Confusion Matrix(针对于二分类问题)")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1041),alt:"Alt text"}})]),s._v(" "),t("p",[t("img",{attrs:{src:e(1042),alt:"Alt text"}})]),s._v(" "),t("h3",{attrs:{id:"二-精准率和召回率"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-精准率和召回率"}},[s._v("#")]),s._v(" "),t("code",[s._v("(二)精准率和召回率")])]),s._v(" "),t("ul",[t("li",[s._v("精准率计算方式")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1043),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("召回率计算方式")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1044),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("加载数据集")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import numpy as np \nfrom sklearn import datasets\n\ndigits = datasets.load_digits()\nX = digits.data\n# 因为是引用，所以拷贝\ny = digits.target.copy()\n\n# 将10个类别，分为了2个类别，将9这个类别改为1，其他类别改为0\ny[digits.target==9] = 1\ny[digits.target!=9] = 0\n\n# 数据拆分\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, random_state=666)\n\n# 使用逻辑回归预测\nfrom sklearn.linear_model import LogisticRegression\nlog_reg = LogisticRegression()\nlog_reg.fit(X_train, y_train)\nlog_reg.score(X_test, y_test)\n输出结果：\n0.9755555555555555\n\n# 拿到预测值\ny_log_predict = log_reg.predict(X_test)\n\n# 计算混淆矩阵\ndef TN(y_true, y_predict):\n    assert len(y_true) == len(y_predict)\n    return np.sum((y_true == 0) & (y_predict == 0))\n\ndef FP(y_true, y_predict):\n    assert len(y_true) == len(y_predict)\n    return np.sum((y_true == 0) & (y_predict == 1))\n\ndef FN(y_true, y_predict):\n    assert len(y_true) == len(y_predict)\n    return np.sum((y_true == 1) & (y_predict == 0))\n\ndef TP(y_true, y_predict):\n    assert len(y_true) == len(y_predict)\n    return np.sum((y_true == 1) & (y_predict == 1))\n\n\n\ndef confusion_matrix(y_true, y_predict):\n    return np.array([\n        [TN(y_true, y_predict), FP(y_true, y_predict)],\n        [FN(y_true, y_predict), TP(y_true, y_predict)],\n    ])\n\n# 混淆矩阵\nconfusion_matrix(y_test, y_log_predict)\n输出结果：\narray([[403,   2],\n       [  9,  36]])\n\n\n# 计算精准率和\ndef precision_score(y_true, y_predict):\n    tp = TP(y_true, y_predict)\n    fp = FP(y_true, y_predict)\n    try:\n        return tp / (tp + fp)\n    except:\n        return 0.0\n    \n\n\n# 召回率\ndef recall_score(y_true, y_predict):\n    tp = TP(y_true, y_predict)\n    fn = FN(y_true, y_predict)\n    try:\n        return tp / (tp + fn)\n    except:\n        return 0.0\n    \nprint(precision_score(y_test, y_log_predict))\nprint(recall_score(y_test, y_log_predict))\n输出结果：\n0.9473684210526315\n0.8\n\n# 使用sklearn的混淆矩阵、精准率、召回率\nfrom sklearn.metrics import confusion_matrix,\\\n                            precision_score, \\\n                            recall_score\n\n\nprint(confusion_matrix(y_test, y_log_predict))\nprint(precision_score(y_test, y_log_predict))\nprint(recall_score(y_test, y_log_predict))\n输出结果：\n[[403   2]\n[  9  36]]\n0.9473684210526315\n0.8\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br")])]),t("h3",{attrs:{id:"三-精准率和召回率的重要性对比以及f1-score"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-精准率和召回率的重要性对比以及f1-score"}},[s._v("#")]),s._v(" "),t("code",[s._v("(三)精准率和召回率的重要性对比以及F1 Score")])]),s._v(" "),t("ul",[t("li",[s._v("什么时候精准率比较重要")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t当预测股票的时候，精准率可以明显判断出，股票是赚钱还是亏损了，而召回率对于股票来说，没有买的股票，跌了还是涨了不会有任何亏损\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("什么时候召回率比较重要")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t当预测医疗事故的时候，本来病人已经得病了，但是没有预测出来，导致病人病情恶化，我们希望将所有有病的病人都预测出来\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("F1 Score")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\tF1 Score：可以同时兼顾精准率和召回率，使用的是precision和recall的调和平均值\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:e(1045),alt:"Alt text"}})]),s._v(" "),t("p",[t("img",{attrs:{src:e(1046),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("F1 Score实现")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("def f1_score(precision, recall):\n    try:\n        return 2*precision*recall / (precision + recall)\n    except:\n        return 0.0\n\n\nprecision = 0.5\nrecall = 0.5\nf1_score(precision, recall)\n输出结果：\n0.5\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[s._v("调用sklearn中的F1 Score")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from sklearn.metrics import f1_score\n\nf1_score(y_test, y_log_predict)\n输出结果：\n0.8674698795180723\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"四-precision-recall的均衡和threshold分类阈值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-precision-recall的均衡和threshold分类阈值"}},[s._v("#")]),s._v(" "),t("code",[s._v("(四)Precision-Recall的均衡和threshold分类阈值")])]),s._v(" "),t("ul",[t("li",[s._v("决策边界")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1047),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t对于threshold取不同的值，可以平移决策边界\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("当threshold为0")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1048),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("当threshold向右移动")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1049),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("当threshold向左移动")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1050),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("调整分类阈值 threshold")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 使用逻辑回归的decision_function，可以计算出前样本的分数值\nlog_reg.decision_function(X_test)[:10]\n输出结果：\narray([-22.05700185, -33.02943631, -16.21335414, -80.37912074,\n       -48.25121102, -24.54004847, -44.39161228, -25.0429358 ,\n        -0.97827574, -19.71740779])\n\n# 查看这10个样本的分类结果\nlog_reg.predict(X_test)[:10]\n输出结果：\narray([0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n\n# 由于在逻辑回归算法中，threshold的值是0，那么如果threshold改为5看看分类效果\ny_predict2 = np.array(decision_scores >= 5, dtype=int)\n# 查看移动了threshold阈值为5后，新的混淆矩阵和准确率和召回率\nprint(confusion_matrix(y_test, y_predict2))\nprint(precision_score(y_test, y_predict2))\nprint(recall_score(y_test, y_predict2))\n输出结果：\narray([[404,   1],\n       [ 21,  24]])\n0.96\n0.5333333333333333\n       \n\n# 将阈值调到-15\ny_predict3 = np.array(decision_scores >= -15, dtype=int)\nprint(confusion_matrix(y_test, y_predict3))\nprint(precision_score(y_test, y_predict3))\nprint(recall_score(y_test, y_predict3))\n输出结果：\n[[326  79]\n [  2  43]]\n0.3524590163934426\n0.9555555555555556\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t上述的结果输出证明：默认的分类阈值为0，那么如果将分类阈值左右移动，精准率和召回率的值也会相应的改变\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"五-准确率和召回率可视化曲线"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五-准确率和召回率可视化曲线"}},[s._v("#")]),s._v(" "),t("code",[s._v("(五)准确率和召回率可视化曲线")])]),s._v(" "),t("ul",[t("li",[s._v("让threshold取不同的值，绘制Precision-Recall曲线")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from sklearn.linear_model import LogisticRegression\nimport matplotlib.pyplot as plt\nlog_reg = LogisticRegression()\nlog_reg.fit(X_train, y_train)\n# 获取决策分数值\ndecision_scores = log_reg.decision_function(X_test)\n\n# 通过决策分数值的最小值和最大值得到一个区间，步长为0.1\nthresholds = np.arange(np.min(decision_scores), np.max(decision_scores), 0.1)\nprecisions = []\nrecalls = []\nfor threshold in thresholds:\n    # 通过threshold的取不同的值，直接对decision_scores的值进行样本分类, 获取分类结果\n    y_predict = np.array(decision_scores >= threshold, dtype='int')\n    #计算准确率和召回率, 保存到列表中\n    precisions.append(precision_score(y_test, y_predict))\n    recalls.append(recall_score(y_test, y_predict))\n\nplt.plot(thresholds, precisions, label='precision')\nplt.plot(thresholds, recalls, label='recall')\nplt.legend()\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("绘制PR曲线")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("plt.plot(precisions, recalls)\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("使用sklearn中的precision-recall曲线")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from sklearn.metrics import precision_recall_curve\n\n# 使用precision_recall_curve函数，获取precisions, recalls, thresholds\nprecisions, recalls, thresholds = precision_recall_curve(y_test, decision_scores)\n\n# 在sklearn的官方文档中说明了，最后一个precisions=1， recalls=0，没有对应的threshold\nprint(precisions.shape)\nprint(recalls.shape)\nprint(thresholds.shape)\n输出结果：\n(145,)\n(145,)\n(144,)\n\n# 和之前的图不同，是因为sklearn中并没有从decision_scores的最小值开始画图\nplt.plot(thresholds, precisions[:-1], label='precision')\nplt.plot(thresholds, recalls[:-1], label='recall')\nplt.legend()\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("plt.plot(precisions, recalls)\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("使用PR曲线的面积来判断模型算法的好坏")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1051),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("面积大的曲线比面积小的曲线好\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"六-roc曲线"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六-roc曲线"}},[s._v("#")]),s._v(" "),t("code",[s._v("(六)ROC曲线")])]),s._v(" "),t("ul",[t("li",[s._v("TPR")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1052),alt:"Alt text"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("TPR的计算也就是Recall\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("FPR")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1053),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("TPR 与 FPR的关系")])])]),s._v(" "),t("p",[t("img",{attrs:{src:e(1054),alt:"Alt text"}})]),s._v(" "),t("p",[t("img",{attrs:{src:e(1055),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("TPR 与 FPR的实现")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("def TPR(y_true, y_predict):\n\ttp = TP(y_true, y_predict)\n\tfn = FN(y_true, y_predict)\n\ttry:\n\t\treturn tp/(tp+fn)\n\texcept:\n\t\treturn 0.0\n\t\ndef FPR(y_true, y_predict):\n\tfp = FP(y_true, y_predict)\n\ttn = TN(y_true, y_predict)\n\ttry:\n\t\treturn fp / (fp + tn)\n\texcept:\n\t\treturn 0.0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("加载数据集, 计算 TPR和FPR和ROC曲线")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import numpy as np \nfrom sklearn import datasets\n\ndigits = datasets.load_digits()\nX = digits.data\n# 因为是引用，所以拷贝\ny = digits.target.copy()\n\n# 将10个类别，分为了2个类别，将9这个类别改为1，其他类别改为0\ny[digits.target==9] = 1\ny[digits.target!=9] = 0\n\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, random_state=666)\n\n\nfrom sklearn.linear_model import LogisticRegression\nlog_reg = LogisticRegression()\nlog_reg.fit(X_train, y_train)\ndecision_scores = log_reg.decision_function(X_test)\n\nthresholds = np.arange(np.min(decision_scores), np.max(decision_scores), 0.1)\nfprs = []\ntprs = []\n\nfor threshold in thresholds:\n    y_predict = np.array(decision_scores >= threshold, dtype='int')\n    fprs.append(FPR(y_test, y_predict))\n    tprs.append(TPR(y_test, y_predict))\n    \nplt.plot(fprs, tprs)\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("使用sklearn中的ROC曲线")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from sklearn.metrics import roc_curve\n\nfprs, tprs, thresholds = roc_curve(y_test, decision_scores)\nplt.plot(fprs, tprs)\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("计算ROC的面积")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 获取ROC曲线的面积\nfrom sklearn.metrics import roc_auc_score\n\n# 面积\nroc_auc_score(y_test, decision_scores,)\n输出结果：\n0.9830452674897119\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ROC的应用场景：比较模型的优劣\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"七-多分类问题中的混淆矩阵"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七-多分类问题中的混淆矩阵"}},[s._v("#")]),s._v(" "),t("code",[s._v("(七)多分类问题中的混淆矩阵")])]),s._v(" "),t("ul",[t("li",[s._v("加载多分类数据集")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import numpy as np \nfrom sklearn import datasets\n\ndigits = datasets.load_digits()\nX = digits.data\ny = digits.target\n\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, random_state=666)\n\n# 逻辑回归自带多分类\nfrom sklearn.linear_model import LogisticRegression\nlog_reg = LogisticRegression()\nlog_reg.fit(X_train, y_train)\nlog_reg.score(X_test, y_test)\n输出结果：\n0.9555555555555556\n\n\n# 计算多分类的精准率\nfrom sklearn.metrics import precision_score\n\ny_predict = log_reg.predict(X_test)\n# 计算多分类问题的精准率\nprecision_score(y_test, y_predict, average='micro')\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("ul",[t("li",[s._v("多分类的混淆矩阵")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from sklearn.metrics import confusion_matrix\n\n# 混淆矩阵对角线的数值比较大，说明预测的和真实的情况一致，那么算法的错误率比较低\nconfusion_matrix(y_test, y_predict)\n输出结果：\narray([[45,  0,  0,  0,  0,  1,  0,  0,  0,  0],\n       [ 0, 37,  0,  0,  0,  0,  0,  0,  3,  0],\n       [ 0,  0, 49,  1,  0,  0,  0,  0,  0,  0],\n       [ 0,  0,  0, 49,  0,  1,  0,  0,  3,  0],\n       [ 0,  1,  0,  0, 47,  0,  0,  0,  0,  0],\n       [ 0,  0,  0,  1,  0, 36,  0,  0,  1,  0],\n       [ 0,  0,  0,  0,  0,  1, 38,  0,  0,  0],\n       [ 0,  0,  0,  0,  0,  0,  0, 42,  0,  1],\n       [ 0,  2,  0,  0,  0,  0,  0,  0, 46,  0],\n       [ 0,  1,  0,  1,  1,  1,  0,  0,  0, 41]])\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[s._v("将混淆矩阵可视化")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 图形越亮的地方数值越大\ncfm = confusion_matrix(y_test, y_predict)\nplt.matshow(cfm, cmap=plt.cm.gray)\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("如何找到预测错误的地方在哪")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 求每一行的数值之和\nrow_sums = np.sum(cfm, axis=1)\n# 矩阵的错误率\nerr_matrix = cfm / row_sums\n# 将对角线的数值填充为0\nnp.fill_diagonal(err_matrix, 0)\nerr_matrix\n输出结果：\narray([[0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.02631579, 0.        , 0.        , 0.        , 0.        ],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.        , 0.        , 0.        , 0.0625    , 0.        ],\n       [0.        , 0.        , 0.        , 0.01886792, 0.        ,\n        0.        , 0.        , 0.        , 0.        , 0.        ],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.02631579, 0.        , 0.        , 0.0625    , 0.        ],\n       [0.        , 0.025     , 0.        , 0.        , 0.        ,\n        0.        , 0.        , 0.        , 0.        , 0.        ],\n       [0.        , 0.        , 0.        , 0.01886792, 0.        ,\n        0.        , 0.        , 0.        , 0.02083333, 0.        ],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.02631579, 0.        , 0.        , 0.        , 0.        ],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.        , 0.        , 0.        , 0.        , 0.02222222],\n       [0.        , 0.05      , 0.        , 0.        , 0.        ,\n        0.        , 0.        , 0.        , 0.        , 0.        ],\n       [0.        , 0.025     , 0.        , 0.01886792, 0.02083333,\n        0.02631579, 0.        , 0.        , 0.        , 0.        ]])\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("ul",[t("li",[s._v("将去除对角线值归0的err_matrix矩阵可视化")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 越亮的地方就是犯错误多的地方\nplt.matshow(err_matrix, cmap=plt.cm.gray)\nplt.show()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:e(465),alt:"Alt text"}})]),s._v(" "),t("ul",[t("li",[s._v("小结")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\t从上图可以看到，1和8的地方容易犯错误，因此在算法分类的时候，调整1和8的threshold来提高多分类问题的准确度，这种微调的过程比较麻烦的，需要自己研究\n\t可能在这里分类的时候，不是算法的问题，而是样本的问题，那么就需要将这几个样本拿出来看看，看看是不是特征选择有问题，例如特征工程的过程出现问题了\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);n.default=a.exports},465:function(s,n){s.exports="data:image/png;base64,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"}}]);